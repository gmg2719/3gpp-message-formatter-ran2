3GPP TS 38.331 V15.1.0 (2018-03)
Technical Specification
3rd Generation Partnership Project;
Technical Specification Group Radio Access Network;
NR;
Radio Resource Control (RRC) protocol specification
(Release 15)

	
The present document has been developed within the 3rd Generation Partnership Project (3GPP TM) and may be further elaborated for the purposes of 3GPP..
The present document has not been subject to any approval process by the 3GPP Organizational Partners and shall not be implemented.
This Specification is provided for future development work within 3GPP only. The Organizational Partners accept no liability for any use of this Specification.
Specifications and Reports for implementation of the 3GPP TM system should be obtained via the 3GPP Organizational Partners' Publications Offices.









3GPP
Postal address

3GPP support office address
650 Route des Lucioles - Sophia Antipolis
Valbonne - FRANCE
Tel.: +33 4 92 94 42 00 Fax: +33 4 93 65 47 16
Internet
http://www.3gpp.org

Copyright Notification
No part may be reproduced except as authorized by written permission.
The copyright and the foregoing restriction extend to reproduction in all media.

© 2018, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).
All rights reserved.

UMTS™ is a Trade Mark of ETSI registered for the benefit of its members
3GPP™ is a Trade Mark of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners
LTE™ is a Trade Mark of ETSI registered for the benefit of its Members and of the 3GPP Organizational Partners
GSM® and the GSM logo are registered and owned by the GSM Association

Contents
Foreword	10
1	Scope	11
2	References	11
3	Definitions, symbols and abbreviations	12
3.1	Definitions	12
3.2	Abbreviations	12
4	General	14
4.1	Introduction	14
4.2	Architecture	14
4.2.1	UE states and state transitions including inter RAT	14
4.2.2	Signalling radio bearers	17
4.3	Services	17
4.3.1	Services provided to upper layers	17
4.3.2	Services expected from lower layers	17
4.4	Functions	17
5	Procedures	18
5.1	General	18
5.1.1	Introduction	18
5.1.2	General requirements	18
5.2	System information	18
5.2.1	Introduction	19
5.2.2	System information acquisition	19
5.2.2.1	General UE requirements	19
5.2.2.2	SI validity and need to (re)-acquire SI	20
5.2.2.2.1	SI validity	20
5.2.2.2.2	SI change indication and PWS notification	20
5.2.2.3	Acquisition of System Information	21
5.2.2.3.1	Acquisition of MIB and SIB1	21
5.2.2.3.2	Acquisition of an SI message	21
5.2.2.3.3	Request for on demand system information	22
5.2.2.4	Actions upon receipt of SI message	22
5.2.2.4.1	Actions upon reception of the MIB	22
5.2.2.4.2	Actions upon reception of the SystemInformationBlockType1	23
5.2.2.4.3	Actions upon reception of SystemInformationBlockTypeX	23
5.2.2.5	Essential system information missing	23
5.3	Connection control	24
5.3.1	Introduction	24
5.3.2	Paging	24
5.3.3	RRC connection establishment	24
5.3.4	Initial security activation	24
5.3.5	RRC reconfiguration	24
5.3.5.1	General	24
5.3.5.2	Initiation	24
5.3.5.3	Reception of an RRCReconfiguration by the UE	25
5.3.5.4	Secondary cell group release	25
5.3.5.5	Cell Group configuration	26
5.3.5.5.1	General	26
5.3.5.5.2	Reconfiguration with sync	26
5.3.5.5.3	RLC bearer release	27
5.3.5.5.4	RLC bearer addition/modification	27
5.3.5.5.5	MAC entity configuration	28
5.3.5.5.6	RLF Timers & Constants configuration	28
5.3.5.5.7	SPCell Configuration	28
5.3.5.5.8	SCell Release	29
5.3.5.5.9	SCell Addition/Modification	29
5.3.5.6	Radio Bearer configuration	29
5.3.5.6.1	General	29
5.3.5.6.2	SRB release	29
5.3.5.6.3	SRB addition/modification	30
5.3.5.6.4	DRB release	30
5.3.5.6.5	DRB addition/modification	31
5.3.5.7	Security key update	32
5.3.5.8	Reconfiguration failure	32
5.3.5.8.1	Integrity check failure	32
5.3.5.8.2	Inability to comply with RRCReconfiguration	32
5.3.5.8.3	T304 expiry (Reconfiguration with sync Failure)	32
5.3.5.9	Other configuration	33
5.3.5.10	EN-DC release	33
5.3.6	Counter check	33
5.3.7	RRC connection re-establishment	33
5.3.8	RRC connection release	33
5.3.9	RRC connection release requested by upper layers	33
5.3.10	Radio link failure related actions	33
5.3.10.1	Detection of physical layer problems in RRC_CONNECTED	33
5.3.10.2	Recovery of physical layer problems	33
5.3.10.3	Detection of radio link failure	34
5.3.11	UE actions upon leaving RRC_CONNECTED	34
5.3.12	UE actions upon PUCCH/SRS release request	34
5.4	Inter-RAT mobility	35
5.5	Measurements	35
5.5.1	Introduction	35
5.5.2	Measurement configuration	36
5.5.2.1	General	36
5.5.2.2	Measurement identity removal	37
5.5.2.3	Measurement identity addition/modification	37
5.5.2.4	Measurement object removal	37
5.5.2.5	Measurement object addition/modification	38
5.5.2.6	Reporting configuration removal	39
5.5.2.7	Reporting configuration addition/modification	39
5.5.2.8	Quantity configuration	40
5.5.2.9	Measurement gap configuration	40
5.5.2.10	Reference signal measurement timing configuration	40
5.5.3	Performing measurements	41
5.5.3.1	General	41
5.5.3.2	Layer 3 filtering	42
5.5.3.3	Derivation of cell measurement results	43
5.5.3.3a	Derivation of layer 3 beam filtered measurement	43
5.5.4	Measurement report triggering	44
5.5.4.1	General	44
5.5.4.2	Event A1 (Serving becomes better than threshold)	45
5.5.4.3	Event A2 (Serving becomes worse than threshold)	46
5.5.4.4	Event A3 (Neighbour becomes offset better than SpCell)	46
5.5.4.5	Event A4 (Neighbour becomes better than threshold)	47
5.5.4.6	Event A5 (SpCell becomes worse than threshold1 and neighbour becomes better than threshold2)	47
5.5.4.7	Event A6 (Neighbour becomes offset better than SCell)	48
5.5.5	Measurement reporting	49
5.5.5.1	General	49
5.5.5.2	Reporting of beam measurement information	51
5.6	UE capabilities	52
5.6.1	UE capability transfer	52
5.6.1.1	General	52
5.6.1.2	Initiation	52
5.6.1.3	Reception of the UECapabilityEnquiry by the UE	52
5.6.1.4	Compilation of band combinations supported by the UE	52
5.6.1.5	Compilation of baseband processing combinations supported by the UE	52
5.7	Other	53
5.7.1	DL information transfer	53
5.7.2	UL information transfer	53
5.7.3	SCG failure information	53
5.7.3.1	General	53
5.7.3.2	Initiation	53
5.7.3.3	Failure type determination	54
5.7.3.4	Setting the contents of MeasResultSCG-Failure	54
6	Protocol data units, formats and parameters (ASN.1)	55
6.1	General	55
6.1.1	Introduction	55
6.1.2	Need codes and conditions for optional downlink fields	55
6.2	RRC messages	56
6.2.1	General message structure	56
–	NR-RRC-Definitions	56
–	BCCH-BCH-Message	56
–	DL-DCCH-Message	57
–	UL-DCCH-Message	57
6.2.2	Message definitions	58
–	MIB	58
–	MeasurementReport	59
–	RRCReconfiguration	60
–	RRCReconfigurationComplete	61
–	SIB1	61
6.3	RRC information elements	63
6.3.0	Parameterized types	63
–	SetupRelease	63
6.3.1	System information blocks	63
6.3.2	Radio resource control information elements	63
–	AdditionalSpectrumEmission	63
–	Alpha	64
–	ARFCN-ValueNR	64
–	BWP	64
–	BWP-Id	67
–	BeamFailureRecoveryConfig	67
–	CellGroupConfig	68
–	CodebookConfig	71
–	ConfiguredGrantConfig	73
–	ControlResourceSet	76
–	ControlResourceSetId	78
–	CrossCarrierSchedulingConfig	78
–	CSI-AperiodicTriggerStateList	79
–	CSI-FrequencyOccupation	80
–	CSI-IM-Resource	81
–	CSI-IM-ResourceId	82
–	CSI-IM-ResourceSet	82
–	CSI-IM-ResourceSetId	82
–	CSI-MeasConfig	83
–	CSI-ReportConfig	84
–	CSI-ReportConfigId	88
–	CSI-ResourceConfig	89
–	CSI-ResourceConfigId	90
–	CSI-ResourcePeriodicityAndOffset	90
–	CSI-RS-ResourceMapping	91
–	CSI-SemiPersistentOnPUSCH-TriggerStateList	92
–	CSI-SSB-ResourceSetId	92
–	CSI-SSB-ResourceSet	92
–	DMRS-DownlinkConfig	93
–	DMRS-UplinkConfig	94
–	DownlinkPreemption	95
–	DRB-Identity	96
–	EUTRA-MBSFN-SubframeConfigList	96
–	FilterCoefficient	97
–	FreqBandIndicatorNR	97
–	FrequencyInfoDL	97
–	FrequencyInfoUL	98
–	GSCN-ValueNR	99
–	Hysteresis	99
-	LogicalChannelConfig	100
–	MAC-CellGroupConfig	101
–	MeasConfig	106
–	MeasGapConfig	108
–	MeasId	108
–	MeasIdToAddModList	109
–	MeasObjectEUTRA	109
–	MeasObjectId	109
–	MeasObjectNR	110
–	MeasObjectToAddModList	117
–	MeasResults	118
–	MeasResultSCG-Failure	120
–	MeasResultCellListSFTD	121
–	MultiFrequencyBandListNR	122
–	NZP-CSI-RS-ResourceSet	122
–	NZP-CSI-RS-ResourceSetId	123
–	NZP-CSI-RS-Resource	123
–	NZP-CSI-RS-ResourceId	124
–	P-Max	124
–	PCI-List	124
–	PCI-Range	125
–	PCI-RangeIndex	125
–	PCI-RangeIndexList	126
–	PDCCH-Config	126
–	PDCCH-ConfigCommon	127
–	PDCP-Config	128
–	PDSCH-Config	131
–	PDSCH-ConfigCommon	133
–	PDSCH-ServingCellConfig	134
–	PDSCH-TimeDomainResourceAllocation	134
–	PhysCellId	135
–	PRB-Id	135
–	PTRS-DownlinkConfig	136
–	PTRS-UplinkConfig	136
–	PUCCH-Config	137
–	PUCCH-ConfigCommon	141
–	PUCCH-PowerControl	142
–	PUCCH-TPC-CommandConfig	143
–	PUSCH-Config	144
–	PUSCH-ConfigCommon	146
–	PUSCH-PowerControl	146
–	PUSCH-ServingCellConfig	149
–	PUSCH-TimeDomainResourceAllocation	149
–	PUSCH-TPC-CommandConfig	150
–	Q-OffsetRange	151
–	QuantityConfig	151
–	RACH-ConfigCommon	152
–	RACH-ConfigGeneric	154
–	RACH-ConfigDedicated	155
–	RadioBearerConfig	156
–	RadioLinkMonitoringConfig	158
–	RateMatchPattern	159
–	RateMatchPatternId	160
–	RateMatchPatternLTE-CRS	160
–	ReportConfigId	161
–	ReportConfigNR	161
–	ReportConfigToAddModList	165
–	ReportInterval	166
–	RLC-Config	166
–	RLF-TimersAndConstants	169
–	RNTI-Value	169
–	RSRP-Range	170
–	RSRQ-Range	170
–	SCellIndex	170
–	SchedulingRequestConfig	171
–	SchedulingRequestResourceConfig	172
–	SchedulingRequestResourceId	173
–	ScramblingId	173
–	SCS-SpecificCarrier	173
–	SDAP-Config	174
–	SearchSpace	175
–	SearchSpaceId	177
–	SecurityAlgorithmConfig	178
–	ServCellIndex	178
–	ServingCellConfig	179
–	ServingCellConfigCommon	181
–	SINR-Range	183
–	SlotFormatCombinationsPerCell	183
–	SlotFormatIndicator	184
–	SPS-Config	185
–	SRB-Identity	186
–	SRS-Config	186
–	SRS-CarrierSwitching	190
–	SSB-Index	191
–	SubcarrierSpacing	192
–	TCI-State	192
–	TCI-StateId	193
–	TDD-UL-DL-Config	193
–	TimeToTrigger	195
–	ZP-CSI-RS-Resource	195
–	ZP-CSI-RS-ResourceSet	196
–	ZP-CSI-RS-ResourceSetId	196
6.3.3	UE capability information elements	197
–	BandCombinationList	197
–	BandCombinationParametersUL-List	198
–	BasebandCombinationParametersUL-List	199
–	BasebandProcessingCombinationMRDC	200
–	CA-BandwidthClassNR	201
–	CA-BandwidthClassEUTRA	201
–	FreqBandIndicatorEUTRA	201
–	FreqBandList	202
–	FreqSeparationClass	202
–	MIMO-Layers	202
–	ModulationOrder	203
–	RAT-Type	203
–	SupportedBasebandProcessingCombination	203
–	UE-CapabilityRAT-ContainerList	205
–	UE-MRDC-Capability	205
–	UE-NR-Capability	207
6.3.4	Other information elements	216
–	RRC-TransactionIdentifier	216
6.4	RRC multiplicity and type constraint values	216
–	Multiplicity and type constraint definitions	216
–	End of NR-RRC-Definitions	220
7	Variables and constants	221
7.1	Timers	221
7.1.1	Timers (Informative)	221
7.1.2	Timer handling	221
7.2	Counters	222
7.3	Constants	222
7.4	UE variables	222
–	NR-UE-Variables	222
–	VarMeasConfig	223
–	VarMeasReportList	223
–	End of NR-UE-Variables	224
8	Protocol data unit abstract syntax	225
8.1	General	225
8.2	Structure of encoded RRC messages	225
8.3	Basic production	225
8.4	Extension	225
8.5	Padding	226
9	Specified and default radio configurations	226
9.1	Specified configurations	226
9.1.1	Logical channel configurations	226
9.1.2	SRB configurations	226
9.1.2.1	SRB1/SRB1S	226
9.1.2.2	SRB2/SRB2S	227
9.1.2.3	SRB3	227
9.2	Default radio configurations	227
9.2.1	SRB configurations	227
9.2.1.1	SRB1/SRB1S	227
9.2.1.2	SRB2/SRB2S	227
9.2.1.3	SRB3	228
10	Generic error handling	228
10.1	General	228
10.2	ASN.1 violation or encoding error	229
10.3	Field set to a not comprehended value	229
10.4	Mandatory field missing	229
10.5	Not comprehended field	230
11	Radio information related interactions between network nodes	231
11.1	General	231
11.2	Inter-node RRC messages	231
11.2.1	General	231
11.2.2	Message definitions	232
–	HandoverCommand	232
–	HandoverPreparationInformation	232
–	CG-Config	234
–	CG-ConfigInfo	236
–	MeasurementTimingConfiguration	239
11.3	Inter-node RRC information element definitions	240
–	CandidateCellInfoList	240
11.4	Inter-node RRC multiplicity and type constraint values	241
–	Multiplicity and type constraints definitions	241
–	End of NR-InterNodeDefinitions	241
12	Processing delay requirements for RRC procedures	243
Annex A (informative):	Guidelines, mainly on use of ASN.1	243
A.1	Introduction	243
A.2	Procedural specification	244
A.2.1	General principles	244
A.2.2	More detailed aspects	244
A.3	PDU specification	244
A.3.1	General principles	244
A.3.1.1	ASN.1 sections	244
A.3.1.2	ASN.1 identifier naming conventions	245
A.3.1.3	Text references using ASN.1 identifiers	247
A.3.2	High-level message structure	248
A.3.3	Message definition	249
A.3.4	Information elements	251
A.3.5	Fields with optional presence	252
A.3.6	Fields with conditional presence	253
A.3.7	Guidelines on use of lists with elements of SEQUENCE type	254
A.3.8	Guidelines on use of parameterised SetupRelease type	254
A.3.9	Guidelines on use of ToAddModList and ToReleaseList	256
A.4	Extension of the PDU specifications	257
A.4.1	General principles to ensure compatibility	257
A.4.2	Critical extension of messages and fields	257
A.4.3	Non-critical extension of messages	260
A.4.3.1	General principles	260
A.4.3.2	Further guidelines	260
A.4.3.3	Typical example of evolution of IE with local extensions	261
A.4.3.4	Typical examples of non critical extension at the end of a message	263
A.4.3.5	Examples of non-critical extensions not placed at the default extension location	263
–	ParentIE-WithEM	263
–	ChildIE1-WithoutEM	264
–	ChildIE2-WithoutEM	265
A.5	Guidelines regarding inclusion of transaction identifiers in RRC messages	266
A.6	Guidelines regarding use of need codes	266
A.7	Guidelines regarding use of conditions	267
Annex B (informative):	Change history	268


Foreword
This Technical Specification has been produced by the 3rd Generation Partnership Project (3GPP).
The contents of the present document are subject to continuing work within the TSG and may change following formal TSG approval. Should the TSG modify the contents of the present document, it will be re-released by the TSG with an identifying change of release date and an increase in version number as follows:
Version x.y.z
where:
x	the first digit:
1	presented to TSG for information;
2	presented to TSG for approval;
3	or greater indicates TSG approved document under change control.
y	the second digit is incremented for all changes of substance, i.e. technical enhancements, corrections, updates, etc.
z	the third digit is incremented when editorial only changes have been incorporated in the document.

1	Scope
The present document specifies the Radio Resource Control protocol for the radio interface between UE and NG-RAN.
The scope of the present document also includes:
-	the radio related information transported in a transparent container between source gNB and target gNB upon inter gNB handover;
-	the radio related information transported in a transparent container between a source or target gNB and another system upon inter RAT handover.
-	the radio related information transported in a transparent container between a source eNB and target gNB during E-UTRA-NR Dual Connectivity.
2	References
The following documents contain provisions which, through reference in this text, constitute provisions of the present document. 
-	References are either specific (identified by date of publication, edition number, version number, etc.) or nonspecific.
-	For a specific reference, subsequent revisions do not apply.
-	For a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.
[1]	3GPP TR 21.905: "Vocabulary for 3GPP Specifications".
[2]	3GPP TS 38.300: "NR; Overall description; Stage 2".
[3]	3GPP TS 38.321: "NR; Medium Access Control (MAC); Protocol specification".
[4]	3GPP TS 38.322: "NR; Radio Link Control (RLC) protocol specification".
[5]	3GPP TS 38.323: "NR; Packet Data Convergence Protocol (PDCP) protocol specification".	
[6]	ITU-T Recommendation X.680 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Specification of basic notation" (Same as the ISO/IEC International Standard 8824-1).
[7]	ITU-T Recommendation X.681 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Information object specification" (Same as the ISO/IEC International Standard 8824-2).
[8]	ITU-T Recommendation X.691 (08/2015) "Information technology - ASN.1 encoding rules: Specification of Packed Encoding Rules (PER)" (Same as the ISO/IEC International Standard 8825-2).
[9]	3GPP TS 38.215: "NR; Physical layer measurements".
[10]	3GPP TS 36.331: "Evolved Universal Terrestrial Radio Access (E-UTRA) Radio Resource Control (RRC); Protocol Specification".
[11]	3GPP TS 33.501: "Security Architecture and Procedures for 5G System".
[12]	3GPP TS 38.104: "NR; Base Station (BS) radio transmission and reception".
[13]	3GPP TS 38.213: "NR; Physical layer procedures for control".
[14]	3GPP TS 38.133: "NR; Requirements for support of radio resource management".
[15]	3GPP TS 38.101: "NR; User Equipment (UE) radio transmission and reception".
[16]	3GPP TS 38.211: "NR; Physical channels and modulation".
[17]	3GPP TS 38.212: "NR; Multiplexing and channel coding".
[18]	ITU-T Recommendation X.683 (08/2015) "Information Technology - Abstract Syntax Notation One (ASN.1): Parameterization of ASN.1 specifications" (Same as the ISO/IEC International Standard 8824-4).
[19]	3GPP TS 38.214: "NR; Physical layer procedures for data".
3	Definitions, symbols and abbreviations
3.1	Definitions
For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].
Field: The individual contents of an information element are referred as fields.
Floor: Mathematical function used to 'round down' i.e. to the nearest integer having a lower or equal value.
Information element: A structural element containing a single or multiple fields is referred as information element.
Primary Cell: The MCG cell, operating on the primary frequency, in which the UE either performs the initial connection establishment procedure or initiates the connection re-establishment procedure.
Primary SCG Cell: For dual connectivity operation, the SCG cell in which the UE performs random access when performing the Reconfiguration with Sync procedure.
RLC bearer configuration: The lower layer part of the radio bearer configuration comprising the RLC and logical channel configurations. 
Secondary Cell: For a UE configured with CA, a cell providing additional radio resources on top of Special Cell.
Secondary Cell Group: For a UE configured with dual connectivity, the subset of serving cells comprising of the PSCell and zero or more secondary cells.
Serving Cell: For a UE in RRC_CONNECTED not configured with CA/DC there is only one serving cell comprising of the primary cell. For a UE in RRC_CONNECTED configured with CA/ DC the term 'serving cells' is used to denote the set of cells comprising of the Special Cell(s) and all secondary cells.
Special Cell: For Dual Connectivity operation the term Special Cell refers to the PCell of the MCG or the PSCell of the SCG, otherwise the term Special Cell refers to the PCell.
SRB1S: The SCG part of MCG split SRB1 for EN-DC.
SRB2S: The SCG part of MCG split SRB2 for EN-DC.
3.2	Abbreviations
For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].
5GC	5G Core Network
ACK	Acknowledgement
AM	Acknowledged Mode
ARQ	Automatic Repeat Request
AS	Access Stratum
ASN.1	Abstract Syntax Notation One
BLER	Block Error Rate
BWP	Bandwidth Part
CA	Carrier Aggregation
CCCH	Common Control Channel
CG	Cell Group
CMAS	Commercial Mobile Alert Service
CP	Control Plane
C-RNTI	Cell RNTI
CSI	Channel State Information
DC	Dual Connectivity
DCCH	Dedicated Control Channel
DCI	Downlink Control Information
DL	Downlink
DL-SCH	Downlink Shared Channel
DRB	(user) Data Radio Bearer
DRX	Discontinuous Reception
DTCH	Dedicated Traffic Channel
EPC	Evolved Packet Core
EPS	Evolved Packet System
ETWS	Earthquake and Tsunami Warning System
E-UTRA	Evolved Universal Terrestrial Radio Access
E-UTRAN	Evolved Universal Terrestrial Radio Access Network
FDD	Frequency Division Duplex
FFS	For Further Study
GERAN	GSM/EDGE Radio Access Network
GNSS	Global Navigation Satellite System
GSM	Global System for Mobile Communications
HARQ	Hybrid Automatic Repeat Request
IE	Information element
IMSI	International Mobile Subscriber Identity
kB	Kilobyte (1000 bytes)
L1	Layer 1
L2	Layer 2
L3	Layer 3
MAC	Medium Access Control
MCG	Master Cell Group
MIB	Master Information Block
N/A	Not Applicable
PCell	Primary Cell
PDCP	Packet Data Convergence Protocol
PDU	Protocol Data Unit
PLMN	Public Land Mobile Network
PSCell	Primary Secondary Cell
QoS	Quality of Service
RAN	Radio Access Network
RAT	Radio Access Technology
RLC	Radio Link Control
RNTI	Radio Network Temporary Identifier
ROHC	RObust Header Compression
RRC	Radio Resource Control
RS	Reference Signal
SCell	Secondary Cell
SCG	Secondary Cell Group
SFN	System Frame Number
SFTD	SFN and Frame Timing Difference
SI	System Information
SIB	System Information Block
SpCell	Special Cell
SRB	Signalling Radio Bearer
SSB	Synchronization Signal Block
TAG	Timing Advance Group
TDD	Time Division Duplex
TM	Transparent Mode
UE	User Equipment
UL	Uplink
UM	Unacknowledged Mode
UP	User Plane
In the ASN.1, lower case may be used for some (parts) of the above abbreviations e.g. c-RNTI.
4	General
4.1	Introduction
This specification is organised as follows:
-	sub-clause 4.2 describes the RRC protocol model;
-	sub-clause 4.3 specifies the services provided to upper layers as well as the services expected from lower layers;
-	sub-clause 4.4 lists the RRC functions;
-	clause 5 specifies RRC procedures, including UE state transitions;
-	clause 6 specifies the RRC messages in ASN.1 and description;
-	clause 7 specifies the variables (including protocol timers and constants) and counters to be used by the UE;
-	clause 8 specifies the encoding of the RRC messages;
-	clause 9 specifies the specified and default radio configurations;
-	clause 10 specifies generic error handling;
-	clause 11 specifies the RRC messages transferred across network nodes;
-	clause 12 specifies the UE capability related constraints and performance requirements.
4.2	Architecture
Editor's note	The state model is still a subject for discussion.FFS
4.2.1	UE states and state transitions including inter RAT
Editor’s Note: For EN_DC, only RRC_CONNECTED is applicable. 
A UE is either in RRC_CONNECTED state or in RRC_INACTIVE state when an RRC connection has been established. If this is not the case, i.e. no RRC connection is established, the UE is in RRC_IDLE state. The RRC states can further be characterised as follows:
-	RRC_IDLE:
-	A UE specific DRX may be configured by upper layers;
-	UE controlled mobility based on network configuration;
-	The UE:
-	Monitors a Paging channel;
-	Performs neighbouring cell measurements and cell (re-)selection;
-	Acquires system information.
-	RRC_INACTIVE:
-	A UE specific DRX may be configured by upper layers or by RRC layer;
-	UE controlled mobility based on network configuration;
- 	The UE stores the AS context;
-	The UE:
-	Monitors a Paging channel;
-	Performs neighbouring cell measurements and cell (re-)selection;
- 	Performs RAN-based notification area updates when moving outside the RAN-based notification area;
Editor’s Note: FFS Whether a RAN-based notification area is always configured or not.
Editor’s Note: FFS UE behavior if it is decided that a RAN-based notification area is not always configured.
-	Acquires system information.
-	RRC_CONNECTED:
-	The UE stores the AS context;
-	Transfer of unicast data to/from UE;
-	At lower layers, the UE may be configured with a UE specific DRX;
-	For UEs supporting CA, use of one or more SCells, aggregated with the SpCell, for increased bandwidth;
-	For UEs supporting DC, use of one SCG, aggregated with the MCG, for increased bandwidth;
-	Network controlled mobility within NR and to/from E-UTRAN;
-	The UE:
-	Monitors a Paging channel;
-	Monitors control channels associated with the shared data channel to determine if data is scheduled for it;
-	Provides channel quality and feedback information;
-	Performs neighbouring cell measurements and measurement reporting;
-	Acquires system information.
Figure 4.2.1-1 illustrates an overview of UE RRC state machine and state transitions in NR. A UE has only one RRC state in NR at one time.

Figure 4.2.1-1:	UE state machine and state transitions in NR
Figure 4.2.1-2 illustrates an overview of UE state machine and state transitions in NR as well as the mobility procedures supported between NR/NGC and E-UTRAN/EPC. 

Figure 4.2.1-2:	UE state machine and state transitions between NR/NGC and E-UTRAN/EPC
The UE state machine, state transition and mobility procedures between NR/NGC and E-UTRA/NGC is FFS.
4.2.2	Signalling radio bearers
4.3	Services
4.3.1	Services provided to upper layers
The RRC protocol offers the following services to upper layers:
-	Broadcast of common control information;
-	Notification of UEs in RRC_IDLE, e.g. about a terminating call [FFS, for ETWS, for CMAS];
-	Transfer of dedicated control information, i.e. information for one specific UE.
4.3.2	Services expected from lower layers
In brief, the following are the main services that RRC expects from lower layers:
-	PDCP: integrity protection, ciphering and in-sequence delivery of information without duplication [FFS if duplication need to be listed];
-	RLC: reliable transfer of information, without introducing duplicates and with support for segmentation.
4.4	Functions
The RRC protocol includes the following main functions:
-	Broadcast of system information:
-	Including NAS common information;
-	Information applicable for UEs in RRC_IDLE and RRC_INACTIVE, e.g. cell (re-)selection parameters, neighbouring cell information and information (also) applicable for UEs in RRC_CONNECTED, e.g. common channel configuration information;
-	[FFS Including ETWS notification, CMAS notification].
-	RRC connection control:
-	Paging;
-	Establishment/modification/suspension/resumption/release of RRC connection, including e.g. assignment/modification of UE identity (C-RNTI), establishment/modification/release of SRBs, access class barring;
Editor’s note: The terminology for establishment/modification/suspension/resumption is FFS.
-	Initial security activation, i.e. initial configuration of AS integrity protection (SRBs) and AS ciphering (SRBs, DRBs);
-	RRC connection mobility including e.g. intra-frequency and inter-frequency handover, associated security handling, i.e. key/algorithm change, specification of RRC context information transferred between network nodes;
-	Establishment/modification/release of RBs carrying user data (DRBs);
-	Radio configuration control including e.g. assignment/modification of ARQ configuration, HARQ configuration, DRX configuration;
-	In case of DC, cell management including e.g. change of PSCell, addition/modification/release of SCG cell(s);
-	In case of CA, cell management including e.g. addition/modification/release of SCell(s);
-	Recovery from radio link failure.
-	Inter-RAT mobility including e.g. security activation, transfer of RRC context information;
-	Measurement configuration and reporting:
-	Establishment/modification/release of measurements (e.g. intra-frequency, inter-frequency and inter- RAT measurements);
-	Setup and release of measurement gaps;
-	Measurement reporting.
-	Other functions including e.g. transfer of dedicated NAS information, transfer of UE radio access capability information [FFS support for RAN sharing (multiple PLMN identities)].
5	Procedures
5.1	General
5.1.1	Introduction
This section covers the general requirements.
5.1.2	General requirements
The UE shall:
1>	process the received messages in order of reception by RRC, i.e. the processing of a message shall be completed before starting the processing of a subsequent message;
NOTE:	Network may initiate a subsequent procedure prior to receiving the UE's response of a previously initiated procedure.
1>	within a sub-clause execute the steps according to the order specified in the procedural description;
1>	consider the term 'radio bearer' (RB) to cover SRBs and DRBs unless explicitly stated otherwise;
1>	set the rrc-TransactionIdentifier in the response message, if included, to the same value as included in the message received from NR that triggered the response message;
1>	upon receiving a choice value set to setup:
2>	apply the corresponding received configuration and start using the associated resources, unless explicitly specified otherwise;
1>	upon receiving a choice value set to release:
2>	clear the corresponding configuration and stop using the associated resources;
1>	in case the size of a list is extended, upon receiving an extension field comprising the entries in addition to the ones carried by the original field (regardless of whether NR signals more entries in total); apply the following generic behaviour unless explicitly stated otherwise:
2>	create a combined list by concatenating the additional entries included in the extension field to the original field while maintaining the order among both the original and the additional entries;
2>	for the combined list, created according to the previous, apply the same behaviour as defined for the original field.
5.2	System information
Editor’s Note: Targeted for completion in June 2018. For EN_DC, only parts related to MIB acquisition, in sub-clauses 5.2.2.3.1 and 5.2.2.4.1, are applicable.
5.2.1	Introduction
System Information (SI) is divided into the MasterInformationBlock (MIB) and a number of SystemInformationBlocks (SIBs) where:
-	the MasterInformationBlock (MIB) is always transmitted on the BCH with a periodicity of 80 ms and repetitions made within 80 ms [38.212, Section 7.1] and it includes parameters that are needed to acquire SystemInformationBlockType1 (SIB1) from the cell;
-	the SystemInformationBlockType1 (SIB1) is transmitted on the DL-SCH with a periodicity of [X] and repetitions made within [X]. SIB1 includes information regarding the availability and scheduling (e.g. periodicity, SI-window size) of other SIBs. It also indicates whether they (i.e. other SIBs) are provided via periodic broadcast basis or only on-demand basis (refer Figure 5.2.2.X.X FFS_Ref). If other SIBs are provided on-demand then SIB1 includes information for the UE to perform SI request;
-	SIBs other than SystemInformationBlockType1 are carried in SystemInformation (SI) messages, which are transmitted on the DL-SCH. Each SI message is transmitted within periodically occurring time domain windows (referred to as SI-windows);
-	For PSCell and SCells, RAN provides the required SI by dedicated signalling. Nevertheless, the UE shall acquire MIB of the PSCell to get SFN timing of the SCG (which may be different from MCG). Upon change of relevant SI for SCell, RAN releases and adds the concerned SCell. For PSCell, SI can only be changed with Reconfiguration with Sync.
Editor’s Note: Reference to RAN1 specification may be used for the MIB/SIB1 periodicities [X].FFS
5.2.2	System information acquisition
5.2.2.1	General UE requirements

Figure 5.2.2.1-1: System information acquisition
The UE applies the SI acquisition procedure to acquire the AS- and NAS information. The procedure applies to UEs in RRC_IDLE, in RRC_INACTIVE and in RRC_CONNECTED.
The UE in RRC_IDLE and RRC_INACTIVE shall ensure having a valid version of (at least) the MasterInformationBlock, SystemInformationBlockType1 as well as SystemInformationBlockTypeX through SystemInformationBlockTypeY (depending on support of the concerned RATs for UE controlled mobility).
The UE in RRC_CONNECTED shall ensure having a valid version of (at least) the MasterInformationBlock, SystemInformationBlockType1 as well as SystemInformationBlockTypeX (depending on support of mobility towards the concerned RATs).
The UE shall store relevant SI acquired from the currently camped/serving cell.  A version of the SI that the UE acquires and stores remains valid only for a certain time. The UE may use such a stored version of the SI e.g. after cell re-selection, upon return from out of coverage or after SI change indication.
Editor’s Note: [FFS_Standalone if the UE is required to store SI other than for the currently camped/serving cell]. 
Editor’s Note: [FFS_Standalone if different versions of SIBs are provided].
Editor’s Note: [FFS_Standalone UE may or shall store several versions of SI].
Editor’s Note: FFS_Standalone To be updated when above is resolved. Another sub-clause under 5.2.2.2 can be considered depending on the resolution of above.
5.2.2.2	SI validity and need to (re)-acquire SI
The UE shall apply the SI acquisition procedure as defined in clause 5.2.2.3 upon cell selection (e.g. upon power on), cell-reselection, return from out of coverage, after reconfiguration with sync completion, after entering RAN from another RAT; whenever the UE does not have a valid version in the stored SI.
Editor’s Note: [FFS_Standalone if upon receiving HO command the SI acquisition depend on stored SI] 
When the UE acquires a MasterInformationBlock or a SystemInformationBlockType1 or a SI message in a currently camped/serving cell as described in clause 5.2.2.3, the UE shall store the acquired SI.
5.2.2.2.1	SI validity
The UE shall:
1>	delete any stored version of SI after [FFS] hours from the moment it was successfully confirmed as valid;
1>	if the UE does not have in the stored SI a valid version for the required SI corresponding to the systemInfoAreaIdentifier and systemInfoValueTag/systemInfoConfigurationIndex of that SI in the currently camped/serving cell:
2> (re)acquire the SI as specified in clause 5.2.2.3.
NOTE:	At the SI acquisition procedure, the UE may assume the acquired SI in the currently camped/serving cell to be valid in other cells than the currently camped/serving cell based on systemInfoAreaIdentifier and systemInfoValueTag/systemInfoConfigurationIndex.
Editor’s Note: [FFS_Standalone terminology to be used is systemInfoValueTag or systemInfoConfigurationIndex]
Editor’s Note: [FFS_Standalone terminology to be used for area ID is systemInfoAreaIdentifier]
Editor’s Note: [FFS_Standalone whether the area ID and valuetag is separately signalled or as a single identifier]
Editor’s Note: [FFS_Standalone whether the area ID is associated to each SIB/SI message or associated to a group of SIBs/SI messages or all SIBs/SI messages]
5.2.2.2.2	SI change indication and PWS notification
A modification period is used, i.e. updated SI is provided in the modification period following the one where SI change indication is transmitted. RAN transmits SI change indication and PWS notification through paging. Repetitions of SI change indication may occur within preceding modification period. 
Editor’s Note	: The above descriptive text can remain in this sub-clause or moved under 5.2.1. FFS_Standalone
If the UE is in RRC_CONNECTED or is configured to use a DRX cycle smaller than the modification period in RRC_IDLE or in RRC_INACTIVE and receives a Paging message:
1>	if the received Paging message includes the etws/cmasNotification;
2> the UE shall immediately re-acquire the SIB1 and apply the SI acquisition procedure as defined in sub-clause [X.X.X.X FFS_Ref];
1> else, if the received Paging message includes the systemInfoModification;
2>	the UE shall apply the SI acquisition procedure as defined in sub-clause [X.X.X.X FFS_Ref] from the start of the next modification period.
NOTE	For PWS notification the SIB1 is re-acquired to know the scheduling information for the PWS messages.
Editor’s Note: [FFS_Standalone if upon receiving a SI change indication the SI acquisition depend on stored SI] 
Editor’s Note: [FFS_Standalone if value tags and area identifier included in paging message to reacquire SIB1]
Editor’s Note: [FFS_Standalone the update mechanism for access control notifications and other non-access control configuration updates]
5.2.2.3	Acquisition of System Information
5.2.2.3.1	Acquisition of MIB and SIB1 
The UE shall:
1>	if the cell is a PSCell:
2>	acquire the MIB, which is scheduled as specified in TS 38.213 [13];
2>	perform the actions specified in section 5.2.2.4.1;
1>	else:
2>	acquire the MIB, which is scheduled as specified in TS 38.213 [13];
2> if the UE is unable to acquire the MIB;
3> follow the actions as specified in clause 5.2.2.5;
2>	else:
3>	perform the actions specified in section 5.2.2.4.1.
2>	acquire the SystemInformationBlockType1 as specified in [X];
2>	if the UE is unable to acquire the SystemInformationBlockType1:
3> follow the actions as specified in clause 5.2.2.5;
2>	else:
3>perform the actions specified in section 5.2.2.4.2.
Editor’s Note: Reference to RAN1 [X] specification may be used for the scheduling of SIB1.FFS_Standalone
5.2.2.3.2	Acquisition of an SI message
When acquiring an SI message, the UE shall:
1>	determine the start of the SI-window for the concerned SI message as follows:
Editor’s Note: [FFS_Standalone the details of the mapping to subframes/slots where the SI messages are scheduled]
Editor’s Note: [FFS_Standalone if there are any exceptions on e.g. subframes where SI messages cannot be transmitted]
Editor’s Note: [FFS_Standalone if the SI-windows of different SI messages do not overlap].
Editor’s Note: [FFS_Standalone if multiple SI messages can be mapped to same SI window]
Editor’s Note: [FFS_Standalone if the length of SI-window is common for all SI messages or if it is configured per SI message]
Editor’s Note: [FFS_Standalone if the UE may accumulate the SI-Message transmissions across several SI-Windows within the Modification Period]
1> if SI message acquisition not triggered due to UE request:
2>	receive DL-SCH using the SI-RNTI from the start of the SI-window and continue until the end of the SI-window whose absolute length in time is given by si-WindowLength, or until the SI message was received;
2>	if the SI message was not received by the end of the SI-window, repeat reception at the next SI-window occasion for the concerned SI message;
1> if SI message acquisition triggered due to UE request:
2> [FFS_Standalone receive DL-SCH using the SI-RNTI from the start of the SI-window and continue until the end of the SI-window whose absolute length in time is given by si-WindowLength, or until the SI message was received];
2>	[FFS_Standalone if the SI message was not received by the end of the SI-window, repeat reception at the next SI-window occasion for the concerned SI message];
Editor’s Note: [FFS_Standalone on the details of from which SI-window the UE shall receive the DL-SCH upon triggering the SI request.
Editor’s Note: [FFS_Standalone on the details of how many SI-windows the UE should monitor for SI message reception if transmission triggered by UE request]
Editor’s Note: [FFS_Standalone if UE need to monitor all the TTIs in SI window for receiving SI message]
1>	store the acquired SI message as specified in clause 5.2.2.2.
Editor’s Note: FFS_Standalone The procedural text for SI message acquisition triggered by UE request will be updated upon finalizing the details.
5.2.2.3.3	Request for on demand system information
When acquiring an SI message, which according to the SystemInformationBlockType1 is indicated to be provided upon UE request, the UE shall:
1>	if in RRC_IDLE or in RRC_INACTIVE:
2>	if the [FFS_Standalone] field is received in SIB1:
3>	the UE shall trigger the lower layer to initiate the preamble transmission procedure in accordance with TS 38.321 [3] using the [indicated PRACH preamble] and [indicated PRACH resource];
3>	if acknowledgement for SI request is received from lower layer;
4>	acquire the requested SI message(s) as defined in sub-clause 5.2.2.3.2;
Editor’s Note: To be updated with details of the Msg1 request procedure.FFS_Standalone
2>	else 
3>	the UE shall trigger the lower layer to initiate the random access procedure in accordance with TS 38.321 [3];
3>	if acknowledgement for SI request is received;
4>	acquire the requested SI message(s) as defined in sub-clause 5.2.2.3.2;
Editor’s Note: To be updated with details of the Msg3 request procedure. FFS_Standalone
1>	else (in RRC_CONNECTED):
2> [details FFS_Standalone].
Editor’s Note: To be updated with details of the on-demand request procedure in RRC_CONNECTED. FFS_Standalone
Editor’s Note: [FFS_Standalone if there is a need for a separate sub-clause to describe case where on demand SI is not successfully received by the UE and where it should initiate a new request]
5.2.2.4	Actions upon receipt of SI message
5.2.2.4.1	Actions upon reception of the MIB
Upon receiving the MIB the UE shall:
1>	store the acquired MIB;
1>	if the UE is in RRC_IDLE or if the UE is in RRC_INACTIVE or if the UE is in RRC_CONNECTED while T311 is running: [FFS]
2> if the cellBarred in the acquired MIB is set to barred;
3>	consider the cell as barred in accordance with TS 38.304 [FFS];
2>	else,
3>	apply the received parameter(s) [FFS] to acquire SIB1.
5.2.2.4.2	Actions upon reception of the SystemInformationBlockType1
Upon receiving the SystemInformationBlockType1 the UE shall:
1>	store the acquired SIB1;
1>	if the UE has a stored valid version of the required SIB(s) associated with the systemInfoAreaIdentifier and systemInfoValueTag/systemInfoConfigurationIndex in the acquired SIB1:
2>	use that stored version of the SIB;
1>	else if the SIB1 message indicates that the SI message(s) is only provided on request:
2>	trigger a request to acquire the SI message(s) (if needed) as defined in sub-clause 5.2.2.3;
1>	else:
2>	acquire the SI message(s) (if needed) as defined in sub-clause 5.2.2.3.2, which are provided according to the schedulingInfoList in the SystemInformationBlockType1.
Editor’s Note: [FFS_Standalone Whether there is an additional indication that an on-demand SI is actually being broadcast at this instant in time]
Editor’s Note: To be updated when content of the SystemInformationBlockType1 has been agreed. FFS_Standalone.
Editor’s Note: To be updated how to capture the UE behaviour when some required SIBs are from broadcast and other required SIBs through SI request.
5.2.2.4.3	Actions upon reception of SystemInformationBlockTypeX
Editor’s Note: To be extended with further sub-clauses as more SIBs are defined. FFS_Standalone
5.2.2.5	Essential system information missing
The UE shall:
1>	if in RRC_IDLE or in RRC_INACTIVE:
2>	if the UE is unable to acquire the MIB; or
2>	if the UE is unable to acquire the SIB1 and UE does not have a stored valid version of SIB1; or
2> [FFS_Standalone if the UE is unable to acquire the [FFS essential SystemInformationBlockTypeX] and UE does not have a stored valid version of SystemInformationBlockTypeX];
3>	consider the cell as barred in accordance with TS 38.304 [X]; and
3>	perform barring as if intraFreqReselection is set to allowed.
Editor’s Note: [FFS_Standalone on details of RRC connection re-establishment procedure and corresponding reading of SI in RRC_CONNECTED].
Editor’s Note: [FFS_Standalone whether all the information needed to access the cell is included in SIB1 or if both SIB1 and SIB2 are essential in NR].
5.3	Connection control
Editor's note:	FFS The structure and content of this subclause is a subject for discussion, e.g. potential merging of connection establishment and re-establishment messages, mobility aspects etc.
5.3.1	Introduction
5.3.2	Paging
Editor’s Note: Targeted for completion in June 2018.
5.3.3	RRC connection establishment
Editor’s Note: Targeted for completion in June 2018.
5.3.4	Initial security activation
Editor’s Note: Targeted for completion in June 2018.
5.3.5	RRC reconfiguration
5.3.5.1	General

Figure 5.3.5.1-1: RRC reconfiguration, successful

Figure 5.3.5.1-2: RRC reconfiguration, failure
The purpose of this procedure is to modify an RRC connection, e.g. to establish/modify/release RBs, to perform reconfiguration with sync, to setup/modify/release measurements, to add/modify/release SCells and cell groups. As part of the procedure, NAS dedicated information may be transferred from the Network to the UE.
In EN-DC, SRB3 can be used to configure measurements, MAC, RLC, PDCP, physical layer and RLF timers and constants.
5.3.5.2	Initiation
The Network may initiate the RRC reconfiguration procedure to a UE in RRC_CONNECTED. The Network applies the procedure as follows:
-	the establishment of RBs (other than SRB1, that is established during RRC connection establishment) is performed only when AS security has been activated;
-	the addition of Secondary Cell Group and SCells is performed only when AS security has been activated;
-	the reconfigurationWithSync is included in secondaryCellGroup only when at least one DRB is setup in SCG.
5.3.5.3	Reception of an RRCReconfiguration by the UE
The UE shall perform the following actions upon reception of the RRCReconfiguration:
1>	if the RRCReconfiguration includes the secondaryCellGroup:
2>	perform the cell group configuration for the SCG according to 5.3.5.5;
1>	if the RRCReconfiguration message contains the radioBearerConfig:
2>	perform the radio bearer configuration according to 5.3.5.6;
1>	if the RRCReconfiguration message includes the measConfig:
2>	perform the measurement configuration procedure as specified in 5.5.2;
1>  if the UE is configured with E-UTRA nr-SecondaryCellGroupConfig (MCG is E-UTRA):
2> if RRCReconfiguration was received via SRB1:
3> construct RRCReconfigurationComplete message and submit it via the EUTRA MCG embedded in E-UTRA RRC message RRCConnectionReconfigurationComplete as specified in TS 36.331 [10];
3> if reconfigurationWithSync was included in spCellConfig of an SCG:
4> initiate the random access procedure on the SpCell, as specified in TS 38.321 [3];
2> else (RRCReconfiguration was received via SRB3):
3> submit the RRCReconfigurationComplete message via SRB3 to lower layers for transmission using the new configuration;
NOTE:	In the case of SRB1, the random access is triggered by RRC layer itself as there is not necessarily other UL transmission. In the case of SRB3, the random access is triggered by the MAC layer due to arrival of RRCReconfigurationComplete.
1>  if MAC of an NR cell group successfully completes a random access procedure triggered above;
2>  stop timer T304 for that cell group;
2>  apply the parts of the CQI reporting configuration, the scheduling request configuration and the sounding RS configuration that do not require the UE to know the SFN of the respective target SpCell, if any;
2>  apply the parts of the measurement and the radio resource configuration that require the UE to know the SFN of the respective target SpCell (e.g. measurement gaps, periodic CQI reporting, scheduling request configuration, sounding RS configuration), if any, upon acquiring the SFN of that target SpCell;
2>  the procedure ends.
5.3.5.4	Secondary cell group release
The UE shall:
1>	as a result of SCG release triggered by E-UTRA:
2> reset SCG MAC, if configured;
2>	for each RLC bearer that is part of the SCG configuration:
3>	perform RLC bearer release procedure as specified in 5.3.5.5.3;
2> release the SCG configuration;
2>	stop timer T310 for the corresponding SpCell, if running;
2>	stop timer T304 for the corresponding SpCell, if running.
NOTE:	Release of cell group means only release of the lower layer configuration of the cell group but the RadioBearerConfig may not be released.
5.3.5.5	Cell Group configuration
5.3.5.5.1	General
The network configures the UE with one Secondary Cell Group (SCG). For EN-DC, the MCG is configured as specified in TS 36.331 [10]. The network provides the configuration parameters for a cell group in the CellGroupConfig IE.
The UE performs the following actions based on a received CellGroupConfig IE:
1>	if the CellGroupConfig contains the spCellConfig with reconfigurationWithSync:
2> perform Reconfiguration with sync according to 5.3.5.5.2;
2> resume all suspended radio bearers and resume SCG transmission for all radio bearers, if suspended;
1>	if the CellGroupConfig contains the rlc-BearerToReleaseList:
2>	perform RLC bearer release as specified in 5.3.5.5.3;
1>	if the CellGroupConfig contains the rlc-BearerToAddModList:
2>	perform the RLC bearer addition/modification as specified in 5.3.5.5.4;
1>	if the CellGroupConfig contains the mac-CellGroupConfig:
2>	configure the MAC entity of this cell group as specified in 5.3.5.5.5;
1>	if the CellGroupConfig contains the sCellToReleaseList:
2>	perform SCell release as specified in 5.3.5.5.8;
1>	if the CellGroupConfig contains the spCellConfig:
2>	configure the SpCell as specified in 5.3.5.5.7;
1>	if the CellGroupConfig contains the sCellToAddModList:
2> perform SCell addition/modification as specified in 5.3.5.5.9.
5.3.5.5.2	Reconfiguration with sync
The UE shall perform the following actions to execute a reconfiguration with sync.
1>	stop timer T310 for the corresponding SpCell, if running;
1>	start timer T304 for the corresponding SpCell with the timer value set to t304, as included in the reconfigurationWithSync;
1>	if the frequencyInfoDL is included:
2>	consider the target SpCell to be one on the frequency indicated by the frequencyInfoDL with a physical cell identity indicated by the physCellId;
1>	else:
2>	consider the target SpCell to be one on the frequency of the source SpCell with a physical cell identity indicated by the physCellId;
1>	start synchronising to the DL of the target SpCell and acquire the MIB of the target SpCell as specified in 5.2.2.3.1;
NOTE:	The UE should perform the reconfiguration with sync as soon as possible following the reception of the RRC message triggering the reconfiguration with sync, which could be before confirming successful reception (HARQ and ARQ) of this message.
1>	reset the MAC entity of this cell group;
1>	consider the SCell(s) of this cell group, if configured, to be in deactivated state;
1>	apply the value of the newUE-Identity as the C-RNTI for this cell group;
Editor’s Note: Verify that this does not configure some common parameters which are later discarded due to e.g. SCell release or due to LCH release. 
1>	configure lower layers in accordance with the received spCellConfigCommon;
1>	consider the initial bandwidth part to be the active bandwidth part where random access is performed;
1>	configure lower layers in accordance with any additional fields, not covered in the previous, if included in the received reconfigurationWithSync.
5.3.5.5.3	RLC bearer release
The UE shall:
1>	for each logicalChannelIdentity value included in the rlc-BearerToReleaseList that is part of the current UE configuration (LCH release); or
1>	for each logicalChannelIdentity value that is to be released as the result of an SCG release according to 5.3.5.4:
2>	release the RLC entity or entities (includes discarding all pending RLC PDUs and RLC SDUs);
2>	release the corresponding logical channel.
5.3.5.5.4	RLC bearer addition/modification
For each RLC-Bearer-Config received in the rlc-BearerToAddModList IE the UE shall:
1>	if the UE’s current configuration contains a RLC bearer with the received logicalChannelIdentity:
2> if reestablishRLC is received:
3> re-establish the RLC entity as specified in TS 38.322 [4];
2>	reconfigure the RLC entity or entities in accordance with the received rlc-Config;
2> reconfigure the logical channel in accordance with the received mac-LogicalChannelConfig;
NOTE:	The network does not re-associate an already configured logical channel with another radio bearer. Hence servedRadioBearer is not present in this case.
1> else (a logical channel with the given logicalChannelIdentity was not configured before):
2> if the logicalChannelIdentity corresponds to an SRB and rlc-Config is not included:
3> establish an RLC entity in accordance with the default configuration defined in 9.2 for the corresponding SRB;
2> else:
3> establish an RLC entity in accordance with the received rlc-Config;
2> if the logicalChannelIdentity corresponds to an SRB and if mac-LogicalChannelConfig is not included:
3> configure this MAC entity with a logical channel in accordance to the default configuration defined in 9.2 for the corresponding SRB;
2>	else:
3> configure this MAC entity with a logical channel in accordance to the received mac-LogicalChannelConfig;
2>	associate this logical channel with the PDCP entity identified by servedRadioBearer.
5.3.5.5.5	MAC entity configuration 
The UE shall:
1>	if SCG MAC is not part of the current UE configuration (i.e. SCG establishment):
2>	create an SCG MAC entity;
1>	reconfigure the MAC main configuration of the cell group in accordance with the received mac-CellGroupConfig other than tag-ToReleaseList and tag-ToAddModList;
1>	if the received mac-CellGroupConfig includes the tag-ToReleaseList:
2>	for each TAG-Id value included in the tag-ToReleaseList that is part of the current UE configuration:
3>	release the TAG indicated by TAG-Id;
1>	if the received mac-CellGroupConfig includes the tag-ToAddModList:
2>	for each tag-Id value included in tag-ToAddModList that is not part of the current UE configuration (TAG addition):
3>	add the TAG, corresponding to the tag-Id, in accordance with the received timeAlignmentTimer;
2>	for each tag-Id value included in tag-ToAddModList that is part of the current UE configuration (TAG modification):
3>	reconfigure the TAG, corresponding to the tag-Id, in accordance with the received timeAlignmentTimer.
5.3.5.5.6	RLF Timers & Constants configuration 
The UE shall:
1>	if the received rlf-TimersAndConstants is set to release:
NOTE:	In EN-DC, rlf-TimersAndConstants cannot be released.
Editor’s Note: Standalone part to be complete by June 2018.
2>	stop timer T310 for this cell group, if running, and 
2>	release the value of timer t310 as well as constants n310 and n310 for this cell group;
1>	else:
2>	reconfigure the value of timers and constants in accordance with received rlf-TimersAndConstants.
5.3.5.5.7	SPCell Configuration
The UE shall:
1>	if the SpCellConfig contains the rlf-TimersAndConstants:
2>	configure the RLF timers and constants for this cell group as specified in 5.3.5.5.6.
1>  if the SpCellConfig contains spCellConfigDedicated:
2> configure the SpCell in accordance with the spCellConfigDedicated.
5.3.5.5.8	SCell Release
The UE shall:
1>	if the release is triggered by reception of the sCellToReleaseList:
2>	for each sCellIndex value included in the sCellToReleaseList:
3>	if the current UE configuration includes an SCell with value sCellIndex:
4>	release the SCell.
5.3.5.5.9	SCell Addition/Modification
The UE shall:
1>	for each sCellIndex value included in the sCellToAddModList that is not part of the current UE configuration (SCell addition):
2>	add the SCell, corresponding to the sCellIndex, in accordance with the sCellConfigCommon and sCellConfigDedicated;
2>	configure lower layers to consider the SCell to be in deactivated state;
Editor’s Note: FFS Check automatic measurement handling for SCells.
2>	for each measId included in the measIdList within VarMeasConfig:
3>	if SCells are not applicable for the associated measurement; and
3>	if the concerned SCell is included in cellsTriggeredList defined within the VarMeasReportList for this measId:
4>	remove the concerned SCell from cellsTriggeredList defined within the VarMeasReportList for this measId;
1>	for each sCellIndex value included in the sCellToAddModList that is part of the current UE configuration (SCell modification):
2>	modify the SCell configuration in accordance with the sCellConfigDedicated.
5.3.5.6	Radio Bearer configuration
5.3.5.6.1	General
The UE shall perform the following actions based on a received RadioBearerConfig IE:
1>	if the RadioBearerConfig includes the srb3-ToRelease and set to true:
2>	perform the SRB release as specified in 5.3.5.6.2;
1>	if the RadioBearerConfig includes the srb-ToAddModList:
2>	perform the SRB addition or reconfiguration as specified in 5.3.5.6.3;
1>	if the RadioBearerConfig includes the drb-ToReleaseList:
2>	perform DRB release as specified in 5.3.5.6.4;
1>	if the RadioBearerConfig includes the drb-ToAddModList:
2>	perform DRB addition or reconfiguration as specified in 5.3.5.6.5.
5.3.5.6.2	SRB release
Editor’s note: FFS / TODO: check handling during full configuration 
The UE shall:
1>	release the PDCP entity of the SRB3.
5.3.5.6.3	SRB addition/modification
The UE shall:
1>	for each srb-Identity value included in the srb-ToAddModList that is not part of the current UE configuration (SRB establishment or reconfiguration from E-UTRA PDCP to NR PDCP):
2>	establish a PDCP entity and configure it with the security algorithms according to securityConfig and apply the keys (KRRCenc and KRRCint) associated with the KeNB/S-KgNB as indicated in keyToUse, if applicable;
2>	if the current UE configuration as configured by E-UTRA in TS 36.331 includes an SRB identified with the same srb-Identity value:
3>	associate the E-UTRA RLC entity and DCCH of this SRB with the NR PDCP entity;
3>	release the E-UTRA PDCP entity of this SRB;
2>	if the pdcp-Config is included:
3>	configure the PDCP entity in accordance with the received pdcp-Config;
2>	else:
3>	configure the PDCP entity in accordance with the default configuration defined in 9.2.1 for the corresponding SRB;
1>	for each srb-Identity value included in the srb-ToAddModList that is part of the current UE configuration:
2>	if reestablishPDCP is set:
3>	configure the PDCP entity to apply the integrity protection algorithm and KRRCint key associated with the KeNB/S-KgNB as indicated in keyToUse , i.e. the integrity protection configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
3>	configure the PDCP entity to apply the ciphering algorithm and KRRCenc key associated with the KeNB/S-KgNB as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent messages received and sent by the UE, including the message used to indicate the successful completion of the procedure;
3>	re-establish the PDCP entity of this SRB as specified in 38.323 [5];
2>	else, if discardOnPDCP is set:
3>	trigger the PDCP entity to perform SDU discard as specified in TS 38.323 [5];
2>	if the pdcp-Config is included:
3>	reconfigure the PDCP entity in accordance with the received pdcp-Config.
5.3.5.6.4	DRB release
Editor’s Note: FFS / TODO: Add handling for the new QoS concept (mapping of flows; configuration of QFI-to-DRB mapping; reflective QoS...) but keep also EPS-Bearer handling for the EN-DC case
The UE shall:
1>	for each drb-Identity value included in the drb-ToReleaseList that is part of the current UE configuration (DRB release), or
1>	for each drb-identity value that is to be released as the result of full configuration option according to 5.3.5.7:
2>	release the PDCP entity;
1> if a new bearer is not added either with NR or E-UTRA  with same eps-BearerIdentity:
2>	if the procedure was triggered due to reconfiguration with sync:
3>	indicate the release of the DRB and the eps-BearerIdentity of the released DRB to upper layers after successful reconfiguration with sync;
2>	else:
3>	indicate the release of the DRB and the eps-BearerIdentity of the released DRB to upper layers immediately.
NOTE 1:	The UE does not consider the message as erroneous if the drb-ToReleaseList includes any drb-Identity value that is not part of the current UE configuration.
NOTE 2:	Whether or not the RLC and MAC entities associated with this PDCP entity are reset or released is determined by the CellGroupConfig.
5.3.5.6.5	DRB addition/modification
The UE shall:
1>	for each drb-Identity value included in the drb-ToAddModList that is not part of the current UE configuration (DRB establishment including the case when full configuration option is used):
2>	establish a PDCP entity and configure it in accordance with the received pdcp-Config;
2>	configure the PDCP entity with the security algorithms according to securityConfig and apply the keys (KUPenc) associated with the KeNB/S-KgNB as indicated in keyToUse;
2>	if the DRB was configured with the same eps-BearerIdentity either by NR or E-UTRA prior to receiving this reconfiguration:
3> associate the established DRB with the corresponding eps-BearerIdentity;
2> else:
3>	indicate the establishment of the DRB(s) and the eps-BearerIdentity of the established DRB(s) to upper layers;
1>	for each drb-Identity value included in the drb-ToAddModList that is part of the current UE configuration:
2>	if reestablishPDCP is set:
3>	configure the PDCP entity of this RadioBearerConfig to apply the ciphering algorithm and KUPenc key associated with the KeNB/S-KgNB as indicated in keyToUse, i.e. the ciphering configuration shall be applied to all subsequent PDCP PDUs received and sent by the UE;
3>	re-establish the PDCP entity of this DRB as specified in 38.323 [5], section 5.1.2;
2>	else, if recoverPDCP is set:
3>	trigger the PDCP entity of this DRB to perform data recovery as specified in 38.323;
2>	if the pdcp-Config is included:
3>	reconfigure the PDCP entity in accordance with the received pdcp-Config.
NOTE 1:	Removal and addition of the same drb-Identity in a single radioResourceConfig is not supported. In case drb-Identity is removed and added due to reconfiguration with sync or re-establishment with the full configuration option, the network can use the same value of drb-Identity.
NOTE 2:	When determining whether a drb-Identity value is part of the current UE configuration, the UE does not distinguish which RadioBearerConfig and DRB-ToAddModList that DRB was originally configured in.  To re-associate a DRB with a different key (KeNB to S-KeNB or vice versa), the network provides the drb-Identity value in the (target) drb-ToAddModList and sets the reestablishPDCP flag. The network does not list the drb-Identity in the (source) drb-ToReleaseList.   
NOTE 3:	When setting the reestablishPDCP flag for a radio bearer, the network ensures that the RLC receiver entities do not deliver old PDCP PDUs to the re-established PDCP entity. It does that e.g. by triggering a reconfiguration with sync of the cell group hosting the old RLC entity or by releasing the old RLC entity.
NOTE 4: 	In this specification, UE configuration refers to the parameters configured by NR RRC unless otherwise stated.
5.3.5.7	Security key update 
Upon reception of sk-Counter as specified in TS 36.331 [10] the UE shall:
1>	update the S-KgNB key based on the KeNB key and using the received sk-Counter value, as specified in TS 33.501 [11];
1>	derive KRRCenc and KUPenc key as specified in TS 33.501 [11];
1>	derive the KRRCint and KUPint key as specified in TS 33.501 [11].
5.3.5.8	Reconfiguration failure
5.3.5.8.1	Integrity check failure
Editor’s Note: Removed "SIB3" from heading so that this sub-section can easily be expanded to stand-alone case (if considered necessary). FFS_Standalone
The UE shall:
1>	upon integrity check failure indication from NR lower layers for SRB3:
2>	initiate the SCG failure information procedure as specified in subclause 5.7.3 to report SRB3 integrity check failure.
5.3.5.8.2	Inability to comply with RRCReconfiguration
The UE shall:
1>	if the UE is operating in EN-DC:
2>	if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over SRB3;
3>	continue using the configuration used prior to the reception of RRCReconfiguration message;
3>	initiate the SCG failure information procedure as specified in subclause 5.7.3 to report SCG reconfiguration error, upon which the connection reconfiguration procedure ends;
2>	else, if the UE is unable to comply with (part of) the configuration included in the RRCReconfiguration message received over MCG SRB1;
3> continue using the configuration used prior to the reception of RRCReconfiguration message;
3>	initiate the connection re-establishment procedure as specified in TS 36.331 [10, 5.3.7], upon which the connection reconfiguration procedure ends.
NOTE 1:	The UE may apply above failure handling also in case the RRCReconfiguration message causes a protocol error for which the generic error handling as defined in 10 specifies that the UE shall ignore the message.
NOTE 2:	If the UE is unable to comply with part of the configuration, it does not apply any part of the configuration, i.e. there is no partial success/failure.
5.3.5.8.3	T304 expiry (Reconfiguration with sync Failure)
The UE shall:
1>	if T304 of a secondary cell group expires:
2>  release rach-ConfigDedicated;
2>	initiate the SCG failure information procedure as specified in subclause 5.7.3 to report SCG reconfiguration with sync failure.
5.3.5.9	Other configuration
Editor’s Note: Targeted for completion in June 2018.
5.3.5.10	EN-DC release
The UE shall:
1>	as a result of EN-DC release triggered by E-UTRA:
2> release SRB3 (configured according to radioBearerConfig), if present;
2>	release measConfig;
2> release the SCG configuration as specified in section 5.3.5.4.
5.3.6	Counter check
FFS
5.3.7	RRC connection re-establishment
Editor’s Note: Targeted for completion in June 2018.
5.3.8	RRC connection release
Editor’s Note: Targeted for completion in June 2018.
5.3.9	RRC connection release requested by upper layers
Editor’s Note: Targeted for completion in June 2018.
5.3.10	Radio link failure related actions
5.3.10.1	Detection of physical layer problems in RRC_CONNECTED
The UE shall:
1>	upon receiving N310 consecutive "out-of-sync" indications for the SpCell from lower layers while T311 is not running:
2>	start timer T310 for the corresponding SpCell.
Editor’s Note: FFS: Under which condition physical layer problems detection is performed, e.g. neither T300, T301, T304 nor T311 is running. It’s subject to the harmonization of the RRC procedures for RRC Connection establishment/resume/re-establishment and RRC connection reconfiguration. 
5.3.10.2	Recovery of physical layer problems
Upon receiving N311 consecutive "in-sync" indications for the SpCell from lower layers while T310 is running, the UE shall:
1>	stop timer T310 for the corresponding SpCell.
NOTE 1:	In this case, the UE maintains the RRC connection without explicit signalling, i.e. the UE maintains the entire radio resource configuration.
NOTE 2:	Periods in time where neither "in-sync" nor "out-of-sync" is reported by layer 1 do not affect the evaluation of the number of consecutive "in-sync" or "out-of-sync" indications.
5.3.10.3	Detection of radio link failure
The UE shall:
1>	upon T310 expiry in PCell; or
1>	upon random access problem indication from MCG MAC while T311 is not running; or
Editor’s Note: FFS: Under which condition physical layer problems detection is performed, e.g. neither T300, T301, T304 nor T311 is running. It’s subject to the harmonization of the RRC procedures for RRC Connection establishment/resume/re-establishment and RRC connection reconfiguration.
1>	upon indication from MCG RLC that the maximum number of retransmissions has been reached:
Editor’s Note: FFS whether maximum ARQ retransmission is only criteria for RLC failure.
2>	consider radio link failure to be detected for the MCG i.e. RLF;
Editor’s Note: FFS Whether indications related to beam failure recovery may affect the declaration of RLF.
Editor’s Note: FFS: How to handle RLC failure in CA duplication for MCG DRB and SRB. 
Editor’s Note: FFS: RLF related measurement reports e.g. VarRLF-Report is supported in NR. 
2>	if AS security has not been activated:
3>	perform the actions upon leaving RRC_CONNECTED as specified in x.x.x FFS_Ref, with release cause 'other';
2>	else:
3>	initiate the connection re-establishment procedure as specified in x.x.x FFS_Ref.
The UE shall:
1>	upon T310 expiry in PSCell; or
1>	upon random access problem indication from SCG MAC; or
1>	upon indication from SCG RLC that the maximum number of retransmissions has been reached:
2>	consider radio link failure to be detected for the SCG i.e. SCG-RLF;
Editor’s Note: FFS: How to handle RLC failure in CA duplication for SCG DRB and SRB. 
2>	initiate the SCG failure information procedure as specified in 5.7.3 to report SCG radio link failure.
5.3.11	UE actions upon leaving RRC_CONNECTED
Editor’s Note: Targeted for completion in June 2018.
5.3.12	UE actions upon PUCCH/SRS release request
Upon receiving a PUCCH release request from lower layers, for all bandwidth parts of an indicated serving cell the UE shall:
1>	release PUCCH-CSI-Resources c1onfigured in CSI-ReportConfig;
1>	release SchedulingRequestResourceConfig instances configured in PUCCH-Config.
Upon receiving an SRS release request from lower layers, for all bandwidth parts of an indicated serving cell the UE shall:
1>	release SRS-Resource instances configured in SRS-Config.
5.4	Inter-RAT mobility
Editor’s Note: Targeted for completion in June 2018.
5.5	Measurements
5.5.1	Introduction
The network may configure an RRC_CONNECTED UE to perform measurements and report them in accordance with the measurement configuration. The measurement configuration is provided by means of dedicated signalling i.e. using the RRCReconfiguration.
The network may configure the UE to perform the following types of measurements:
-	NR measurements;
-	Inter-RAT measurements of E-UTRA frequencies.
The network may configure the UE to report the following measurement information based on SS/PBCH block(s):
-	Measurement results per SS/PBCH block;
-	Measurement results per cell based on SS/PBCH block(s);
-	SS/PBCH block(s) indexes.
The network may configure the UE to report the following measurement information based on CSI-RS resources:
-	Measurement results per CSI-RS resource;
-	Measurement results per cell based on CSI-RS resource(s);
-	CSI-RS resource measurement identifiers.
The measurement configuration includes the following parameters:
1.	Measurement objects: A list of objects on which the UE shall perform the measurements.
-	For intra-frequency and inter-frequency measurements a measurement object is associated to an NR carrier frequency. Associated with this NR carrier frequency, the network may configure a list of cell specific offsets, a list of 'blacklisted' cells and a list of 'whitelisted' cells. Blacklisted cells are not applicable in event evaluation or measurement reporting. Whitelisted cells are the only ones applicable in event evaluation or measurement reporting.
- 	The UE determines which MO corresponds to each serving cell frequency from the frequencyInfoDL in ServingCellConfigCommon within the serving cell configuration.
-	For inter-RAT E-UTRA measurements a measurement object is a single EUTRA carrier frequency. Associated with this E-UTRA carrier frequency, the network can configure a list of cell specific offsets, a list of 'blacklisted' cells and a list of 'whitelisted' cells. Blacklisted cells are not applicable in event evaluation or measurement reporting. Whitelisted cells are the only ones applicable in event evaluation or measurement reporting.
2.	Reporting configurations: A list of reporting configurations where there can be one or multiple reporting configurations per measurement object. Each reporting configuration consists of the following:
-	Reporting criterion: The criterion that triggers the UE to send a measurement report. This can either be periodical or a single event description;.
-	RS type: The RS that the UE uses for beam and cell measurement results (SS/PBCH block or CSI-RS).
-	Reporting format: The quantities per cell and per beam that the UE includes in the measurement report (e.g. RSRP) and other associated information such as the maximum number of cells and the maximum number beams per cell to report.
3.	Measurement identities: A list of measurement identities where each measurement identity links one measurement object with one reporting configuration. By configuring multiple measurement identities, it is possible to link more than one measurement object to the same reporting configuration, as well as to link more than one reporting configuration to the same measurement object. The measurement identity is also included in the measurement report that triggered the reporting, serving as a reference to the network.
4.	Quantity configurations: The quantity configuration defines the measurement filtering configuration used for all event evaluation and related reporting of that measurement type. For NR measurements, the network may configure up to 2 quantity configurations with a reference in the NR measurement object to the configuration that is to be used. In each configuration, different filter coefficients can be configured for different measurement quantities, for different RS types, and for measurements per cell and per beam.
5.	Measurement gaps: Periods that the UE may use to perform measurements, i.e. no (UL, DL) transmissions are scheduled.
A UE in RRC_CONNECTED maintains a measurement object list, a reporting configuration list, and a measurement identities list according to signalling and procedures in this specification. The measurement object list possibly includes NR intra-frequency object(s), NR inter-frequency object(s) and inter-RAT objects. Similarly, the reporting configuration list includes NR and inter-RAT reporting configurations. Any measurement object can be linked to any reporting configuration of the same RAT type. Some reporting configurations may not be linked to a measurement object. Likewise, some measurement objects may not be linked to a reporting configuration.
The measurement procedures distinguish the following types of cells:
1.	The NR serving cell(s) - these are the SpCell and one or more SCells.
2.	Listed cells - these are cells listed within the measurement object(s).
3.	Detected cells - these are cells that are not listed within the measurement object(s) but are detected by the UE on the carrier frequency(ies) indicated by the measurement object(s).
For NR measurement object(s), the UE measures and reports on the serving cell(s), listed cells and/or detected cells.
Whenever the procedural specification, other than contained in sub-clause 5.5.2, refers to a field it concerns a field included in the VarMeasConfig unless explicitly stated otherwise i.e. only the measurement configuration procedure covers the direct UE action related to the received measConfig.
5.5.2	Measurement configuration
5.5.2.1	General
The network applies the procedure as follows:
-	to ensure that, whenever the UE has a measConfig, it includes a measObject for each NR serving frequency.
Editor’s Note: FFS How the procedure is used for CGI reporting.
The UE shall:
1>	if the received measConfig includes the measObjectToRemoveList:
2>	perform the measurement object removal procedure as specified in 5.5.2.4;
1>	if the received measConfig includes the measObjectToAddModList:
2>	perform the measurement object addition/modification procedure as specified in 5.5.2.5;
1>	if the received measConfig includes the reportConfigToRemoveList:
2>	perform the reporting configuration removal procedure as specified in 5.5.2.6;
1>	if the received measConfig includes the reportConfigToAddModList:
2>	perform the reporting configuration addition/modification procedure as specified in 5.5.2.7;
1>	if the received measConfig includes the measIdToRemoveList:
2>	perform the measurement identity removal procedure as specified in 5.5.2.2;
1>	if the received measConfig includes the measIdToAddModList:
2>	perform the measurement identity addition/modification procedure as specified in 5.5.2.3;
1>	if the received measConfig includes the measGapConfig:
2>	perform the measurement gap configuration procedure as specified in 5.5.2.9;
1>	if the received measConfig includes the s-MeasureConfig:
2>	if s-MeasureConfig is set to ssb-RSRP, set parameter ssb-RSRPof s-MeasureConfig within VarMeasConfig to the lowest value of the RSRP ranges indicated by the received value of s-MeasureConfig;
2>	else, set parameter csi-RSRP of s-MeasureConfig within VarMeasConfig to the lowest value of the RSRP ranges indicated by the received value of s-MeasureConfig.
5.5.2.2	Measurement identity removal
The UE shall:
1>	for each measId included in the received measIdToRemoveList that is part of the current UE configuration in VarMeasConfig:
2>	remove the entry with the matching measId from the measIdList within the VarMeasConfig;
2>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
2>	stop the periodical reporting timer if running and reset the associated information (e.g. timeToTrigger) for this measId.
NOTE:	The UE does not consider the message as erroneous if the measIdToRemoveList includes any measId value that is not part of the current UE configuration.
5.5.2.3	Measurement identity addition/modification
The network applies the procedure as follows:
-	configure a measId only if the corresponding measurement object, the corresponding reporting configuration and the corresponding quantity configuration, are configured.
The UE shall:
1>	for each measId included in the received measIdToAddModList:
2>	if an entry with the matching measId exists in the measIdList within the VarMeasConfig:
3>	replace the entry with the value received for this measId;
2>	else:
3>	add a new entry for this measId within the VarMeasConfig;
2>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
2>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId.
5.5.2.4	Measurement object removal
The UE shall:
1>	for each measObjectId included in the received measObjectToRemoveList that is part of measObjectList in VarMeasConfig:
2>	remove the entry with the matching measObjectId from the measObjectList within the VarMeasConfig;
2>	remove all measId associated with this measObjectId from the measIdList within the VarMeasConfig, if any;
2>	if a measId is removed from the measIdList:
3>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
3>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId.
NOTE:	The UE does not consider the message as erroneous if the measObjectToRemoveList includes any measObjectId value that is not part of the current UE configuration.
5.5.2.5	Measurement object addition/modification
The UE shall:
1>	for each measObjectId included in the received measObjectToAddModList:
2>	if an entry with the matching measObjectId exists in the measObjectList within the VarMeasConfig, for this entry:
3>	reconfigure the entry with the value received for this measObject, except for the fields cellsToAddModList, blackCellsToAddModList, whiteCellsToAddModList, cellsToRemoveList,blackCellsToRemoveList, whiteCellsToRemoveList, absThreshSS-BlocksConsolidation,absThreshCSI-RS-Consolidation, nrofSS-BlocksToAverage,nroCSI-RS-ResourcesToAverage;
3>	if the received measObject includes the cellsToRemoveList:
4>	for each physCellId included in the cellsToRemoveList:
5>	remove the entry with the matching physCellId from the cellsToAddModList;
3>	if the received measObject includes the cellsToAddModList:
4>	for each physCellId value included in the cellsToAddModList:
5>	if an entry with the matching physCellId exists in the cellsToAddModList:
6>	replace the entry with the value received for this physCellId;
5>	else:
6>	add a new entry for the received physCellId to the cellsToAddModList;
3>	if the received measObject includes the blackCellsToRemoveList:
4>	for each pci-RangeIndex included in the blackCellsToRemoveList:
5>	remove the entry with the matching pci-RangeIndex from the blackCellsToAddModList;
NOTE:	For each pci-RangeIndex included in the blackCellsToRemoveList that concerns overlapping ranges of cells, a cell is removed from the black list of cells only if all cell indexes containing it are removed.
3>	if the received measObject includes the blackCellsToAddModList:
4>	for each pci-RangeIndex included in the blackCellsToAddModList:
5>	if an entry with the matching pci-RangeIndex is included in the blackCellsToAddModList:
6>	replace the entry with the value received for this pci-RangeIndex;
5>	else:
6>	add a new entry for the received pci-RangeIndex to the blackCellsToAddModList;
3>	if the received measObject includes the whiteCellsToRemoveList:
4>	for each pci-RangeIndex included in the whiteCellsToRemoveList:
5>	remove the entry with the matching pci-RangeIndex from the whiteCellsToAddModList;
3>	if the received measObject includes the whiteCellsToAddModList:
4>	for each pci-RangeIndex included in the whiteCellsToAddModList:
5>	if an entry with the matching pci-RangeIndex is included in the whiteCellsToAddModList:
6>	replace the entry with the value received for this pci-RangeIndex;
5>	else:
6>	add a new entry for the received pci-RangeIndex to the whiteCellsToAddModList;
3>	for each measId associated with this measObjectId in the measIdList within the VarMeasConfig, if any:
4>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
4>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId;
2>	else:
3>	add a new entry for the received measObject to the measObjectList within VarMeasConfig.
5.5.2.6	Reporting configuration removal
The UE shall:
1>	for each reportConfigId included in the received reportConfigToRemoveList that is part of the current UE configuration in VarMeasConfig:
2>	remove the entry with the matching reportConfigId from the reportConfigList within the VarMeasConfig;
2>	remove all measId associated with the reportConfigId from the measIdList within the VarMeasConfig, if any;
2>	if a measId is removed from the measIdList:
3>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
3>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId.
NOTE:	The UE does not consider the message as erroneous if the reportConfigToRemoveList includes any reportConfigId value that is not part of the current UE configuration.
5.5.2.7	Reporting configuration addition/modification
The UE shall:
1>	for each reportConfigId included in the received reportConfigToAddModList:
2>	if an entry with the matching reportConfigId exists in the reportConfigList within the VarMeasConfig, for this entry:
3>	reconfigure the entry with the value received for this reportConfig;
3>	for each measId associated with this reportConfigId included in the measIdList within the VarMeasConfig, if any:
4>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
4>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId;
2>	else:
3>	add a new entry for the received reportConfig to the reportConfigList within the VarMeasConfig.
5.5.2.8	Quantity configuration
The UE shall:
1>	for each RAT for which the received quantityConfig includes parameter(s):
2>	set the corresponding parameter(s) in quantityConfig within VarMeasConfig to the value of the received quantityConfig parameter(s);
1>	for each measId included in the measIdList within VarMeasConfig:
2>	remove the measurement reporting entry for this measId from the VarMeasReportList, if included;
2>	stop the periodical reporting timer and reset the associated information (e.g. timeToTrigger) for this measId.
5.5.2.9	Measurement gap configuration
The UE shall:
1>	if the UE is operating in EN-DC;
2>	if gapFR2 is set to setup:
3>	if an FR2 measurement gap configuration is already setup, release the FR2 measurement gap configuration;
3>	setup the FR2 measurement gap configuration indicated by the measGapConfig in accordance with the received gapOffset, i.e., the first subframe of each gap occurs at an SFN and subframe meeting the following condition (SFN and subframe of SCG cells on FR2):
SFN mod T = FLOOR(gapOffset/10);
subframe = gapOffset mod 10;
with T = MGRP/10 as defined in TS 38.133 [x];
3>	if mgta is configured, apply the specified timing advance to the gap occurences calculated above (i.e. the UE starts the measurement mgta ms before the gap subframe occurences);
2>	else if gapFR2 is set to release:
3>	release the FR2 measurement gap configuration.
5.5.2.10	Reference signal measurement timing configuration
The UE shall setup the first SS/PBCH block measurement timing configuration (SMTC) in accordance with the received periodicityAndOffset parameter (providing Periodicity and Offset value for the following condition) in the smtc1 configuration. The first subframe of each SMTC occasion occurs at an SFN and subframe of the NR SpCell meeting the following condition:
SFN mod T = FLOOR (Offset/10);
subframe = Offset mod 10;
with T = Periodicity/10.
If smtc2 is present, for cells indicated in the pci-List parameter in smtc2 in the same frequency, the UE shall setup an additional SS/PBCH block measurement timing configuration (SMTC) in accordance with the received periodicity parameter in the smtc2 configuration and use the Offset (derived from parameter periodicityAndOffset) and duration parameter from the smtc1 configuration. The first subframe of each SMTC occasion occurs at an SFN and subframe of the NR SpCell meeting the above condition:
On the concerned frequency, the UE shall not consider SS/PBCH block transmission in subframes outside the SMTC occasion for measurements including RRM measurements.
5.5.3	Performing measurements
5.5.3.1	General
An RRC_CONNECTED UE shall derive cell measurement results by measuring one or multiple beams associated per cell as configured by the network, as described in 5.5.3.3. For all cell measurement results in RRC_CONNECTED the UE applies the layer 3 filtering as specified in 5.5.3.2, before using the measured results for evaluation of reporting criteria and measurement reporting. For cell measurements, the network can configure RSRP, RSRQ or SINR as trigger quantity. Reporting quantities can be the same as trigger quantity or combinations of quantities (i.e. RSRP and RSRQ; RSRP and SINR; RSRQ and SINR; RSRP, RSRQ and SINR).
The network may also configure the UE to report measurement information per beam (which can either be measurement results per beam with respective beam identifier(s) or only beam identifier(s)), derived as described in 5.5.3.3a. If beam measurement information is configured to be included in measurement reports, the UE applies the layer 3 beam filtering as specified in 5.5.3.2. On the other hand, the exact layer 1 filtering of beam measurements used to derive cell measurement results is implementation dependent.
The UE shall:
1>	whenever the UE has a measConfig, perform RSRP and RSRQ measurements for each serving cell as follows:
2>	if at least one measId included in the measIdList within VarMeasConfig contains an rsType set to ssb:
3>	if at least one measId included in the measIdList within VarMeasConfig contains a reportQuantityRsIndexes and maxNrofRSIndexesToReport:
4>	derive layer 3 filtered RSRP and RSRQ per beam for the serving cell based on SS/PBCH block, as described in 5.5.3.3a;
3>	derive serving cell measurement results based on SS/PBCH block, as described in 5.5.3.3;
2>	if at least one measId included in the measIdList within VarMeasConfig contains an rsType set to csi-rs:
3>	if at least one measId included in the measIdList within VarMeasConfig contains a reportQuantityRsIndexes and maxNrofRSIndexesToReport:
4>	derive layer 3 filtered RSRP and RSRQ per beam for the serving cell based on CSI-RS, as described in 5.5.3.3a;
3>	derive serving cell measurement results based on CSI-RS, as described in 5.5.3.3;
1>	if at least one measId included in the measIdList within VarMeasConfig contains SINR as trigger quantity and/or reporting quantity:
2>	if the associated reportConfig contains rsType set to ssb:
3>	if the measId contains a reportQuantityRsIndexes and maxNrofRSIndexesToReport:
4>	derive layer 3 filtered SINR per beam for the serving cell based on SS/PBCH block, as described in 5.5.3.3a;
3>	derive serving cell SINR based on SS/PBCH block, as described in 5.5.3.3;
2>	if the associated reportConfig contains rsType set to csi-rs:
3>	if the measId contains a reportQuantityRsIndexes and maxNrofRSIndexesToReport:
4>	derive layer 3 filtered SINR per beam for the serving cell based on CSI-RS, as described in 5.5.3.3a;
3>	derive serving cell SINR based on CSI-RS, as described in 5.5.3.3;
1>	for each measId included in the measIdList within VarMeasConfig:
2>	if the reportType for the associated reportConfig is periodical or eventTriggered:
3>	if a measurement gap configuration is setup, or
3>	if the UE does not require measurement gaps to perform the concerned measurements:
4>	if s-MeasureConfig is not configured, or
4>	if s-MeasureConfig is set to ssb-RSRP and the NR SpCell RSRP based on SS/PBCH block, after layer 3 filtering, is lower than ssb-RSRP,or
4>	if s-MeasureConfig is set to csi-RSRP and the NR SpCell RSRP based on CSI-RS, after layer 3 filtering, is lower than csi-RSRP:
5>	if the measObject is associated to NR and the rsType is set to csi-rs:
6>	if reportQuantityRsIndexes and maxNrofRSIndexesToReport for the associated reportConfig are configured:
7>	derive layer 3 filtered beam measurements only based on CSI-RS for each measurement quantity indicated in reportQuantityRsIndexes, as described in 5.5.3.3a;
6>	derive cell measurement results based on CSI-RS for each trigger quantity and each measurement quantity indicated in reportQuantityCell using parameters from the associated measObject, as described in 5.5.3.3;
5>	if the measObject is associated to NR and the rsType is set to ssb:
6>	if reportQuantityRsIndexes and maxNrofRSIndexesToReport for the associated reportConfig are configured:
7>	derive layer 3 beam measurements only based on SS/PBCH block for each measurement quantity indicated in reportQuantityRsIndexes, as described in 5.5.3.3a;
6>	derive cell measurement results based on SS/PBCH block for each trigger quantity and each measurement quantity indicated in reportQuantityCell using parameters from the associated measObject, as described in 5.5.3.3;
5>	if the measObject is associated to E-UTRA:
6>	perform the corresponding measurements associated to neighbouring cells on the frequencies indicated in the concerned measObject;
2>	perform the evaluation of reporting criteria as specified in 5.5.4.
5.5.3.2	Layer 3 filtering
The UE shall:
1>	for each cell measurement quantity and for each beam measurement quantity that the UE performs measurements according to 5.5.3.1:
2>	filter the measured result, before using for evaluation of reporting criteria or for measurement reporting, by the following formula:
	
	where
Mn is the latest received measurement result from the physical layer;
Fn is the updated filtered measurement result, that is used for evaluation of reporting criteria or for measurement reporting;
Fn-1is the old filtered measurement result, where F0is set to M1 when the first measurement result from the physical layer is received; and
a = 1/2(k/4), where k is the filterCoefficient for the corresponding measurement quantity received by the quantityConfig;
2>	adapt the filter such that the time characteristics of the filter are preserved at different input rates, observing that the filterCoefficient k assumes a sample rate equal to X ms; The value of X is equivalent to one intra-frequency L1 measurement period as defined in 38.331 [14] assuming non-DRX operation, and depends on frequency range.
NOTE 1:	If k is set to 0, no layer 3 filtering is applicable.
NOTE 2:	The filtering is performed in the same domain as used for evaluation of reporting criteria or for measurement reporting, i.e., logarithmic filtering for logarithmic measurements.
NOTE 3:	The filter input rate is implementation dependent, to fulfil the performance requirements set in TS 38.133[14]. For further details about the physical layer measurements, see TS 38.133 [14].
5.5.3.3	Derivation of cell measurement results
The network may configure the UE to derive RSRP, RSRQ and SINR measurement results per cell associated to NR carrier frequencies based on parameters configured in the measObject (e.g. maximum number of beams to be averaged and beam consolidation thresholds) and in the reportConfig (rsType to be measured, SS/PBCH block 	or CSI-RS).
The UE shall:
1>	for each cell measurement quantity to be derived based on SS/PBCH block:
2>	if nrofSS-BlocksToAverage in the associated measObject is not configured; or
2>	if absThreshSS-BlocksConsolidation in the associated measObject is not configured; or
2>	if the highest beam measurement quantity value is below absThreshSS-BlocksConsolidation:
3>	derive each cell measurement quantity based on SS/PBCH block as the highest beam measurement quantity value, where each beam measurement quantity is described in TS 38.215 [9];
2>	else:
3>	derive each cell measurement quantity based on SS/PBCH block as the linear average of the power values of the highest beam measurement quantity values above absThreshSS-BlocksConsolidation where the total number of averaged beams shall not exceed nrofSS-BlocksToAverage;
2>	apply layer 3 cell filtering as described in 5.5.3.2;
1>	for each cell measurement quantity to be derived based on CSI-RS:
2>	consider a CSI-RS resource on the associated frequency to be applicable for deriving cell measurements when the concerned CSI-RS resource is included in the csi-rs-ResourceConfigMobility with the corresponding physCellId and CSI-RS-CellMobility in the associated measObject;
2>	if nrofCSI-RS-ResourcesToAverage in the associated measObject is not configured; or
2>	if absThreshCSI-RS-Consolidation in the associated measObject is not configured; or
2>	if the highest beam measurement quantity value is below absThreshCSI-RS-Consolidation:
3>	derive each cell measurement quantity based on CSI-RS as the highest beam measurement quantity value, where each beam measurement quantity is described in TS 38.215 [9];
2>	else:
3>	derive each cell measurement quantity based on CSI-RS as the linear average of the power values of the highest beam measurement quantity values above absThreshCSI-RS-Consolidation where the total number of averaged beams shall not exceed nroCSI-RS-ResourcesToAverage;
2>	apply layer 3 cell filtering as described in 5.5.3.2.
5.5.3.3a	Derivation of layer 3 beam filtered measurement
The UE shall:
1>	for each layer 3 beam filtered measurement quantity to be derived based on SS/PBCH block;
2>	derive each configured beam measurement quantity based on SS/PBCH block as described in TS 38.215[9], and apply layer 3 beam filtering as described in 5.5.3.2;
1>	for each layer 3 beam filtered measurement quantity to be derived based on CSI-RS;
2>	derive each configured beam measurement quantity based on CSI-RS as described in TS 38.215 [9], and apply layer 3 beam filtering as described in 5.5.3.2.
5.5.4	Measurement report triggering
5.5.4.1	General
If security has been activated successfully, the UE shall:
1>	for each measId included in the measIdList within VarMeasConfig:
2>	if the corresponding reportConfigincludes a reportType set to eventTriggered or periodical;
3>	if the corresponding measObject concerns NR;
4>	if the eventA1 or eventA2 is configured in the corresponding reportConfig:
5>	consider only the serving cell to be applicable;
4>	else:
5>	for events involving a serving cell on one frequency and neighbours on another frequency, consider any serving cell on the other frequency to be a neighbouring cell as well;
5>	if useWhiteCellList is set to TRUE:
6>	consider any neighbouring cell detected on the associated frequency to be applicable when the concerned cell is included in the whiteCellsToAddModList defined within the VarMeasConfig for this measId;
5>	else:
6>	consider any neighbouring cell detected on the associated frequency to be applicable when the concerned cell is not included in the blackCellsToAddModList defined within the VarMeasConfig for this measId;
2>	if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the eventId of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable cells for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig, while the VarMeasReportList does not include a measurement reporting entry for this measId (a first cell triggers the event):
3>	include a measurement reporting entry within the VarMeasReportList for this measId;
3>	set the numberOfReportsSent defined within the VarMeasReportList for this measId to 0;
3>	include the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measId;
3>	initiate the measurement reporting procedure, as specified in 5.5.5;
2>	if the reportType is set to eventTriggered and if the entry condition applicable for this event, i.e. the event corresponding with the eventId of the corresponding reportConfig within VarMeasConfig, is fulfilled for one or more applicable cells not included in the cellsTriggeredList for all measurements after layer 3 filtering taken during timeToTrigger defined for this event within the VarMeasConfig (a subsequent cell triggers the event):
3>	set the numberOfReportsSent defined within the VarMeasReportList for this measId to 0;
3>	include the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measId;
3>	initiate the measurement reporting procedure, as specified in 5.5.5;
2>	if the reportType is set to eventTriggered and if the leaving condition applicable for this event is fulfilled for one or more of the cells included in the cellsTriggeredList defined within the VarMeasReportList for this measId for all measurements after layer 3 filtering taken during timeToTrigger defined within the VarMeasConfig for this event:
3>	remove the concerned cell(s) in the cellsTriggeredList defined within the VarMeasReportList for this measId; 
3>	if reportOnLeave is set to TRUE for the corresponding reporting configuration:
4>	initiate the measurement reporting procedure, as specified in 5.5.5;
3>	if the cellsTriggeredList defined within the VarMeasReportList for this measId is empty:
4>	remove the measurement reporting entry within the VarMeasReportList for this measId;
4>	stop the periodical reporting timer for this measId, if running;
2>	if reportType is set to periodical and if a (first) measurement result is available:
3>	include a measurement reporting entry within the VarMeasReportList for this measId;
3>	set the numberOfReportsSent defined within the VarMeasReportList for this measId to 0;
4>	if the reportAmount exceeds 1:
5>	initiate the measurement reporting procedure,as specified in 5.5.5, immediately after the quantity to be reported becomes available for the NR SpCell;
4>	else (i.e. the reportAmount is equal to 1):
5>	initiate the measurement reportingprocedure, as specified in 5.5.5, immediately after the quantity to be reported becomes available for the NR SpCelland for the strongest cell among the applicable cells;
2>	upon expiry of the periodical reporting timer for this measId:
3>	initiate the measurement reporting procedure, as specified in 5.5.5.
5.5.4.2	Event A1 (Serving becomes better than threshold)
The UE shall:
1>	consider the entering condition for this event to be satisfied when condition A1-1, as specified below, is fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A1-2, as specified below, is fulfilled;
1>	for this measurement, consider the serving cell to be the NR SpCell or the NR SCell that isconfigured on the frequency indicated in the associated measObjectNR.
Inequality A1-1 (Entering condition)

Inequality A1-2 (Leaving condition)

The variables in the formula are defined as follows:
Ms is the measurement result of the serving cell, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e. hysteresisas defined withinreportConfigNRfor this event).
Thresh is the threshold parameter for this event (i.e. a1-Threshold as defined withinreportConfigNRfor this event).
Ms is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Hys is expressed in dB.
Thresh is expressed in the same unit as Ms.
5.5.4.3	Event A2 (Serving becomes worse than threshold)
The UE shall:
1>	consider the entering condition for this event to be satisfied when condition A2-1, as specified below, is fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A2-2, as specified below, is fulfilled;
1>	for this measurement, consider the serving cell to be the NR SpCellor the NR SCell that is configured on the frequency indicated in the associated measObjectNR.
Inequality A2-1 (Entering condition)

Inequality A2-2 (Leaving condition)

The variables in the formula are defined as follows:
Ms is the measurement result of the serving cell, not taking into account any offsets.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNR for this event).
Thresh is the threshold parameter for this event (i.e. a2-Threshold as defined within reportConfigNR for this event).
Ms is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Hys is expressed in dB.
Thresh is expressed in the same unit as Ms.
5.5.4.4	Event A3 (Neighbour becomes offset better than SpCell)
The UE shall:
1>	consider the entering condition for this event to be satisfied when condition A3-1, as specified below, is fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A3-2, as specified below, is fulfilled;
1>	use the PSCell for Mp, Ofp and Ocp.
NOTE	The cell(s) that triggers the event is on the frequency indicated in the associated measObjectNR which may be different from the frequency used by the NR SpCell.
Inequality A3-1 (Entering condition)

Inequality A3-2 (Leaving condition)

The variables in the formula are defined as follows:
Mn is the measurement result of the neighbouring cell, not taking into account any offsets.
Ofn is the frequency specific offset of the frequency of the neighbour cell (i.e. offsetFreq as defined within measObjectNR corresponding to the frequency of the neighbour cell).
Ocn is the cell specific offset of the neighbour cell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the frequency of the neighbour cell), and set to zero if not configured for the neighbour cell.
Mp is the measurement result of the SpCell, not taking into account any offsets.
Ofp is the frequency specific offset of the frequency of the SpCell (i.e. offsetFreq as defined within measObjectNR corresponding to the frequency of the SpCell).
Ocp is the cell specific offset of the SpCell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the frequency of the SpCell), and is set to zero if not configured for the SpCell.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined withinreportConfigNR for this event).
Off is the offset parameter for this event (i.e. a3-Offset as defined withinreportConfigNR for this event).
Mn, Mp are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Ofp, Ocp, Hys, Off are expressed in dB.
5.5.4.5	Event A4 (Neighbour becomes better than threshold)
The UE shall:
1>	consider the entering condition for this event to be satisfied when condition A4-1, as specified below, is fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A4-2, as specified below, is fulfilled.
Inequality A4-1 (Entering condition)

Inequality A4-2 (Leaving condition)

The variables in the formula are defined as follows:
Mn is the measurement result of the neighbouring cell, not taking into account any offsets.
Ofn is the frequency specific offset of the frequency of the neighbour cell (i.e. offsetFreq as defined within measObjectNR corresponding to the frequency of the neighbour cell).
Ocn is the cell specific offset of the neighbour cell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the frequency of the neighbour cell), and set to zero if not configured for the neighbour cell.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNRfor this event).
Thresh is the threshold parameter for this event (i.e. a4-Threshold as defined within reportConfigNRfor this event).
Mn is expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Hys are expressed in dB.
Thresh is expressed in the same unit as Mn.
5.5.4.6	Event A5 (SpCell becomes worse than threshold1 and neighbour becomes better than threshold2)
The UE shall:
1>	consider the entering condition for this event to be satisfied when both condition A5-1 and condition A5-2, as specified below, are fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A5-3 or condition A5-4, i.e. at least one of the two, as specified below, is fulfilled;
1>	use the PSCell for Mp.
NOTE:	The cell(s) that triggers the event is on the frequency indicated in the associated measObjectNR which may be different from the frequency used by the NR SpCell.
Inequality A5-1 (Entering condition 1)

Inequality A5-2 (Entering condition 2)

Inequality A5-3 (Leaving condition 1)

Inequality A5-4 (Leaving condition 2)

The variables in the formula are defined as follows:
Mp is the measurement result of the NR SpCell, not taking into account any offsets.
Mnis the measurement result of the neighbouring cell, not taking into account any offsets.
Ofn is the frequency specific offset of the frequency of the neighbour cell (i.e. offsetFreq as defined within measObjectNR corresponding to the frequency of the neighbour cell).
Ocn is the cell specific offset of the neighbour cell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the frequency of the neighbour cell), and set to zero if not configured for the neighbour cell.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined within reportConfigNRfor this event).
Thresh1 is the threshold parameter for this event (i.e. a5-Threshold1 as defined within reportConfigNR for this event).
Thresh2 is the threshold parameter for this event (i.e. a5-Threshold2 as defined within reportConfigNR for this event).
Mn, Mp are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ofn, Ocn, Hys are expressed in dB.
Thresh1is expressed in the same unit as Mp.
Thresh2 is expressed in the same unit as Mn.
5.5.4.7	Event A6 (Neighbour becomes offset better than SCell)
The UE shall:
1>	consider the entering condition for this event to be satisfied when condition A6-1, as specified below, is fulfilled;
1>	consider the leaving condition for this event to be satisfied when condition A6-2, as specified below, is fulfilled;
1>	for this measurement, consider the (secondary) cell that is configured on the frequency indicated in the associated measObjectNR to be the serving cell.
NOTE:	The neighbour(s) is on the same frequency as the SCell i.e. both are on the frequency indicated in the associated measObjectNR.
Inequality A6-1 (Entering condition)

Inequality A6-2 (Leaving condition)

The variables in the formula are defined as follows:
Mnis the measurement result of the neighbouring cell, not taking into account any offsets. 
Ocn is the cell specific offset of the neighbour cell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the frequency of the neighbour cell), and set to zero if not configured for the neighbour cell.
Msis the measurement result of the serving cell, not taking into account any offsets.
Ocs is the cell specific offset of the serving cell (i.e. cellIndividualOffset as defined within measObjectNR corresponding to the serving frequency), and is set to zero if not configured for the serving cell.
Hys is the hysteresis parameter for this event (i.e. hysteresis as defined withinreportConfigNR for this event).
Off is the offset parameter for this event (i.e. a6-Offset as defined withinreportConfigNR for this event).
Mn, Ms are expressed in dBm in case of RSRP, or in dB in case of RSRQ and RS-SINR.
Ocn, Ocs, Hys, Off are expressed in dB.
5.5.5	Measurement reporting
5.5.5.1	General

Figure 5.5.5.1-1: Measurement reporting
The purpose of this procedure is to transfer measurement results from the UE to the network. The UE shall initiate this procedure only after successful security activation.
For the measId for which the measurement reporting procedure was triggered, the UE shall set the measResults within the MeasurementReport message as follows:
1>	set the measId to the measurement identity that triggered the measurement reporting;
1>	set the measResultServingCell within measResultServingFreqList to include RSRP, RSRQ and the available SINR for each configured serving cell derived based on the rsType indicated in the associated reportConfig;
1>	set the measResultServingCell within measResultServingFreqList to include for each NR serving cell that is configured, if any, the servFreqId;
1>	if the reportConfig associated with the measId that triggered the measurement reporting includes reportQuantityRsIndexes and maxNrofRSIndexesToReport:
2>	for each configured serving cell, include beam measurement information according to the associated reportConfig as described in 5.5.5.2;
1>	if the reportConfig associated with the measId that triggered the measurement reporting includes reportAddNeighMeas:
2>for each serving frequency for which measObjectId is referenced in the measIdList, other than the frequency corresponding with the measId that triggered the measurement reporting:
3>	set the measResultBestNeighCell within measResultServingFreqList to include the physCellId and the available measurement quantities based on the reportQuantityCell and rsType indicated in reportConfig of the non-serving cell on the concerned serving frequency with the highest measured RSRP if RSRP measurement results are available for cells on this frequency, otherwise with the highest measured RSRQ if RSRQ measurement results are available for cells on this frequency, otherwise with the highest measured SINR;
3>	if the reportConfig associated with the measId that triggered the measurement reporting includes reportQuantityRsIndexes and maxNrofRSIndexesToReport:
4>	for each best non-serving cell included in the measurement report:
5>include beam measurement information according to the associated reportConfig as described in 5.5.5.2;
1>	if there is at least one applicable neighbouring cell to report:
2>	set the measResultNeighCells to include the best neighbouring cells up to maxReportCells in accordance with the following:
3>	if the reportType is set to eventTriggered:
4>	include the cells included in the cellsTriggeredList as defined within the VarMeasReportList for this measId;
3>	else:
4>	include the applicable cells for which the new measurement results became available since the last periodical reporting or since the measurement was initiated or reset;
4>	if reportQuantityRsIndexes and maxNrofRSIndexesToReport are configured, include beam measurement information as described in 5.5.5.2;
3>	for each cell that is included in the measResultNeighCells, include the physCellId;
3>	if the reportType is set to eventTriggered:
4>	for each included cell, include the layer 3 filtered measured results in accordance with the reportConfig for this measId, ordered as follows:
5>	if the measObject associated with this measId concerns NR:
6>	if rsType in the associated reportConfig is set to ssb:
7> set resultsSSB-Cell within the measResult to include the SS/PBCH block based quantity(ies) indicated in the reportQuantityCell within the concerned reportConfig, in order of decreasing trigger quantity, i.e. the best cell is included first:
8>	if reportQuantityRsIndexes and maxNrofRSIndexesToReport are configured, include beam measurement information as described in 5.5.5.2;
6>	else if rsType in the associated reportConfig is set to csi-rs:
7> set resultsCSI-RS-Cell within the measResult to include the CSI-RS based quantity(ies) indicated in the reportQuantityCell within the concerned reportConfig, in order of decreasing trigger quantity, i.e. the best cell is included first:
8> if reportQuantityRsIndexes and maxNrofRSIndexesToReport are, include beam measurement information as described in 5.5.5.2;
1>	increment the numberOfReportsSent as defined within the VarMeasReportList for this measId by 1;
1>	stop the periodical reporting timer, if running;
1>	if the numberOfReportsSent as defined within the VarMeasReportList for this measId is less than the reportAmount as defined within the corresponding reportConfig for this measId:
2>	start the periodical reporting timer with the value of reportInterval as defined within the corresponding reportConfig for this measId;
1>	else:
2>	if the reportType is set to periodical:
3>	remove the entry within the VarMeasReportList for this measId;
3>	remove this measId from the measIdList within VarMeasConfig;
1> if the UE is configured with EN-DC:
2>	if SRB3 is configured:
3> submit the MeasurementReport message via SRB3 to lower layers for transmission, upon which the procedure ends;
2>else:
3> submit the MeasurementReport message via the EUTRA MCG embedded in E-UTRA RRC message ULInformationTransferMRDC as specified in TS 36.331 [10].
1>	else:
2>submit the MeasurementReport message to lower layers for transmission, upon which the procedure ends.
5.5.5.2	Reporting of beam measurement information
For beam measurement information to be included in a measurement report the UE shall:
1>	if reportType is set to eventTriggered:
2>	consider the trigger quantity as the sorting quantity;
1>	if reportType is set to periodical:
2> if a single reporting quantity is set to TRUE in reportQuantityRsIndexes;
3> consider the configured single quantity as the sorting quantity;
2> else:
3> if rsrp is set to TRUE; 
4> consider RSRP as the sorting quantity;
3> else:
4> consider RSRQ as the sorting quantity;
1>	set rsIndexResults to include up to maxNrofRsIndexesToReportSS/PBCH block indexes or CSI-RS indexes in order of decreasing sorting quantity as follows:
2>	if the measurement information to be included is based on SS/PBCH block:
3>	include within resultsSSB-Indexes the index associated to the best beam for that SS/PBCH block sorting 	quantity and the remaining beams whose sorting quantity is above absThreshSS-BlocksConsolidation defined in the VarMeasConfig for the corresponding measObject;
3>	if includeBeamMeasurements is configured, include the SS/PBCH based measurement results for the quantities in reportQuantityRsIndexes set to TRUE for each SS/PBCH blockindex;2>	else if the beam measurement information to be included is based on CSI-RS:
3>	include within resultsCSI-RS-Indexes the index associated to the best beam for that CSI-RS sorting quantity and the remaining beams whose sorting quantity is above absThreshCSI-RS-Consolidation defined in the VarMeasConfig for the corresponding measObject;
3>	if includeBeamMeasurementsis configured, include the CSI-RS based measurement results for the quantities in reportQuantityRsIndexes set to TRUE for each CSI-RS index.
5.6	UE capabilities
5.6.1	UE capability transfer
5.6.1.1	General
Editor’s Note: Targeted for completion in June 2018
5.6.1.2	Initiation
Editor’s Note: Targeted for completion in June 2018.
5.6.1.3	Reception of the UECapabilityEnquiry by the UE
Editor’s Note: Targeted for completion in June 2018.
5.6.1.4	Compilation of band combinations supported by the UE
The UE shall:
1>	if includes FreqBandList is received:
2>	compile a list of band combinations, candidate for inclusion in the UECapabilityInformation message,  only consisting of bands included in FreqBandList, and prioritized in the order of FreqBandList, (i.e. first include remaining band combinations containing the first-listed band, then include remaining band combinations containing the second-listed band, and so on);
2>	for each band combination included in the candidate list:
3>	if it is regarded as a fallback band combination with the same capabilities of another band combination included in the list of candidates as specified in TS 38.306 [xx]:
4>	remove the band combination from the list of candidates;
2>	include all band combinations in the candidate list into supportedBandCombination;
1>	else:
2> include all band combinations supported by the UE into supportedBandCombination, excluding fallback band combinations with the same capabilities of another band combination included in the list of band combinations supported by the UE.
5.6.1.5	Compilation of baseband processing combinations supported by the UE
The UE shall:
1>	for each band combination included in supportedBandCombination:
2>	include the baseband processing combination supported for the band combination into supportedBasebandProcessingCombination, unless it is already included;
2>	if there are the fallback baseband processing combinations of this baseband processing combination as specified in TS 38.306 [xx] for which supported baseband capabilities are different from this baseband processing combination:
3>	include only these baseband processing combinations into supportedBasebandProcessingCombination.
5.7	Other
5.7.1	DL information transfer
Editor’s Note: Targeted for completion in June 2018.
5.7.2	UL information transfer
Editor’s Note: Targeted for completion in June 2018.
5.7.3	SCG failure information
5.7.3.1	General

Figure 5.7.3.1-1: SCG failure information
The purpose of this procedure is to inform EUTRAN or NR MN about an SCG failure the UE has experienced i.e. SCG radio link failure, e failure of SCG reconfiguration with sync, SCG configuration failure for RRC message on SRB3, SCG integrity check failure and exceeding the maximum uplink transmission timing difference.
Editor’s Note: SCG failure considers the case of exceeding the maximum uplink transmission timing difference if RAN1 decides that EN-DC supports the synchronised operation case. FFS how to capture
Editor’s Note: FFS whether to include the handling of SCell Failure in CA duplication case in SCGfailureinformation procedure and whether to rename SCGfailureinformation.
5.7.3.2	Initiation
A UE initiates the procedure to report SCG failures when SCG transmission is not suspended and when one of the following conditions is met:
1>	upon detecting radio link failure for the SCG, in accordance with subclause 5.3.10.3;
1>	upon reconfiguration with sync failure of the SCG, in accordance with subclause 5.3.5.9.3;
1>	upon SCG configuration failure, in accordance with subclause 5.3.5.9.2;
1>	upon integrity check failure indication from SCG lower layers, in accordance with subclause 5.3.5.9.1.
Upon initiating the procedure, the UE shall:
1>	suspend SCG transmission for all SRBs and DRBs;
1>	reset SCG-MAC;
1>	stop T304, if running;
1>	if the UE is operating in EN-DC:
2>	initiate transmission of the SCGFailureInformationNR message as specified in TS 36.331 [10, 5.6.13a].
Editor’s Note: The section for transmission of SCGFailureInformation in NR RRC entity for SA is FFS_Standalone.
5.7.3.3	Failure type determination
Editor’s Note: FFS / TODO: Either use this section also for NR-DC or change section title (add "for EN-DC").
The UE shall set the SCG failure type as follows:
1>	if the UE initiates transmission of the SCGFailureInformationNR message to provide SCG radio link failure information:
2>	set the failureType as scg-RadioLinkFailure;
1>	else if the UE initiates transmission of the SCGFailureInformationNR message to provide reconfiguration with sync failure information for an SCG:
2>	set the failureType as scg-ChangeFailure;
Editor’s Note: FFS whether to change scg-ChangeFailure to synchronousReconfigurationFailure-SCG.
1>	else, if the UE initiates transmission of the SCGFailureInformationNR message due to SRB3 IP check failure:
2>	set the failureType as srb3-IntegrityFailure;
1> else, if the UE initiates transmission of the SCGFailureInformationNR message due to Reconfiguration failure of NR RRC reconfiguration message:
2>	set the failureType as scg-reconfigFailure.
Editor’s Note: FFS: whether to include rrc-TransactionIdentifier information.
5.7.3.4	Setting the contents of MeasResultSCG-Failure 
The UE shall set the contents of the MeasResultSCG-Failure as follows:
1>	set the measResultServFreqList to include for each SCG cell that is configured by the SN to be measured, if any, within measResultServingCell the quantities of the concerned SCell based on both SS/PBCH block and CSI-RS, if available, according to performance requirements in [FFS_Ref];
1>	for each SCG serving frequency included in measResultServFreqList include within measResultBestNeighCell the physCellId and the quantities (including both available cell level and beam level measurement results) of the best non-serving cell on the concerned serving frequency, sorting based on SS/PBCH block if available and otherwise CSI-RS, with the highest measured RSRP if RSRP measurement results are available for cells on this frequency, otherwise with the highest measured RSRQ if RSRQ measurement results are available for cells on this frequency, otherwise with the highest measured SINR;
1>	set the measResultNeighCells to include the best measured cells on non-serving NR frequencies, ordered such that the best cell is listed first, and based on measurements collected up to the moment the UE detected the failure, sorting based on SS/PBCH block if available and otherwise CSI-RS, with the highest measured RSRP if RSRP measurement results are available for cells on this frequency, otherwise with the highest measured RSRQ if RSRQ measurement results are available for cells on this frequency, otherwise with the highest measured SINR, and set its fields as follows;
2>	if the UE was configured to perform measurements by the SN for one or more non-serving NR frequencies and measurement results are available, include the measResultListNR;
2>	for each neighbour cell included: 
3>	include the optional fields that are available.
NOTE:	The measured quantities are filtered by the L3 filter as configured in the mobility measurement configuration. The measurements are based on the time domain measurement resource restriction, if configured. Blacklisted cells are not required to be reported.

6	Protocol data units, formats and parameters (ASN.1)
6.1	General
6.1.1	Introduction
The contents of each RRC message is specified in sub-clause 6.2 using ASN.1 to specify the message syntax and using tables when needed to provide further detailed information about the fields specified in the message syntax. The syntax of the information elements that are defined as stand-alone abstract types is further specified in a similar manner in sub-clause 6.3.
6.1.2	Need codes and conditions for optional downlink fields
The need for fields to be present in a message or an abstract type, i.e., the ASN.1 fields that are specified as OPTIONAL in the abstract notation (ASN.1), is specified by means of comment text tags attached to the OPTIONAL statement in the abstract syntax. All comment text tags are available for use in the downlink direction only. The meaning of each tag is specified in table 6.1.2-1.
If conditions are used, a conditional presence table is provided for the message or information element specifying the need of the field for each condition case. The table also specifies whether UE maintains or releases the value in case the field is not present. The conditions clarify what the UE may expect regarding the setting of the message by the network. Violation of conditions is regarded as invalid network behaviour, which the UE is not required to cope with. Hence the general error handling defined in 10.4 does not apply in case a field is absent although it is mandatory according to the CondC or CondM condition.
For guidelines on the use of need codes and conditions, see Annex A.6 and A.7.
Table 6.1.2-1: Meaning of abbreviations used to specify the need for fields to be present
AbbreviationMeaningCondC conditionTagConfiguration condition
Presence of the field is conditional to other configuration settings.CondM conditionTagMessage condition
Presence of the field is conditional to other fields included in the message.Need SSpecified
Used for (configuration) fields, whose field description or procedure specifies the UE behavior performed upon receiving a message with the field absent (and not if field description or procedure specifies the UE behavior when field is not configured).Need MMaintain
Used for (configuration) fields that are stored by the UE i.e. not one-shot. Upon receiving a message with the field absent, the UE maintains the current value.Need NNo action (one-shot configuration that is not maintained)
Used for (configuration) fields that are not stored and whose presence causes a one-time action by the UE. Upon receiving message with the field absent, the UE takes no action.Need RRelease
Used for (configuration) fields that are stored by the UE i.e. not one-shot. Upon receiving a message with the field absent, the UE releases the current value.
6.2	RRC messages
6.2.1	General message structure
–	NR-RRC-Definitions
This ASN.1 segment is the start of the NR RRC PDU definitions.
-- ASN1START
-- TAG-NR-RRC-DEFINITIONS-START

NR-RRC-Definitions DEFINITIONS AUTOMATIC TAGS ::=

BEGIN

-- TAG-NR-RRC-DEFINITIONS-STOP
-- ASN1STOP

–	BCCH-BCH-Message
The BCCH-BCH-Message class is the set of RRC messages that may be sent from the network to the UE via BCH on the BCCH logical channel.
-- ASN1START
-- TAG-BCCH-BCH-MESSAGE-START

BCCH-BCH-Message ::= SEQUENCE {
	message											BCCH-BCH-MessageType
}

BCCH-BCH-MessageType ::= CHOICE {
	mib												MIB,
	messageClassExtension	SEQUENCE {}
}

-- TAG-BCCH-BCH-MESSAGE-STOP
-- ASN1STOP

–	DL-DCCH-Message
The DL-DCCH-Message class is the set of RRC messages that may be sent from the network to the UE on the downlink DCCH logical channel.
-- ASN1START
-- TAG-DL-DCCH-MESSAGE-START

DL-DCCH-Message ::= SEQUENCE {
	message											DL-DCCH-MessageType
}

DL-DCCH-MessageType ::= CHOICE {
	c1						CHOICE {
		rrcReconfiguration							RRCReconfiguration,
		spare15 NULL, spare14 NULL, spare13 NULL,
		spare12 NULL, spare11 NULL, spare10 NULL,
		spare9 NULL, spare8 NULL, spare7 NULL,
		spare6 NULL, spare5 NULL, spare4 NULL,
		spare3 NULL, spare2 NULL, spare1 NULL
	},
	messageClassExtension	SEQUENCE {}
}

-- TAG-DL-DCCH-MESSAGE-STOP
-- ASN1STOP

–	UL-DCCH-Message
The UL-DCCH-Message class is the set of RRC messages that may be sent from the UE to the network on the uplink DCCH logical channel.
-- ASN1START
-- TAG-UL-DCCH-MESSAGE-START

UL-DCCH-Message ::= SEQUENCE {
	message											UL-DCCH-MessageType
}

UL-DCCH-MessageType ::= CHOICE {
	c1						CHOICE {
		measurementReport							MeasurementReport,
		rrcReconfigurationComplete					RRCReconfigurationComplete,
		spare14 NULL, spare13 NULL, spare12 NULL,
		spare11 NULL, spare10 NULL, spare9 NULL,
		spare8 NULL, spare7 NULL, spare6 NULL,
		spare5 NULL, spare4 NULL, spare3 NULL,
		spare2 NULL, spare1 NULL
	},
	messageClassExtension	SEQUENCE {}
}

-- TAG-UL-DCCH-MESSAGE-STOP
-- ASN1STOP

6.2.2	Message definitions
–	MIB
The MIB includes the system information transmitted on BCH.
Signalling radio bearer: N/A
RLC-SAP: TM
Logical channel: BCCH
Direction: Network to UE
MIB
-- ASN1START
-- TAG-MIB-START

MIB ::= SEQUENCE {
	-- The 6 most significant bit (MSB) of the 10 bit System Frame Number. The 4 LSB of the SFN are conveyed in the PBCH transport block 
	-- as well but outside the MIB. 
	systemFrameNumber					BIT STRING (SIZE (6)),

	-- Subcarrier spacing for SIB1, Msg.2/4 for initial access and broadcast SI-messages.
	-- If the UE acquires this MIB on a carrier frequency <6GHz, the values 15 and 30 kHz are applicable. 
	-- If the UE acquires this MIB on a carrier frequency >6GHz, the values 60 and 120 kHz are applicable. 
	subCarrierSpacingCommon				ENUMERATED {scs15or60, scs30or120},

	-- The frequency domain offset between SSB and the overall resource block grid in number of subcarriers. (See 38.211, section 7.4.3.1)
	-- Note: For frequencies <6 GHz a fith, this field may comprise only the 4 least significant bits of the ssb-SubcarrierOffset.
	-- The codepoint "FFS_RAN1" indicates that this cell does not provide SIB1 and that there is hence no common CORESET.
	ssb-SubcarrierOffset				INTEGER (0..15),

	-- Position of (first) DL DM-RS. Corresponds to L1 parameter 'DL-DMRS-typeA-pos' (see 38.211, section 7.4.1.1.1)
	dmrs-TypeA-Position					ENUMERATED {pos2, pos3},

	-- Determines a bandwidth for PDCCH/SIB, a common ControlResourceSet (CORESET) a common search space and necessary PDCCH parameters.
	-- Corresponds to L1 parameter 'RMSI-PDCCH-Config' (see FFS_Specification, section FFS_Section)
	pdcch-ConfigSIB1					INTEGER (0..255), 

	-- Indicates that UE shall not camp on this cell
	cellBarred							ENUMERATED {barred, notBarred}, 
	
	-- Controls cell reselection to intra-frequency cells when the highest ranked cell is barred, or treated as barred by the UE, 
	-- as specified in TS 38.304.
	intraFreqReselection				ENUMERATED {allowed, notAllowed},
	spare								BIT STRING (SIZE (1))
}

-- TAG-MIB-STOP
-- ASN1STOP

–	MeasurementReport
The MeasurementReport message is used for the indication of measurement results.
Signalling radio bearer: SRB1, SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
MeasurementReport message
-- ASN1START
-- TAG-MEASUREMENTREPORT-START

MeasurementReport ::=				SEQUENCE {
	criticalExtensions					CHOICE {
		measurementReport							MeasurementReport-IEs,
		criticalExtensionsFuture					SEQUENCE {}
	}
}

MeasurementReport-IEs ::=		SEQUENCE {
	measResults						MeasResults,

	lateNonCriticalExtension				OCTET STRING															OPTIONAL,
	nonCriticalExtension					SEQUENCE{}																OPTIONAL
}

-- TAG-MEASUREMENTREPORT-STOP
-- ASN1STOP

–	RRCReconfiguration
The RRCReconfiguration message is the command to modify an RRC connection. It may convey information for measurement configuration, mobility control, radio resource configuration (including RBs, MAC main configuration and physical channel configuration) including and security configuration.
Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: Network to UE
RRCReconfiguration message
-- ASN1START
-- TAG-RRCRECONFIGURATION-START

RRCReconfiguration ::= 				SEQUENCE {
	rrc-TransactionIdentifier			RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		rrcReconfiguration					RRCReconfiguration-IEs,
		criticalExtensionsFuture			SEQUENCE {}
	}
}

RRCReconfiguration-IEs ::= 			SEQUENCE {
	-- Configuration of Radio Bearers (DRBs, SRBs) including SDAP/PDCP. 
    -- In EN-DC this field may only be present if the RRCReconfiguration
	-- is transmitted over SRB3. 
	radioBearerConfig						RadioBearerConfig 														OPTIONAL, -- Need M

	-- Configuration of secondary cell group (EN-DC):
	secondaryCellGroup						OCTET STRING (CONTAINING CellGroupConfig)								OPTIONAL, -- Need M

	measConfig								MeasConfig																OPTIONAL, -- Need M

	lateNonCriticalExtension				OCTET STRING															OPTIONAL,
	nonCriticalExtension					SEQUENCE {}																OPTIONAL 
}

-- TAG-RRCRECONFIGURATION-STOP
-- ASN1STOP

–	RRCReconfigurationComplete
The RRCReconfigurationComplete message is used to confirm the successful completion of an RRC connection reconfiguration.
Signalling radio bearer: SRB1 or SRB3
RLC-SAP: AM
Logical channel: DCCH
Direction: UE to Network
RRCReconfigurationComplete message
-- ASN1START
-- TAG-RRCRECONFIGURATIONCOMPLETE-START

RRCReconfigurationComplete ::= 			SEQUENCE {
	rrc-TransactionIdentifier				RRC-TransactionIdentifier,
	criticalExtensions						CHOICE {
		rrcReconfigurationComplete				RRCReconfigurationComplete-IEs,
		criticalExtensionsFuture				SEQUENCE {}
	}
}

RRCReconfigurationComplete-IEs ::= SEQUENCE {
	lateNonCriticalExtension				OCTET STRING															OPTIONAL,
	nonCriticalExtension					SEQUENCE {}																OPTIONAL 
}

-- TAG-RRCRECONFIGURATIONCOMPLETE-STOP
-- ASN1STOP

–	SIB1
Editor’s Note: Targeted for completion in June 2018. Not used in EN-DC.
SIB1 contains information relevant when evaluating if a UE is allowed to access a cell and defines the scheduling of other system information. It also contains radio resource configuration information that is common for all UEs.
Signalling radio bearer: N/A
RLC-SAP: TM
Logical channels: BCCH and BR-BCCH
Direction: Network to UE
SIB1 message
-- ASN1START
-- TAG-SIB1-START

SIB1 ::=		SEQUENCE {

	-- FFS / TODO: Add other parameters. 

	-- Frequency offset for the SSB of -5kHz (M=-1) or +5kHz (M=1). When the field is absent, the UE applies no offset (M=0).
	-- The offset is only applicable for the frequency range 0-2.65GHz. Corresponds to parameter 'M' (see 38.101, section FFS_Section)
	frequencyOffsetSSB				ENUMERATED {khz-5, khz5}																OPTIONAL,	-- Need R

	-- Time domain positions of the transmitted SS-blocks in an SS-Burst-Set (see 38.213, section 4.1)
	ssb-PositionsInBurst				SEQUENCE {
		-- Indicates the presence of the up to 8 SSBs in one group
		inOneGroup							BIT STRING (SIZE (8)),
		-- For above 6 GHz: indicates which groups of SSBs is present
		groupPresence						BIT STRING (SIZE (8))										OPTIONAL -- Cond above6GHzOnly
	},

	-- The SSB periodicity in msec for the rate matching purpose (see 38.211, section [7.4.3.1])
	ssb-PeriodicityServingCell			ENUMERATED {ms5, ms10, ms20, ms40, ms80, ms160, spare1, spare2},

	-- TX power that the NW used for SSB transmission. The UE uses it to estimate the RA preamble TX power. 
	-- (see 38.213, section 7.4)
	ss-PBCH-BlockPower					INTEGER (-60..50),

	uplinkConfigCommon						UplinkConfigCommon											OPTIONAL,
	-- FFS: How to indicate the FrequencyInfoUL for the SUL
	supplementaryUplink					SEQUENCE {
		uplinkConfigCommon					UplinkConfigCommon											OPTIONAL 
		-- FFS: Add additional (selection) criteria determining when/whether the UE shall use the SUL frequency 
	}																									OPTIONAL, -- Cond SUL

	tdd-UL-DL-Configuration				TDD-UL-DL-ConfigCommon											OPTIONAL, -- Cond TDD
	tdd-UL-DL-configurationCommon2		TDD-UL-DL-ConfigCommon											OPTIONAL, -- Cond TDD

	pdcch-ConfigCommon					PDCCH-ConfigCommon												OPTIONAL,
	pucch-ConfigCommon					PUCCH-ConfigCommon												OPTIONAL,

	lateNonCriticalExtension				OCTET STRING															OPTIONAL,
	nonCriticalExtension					SEQUENCE{}																OPTIONAL 
}

-- TAG-SIB1-STOP
-- ASN1STOP

6.3	RRC information elements
6.3.0	Parameterized types
–	SetupRelease
SetupRelease allows the ElementTypeParam to be used as the referenced data type for the setup and release entries. See A.3.8 for guidelines.
-- ASN1START
-- TAG-SETUP-RELEASE-START

SetupRelease { ElementTypeParam } ::= CHOICE {
	release			NULL,
	setup			ElementTypeParam
}

-- TAG-SETUP-RELEASE-STOP
-- ASN1STOP

6.3.1	System information blocks
6.3.2	Radio resource control information elements
–	AdditionalSpectrumEmission
The IE AdditionalSpectrumEmission is used to indicate emission requirements to be fulfilled by the UE (see 38.101, section FFS_Section)
AdditionalSpectrumEmission information element
-- ASN1START
-- TAG-ADDITIONALSPECTRUMEMISSION-START

AdditionalSpectrumEmission ::=				INTEGER (0..7)

-- TAG-ADDITIONALSPECTRUMEMISSION-STOP
-- ASN1STOP

–	Alpha
The IE Alpha defines possible values for uplink power control.
-- ASN1START
-- TAG-ALPHA-START

Alpha ::=						ENUMERATED {alpha0, alpha04, alpha05, alpha06, alpha07, alpha08, alpha09, alpha1}

-- TAG-ALPHA-STOP
-- ASN1STOP

–	ARFCN-ValueNR
The IE ARFCN-ValueNR is used to indicate the ARFCN applicable for a downlink, uplink or bi-directional (TDD) NR global frequency raster, as defined in TS 38.101-2 [15].
-- ASN1START
-- TAG-ARFCN-VALUE-NR-START

ARFCN-ValueNR ::=				INTEGER (0..3279165)

-- TAG-ARFCN-VALUE-NR-STOP
-- ASN1STOP

–	BWP
The BWP IE is used to configure a bandwidth part as defined in 38.211, section 4.2.2. 
For each serving cell the network configures at least an initial bandwidth part comprising of at least a downlink bandwidth part and one (if the serving cell is configured with an uplink) or two (if using supplementary uplink (SUL)) uplink bandwidth parts. Furthermore, the network may configure additional uplink and downlink bandwidth parts for a serving cell.
The bandwidth part configuration is split into uplink and downlink parameters and into common and dedicated parameters. Common parameters (in BWP-UplinkCommon and BWP-DownlinkCommon) are ”cell specific” and the network ensures the necessary alignment with corresponding parameters of other UEs. The common parameters of the initial bandwidth part of the PCell are also provided via system information. For all other serving cells, the network provides the common parameters via dedicated signalling.
BWP information element
-- ASN1START
-- TAG-BANDWIDTH-PART-START


-- Generic parameters used in Uplink- and Downlink bandwidth parts
BWP ::= 					SEQUENCE {
	-- Frequency domain location and bandwidth of this bandwidth part defined commonly in a table (FFS_Section). The location is given as 
	-- distance (in number of PRBs) to point A (absoluteFrequencyPointA in FrequencyInfoDL). 
	-- Corresponds to L1 parameter 'DL-BWP-loc'. (see 38.211, section FFS_Section).		
	-- In case of TDD, a BWP-pair (UL BWP and DL BWP with the same bwp-Id) must have the same location (see 38.211, section REF)
	locationAndBandwidth			INTEGER (0..37949),
	-- Subcarrier spacing to be used in this BWP for all channels and 
	-- reference signals unless explicitly configured elsewhere.
	-- Corresponds to subcarrier spacing according to 38.211, Table 4.2-1. 
	-- The value kHz15 corresponds to µ=0, kHz30 to µ=1, and so on. Only the values 15 or 30 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are 
	-- applicable.
	subcarrierSpacing				SubcarrierSpacing,
	-- Indicates whether to use the extended cyclic prefix for this bandwidth part. If not set, the UE uses the normal cyclic prefix. 
	-- Normal CP is supported for all numerologies and slot formats. Extended CP is supported only for 60 kHz subcarrier spacing. 
	-- (see 38.211, section 4.2.2)
	cyclicPrefix					ENUMERATED { extended }														OPTIONAL	-- Need R
}

BWP-Uplink ::= 			SEQUENCE {
	-- An identifier for this bandwidth part. Other parts of the RRC configuration use the BWP-Id to associate themselves with a particular
	-- bandwidth part. The BWP ID=0 is always associated with the initial BWP and may hence not be used here (in other bandwidth parts).
	-- The NW may trigger the UE to swtich UL or DL BWP using a DCI field. The four code points in that DCI field map to the RRC-configured 
	-- BWP-ID as follows: For up to 3 configured BWPs (in addition to the initial BWP) the DCI code point is equivalent to the BWP ID 
	-- (initial = 0, first dedicated = 1, ...). If the NW configures 4 dedicated bandwidth parts, they are identified by DCI code 
	-- points 0 to 3. In this case it is not possible to switch to the initial BWP using the DCI field.
	-- Corresponds to L1 parameter 'UL-BWP-index'. (see 38.211, 38.213, section 12)
	bwp-Id								BWP-Id,
	bwp-Common							BWP-UplinkCommon														OPTIONAL,	-- Need M
	bwp-Dedicated						BWP-UplinkDedicated														OPTIONAL,	-- Need M
	...
}

BWP-UplinkCommon ::=				SEQUENCE {
	genericParameters					BWP,
	-- Configuration of cell specific random access parameters which the UE uses for contention based and contention free random access
	-- as well as for contention based beam failure recovery. 
	rach-ConfigCommon					SetupRelease { RACH-ConfigCommon }										OPTIONAL, 	-- Need M
	-- Cell specific parameters for the PUSCH
	pusch-ConfigCommon					SetupRelease { PUSCH-ConfigCommon }										OPTIONAL, 	-- Need M
	
	-- Cell specific parameters for the PUCCH
	pucch-ConfigCommon					SetupRelease { PUCCH-ConfigCommon }										OPTIONAL, 	-- Need M
	...
}

BWP-UplinkDedicated ::= 	SEQUENCE {
	-- PUCCH configuration for one BWP of the regular UL or SUL of a serving cell. If the UE is configured with SUL, the network 
	-- configures PUCCH only on the BWPs of one of the uplinks (UL or SUL).
	pucch-Config						SetupRelease { PUCCH-Config }											OPTIONAL, 	-- Need M
	-- PUSCH configuration for one BWP of the regular UL or SUL of a serving cell. If the UE is configured with SUL and
	-- if it has a PUSCH-Config for both UL and SUL, a carrier indicator field in DCI indicates for which of the two to use an UL grant.
	-- See also L1 parameter 'dynamicPUSCHSUL' (see 38.213, section FFS_Section)
	pusch-Config						SetupRelease { PUSCH-Config }											OPTIONAL, 	-- Need M
	-- A Configured-Grant of typ1 or type2. It may be configured for Ul or SUL but in case of type1 [FFS also type2] not for both at a time.
	configuredGrantConfig				SetupRelease { ConfiguredGrantConfig }									OPTIONAL, 	-- Need M
	-- Uplink sounding reference signal configuration
	srs-Config							SetupRelease { SRS-Config }												OPTIONAL, 	-- Need M
	-- Determines how the UE performs Beam Failure Recovery upon detection of a Beam Failure (see RadioLinkMonitoringConfig)
	beamFailureRecoveryConfig			SetupRelease { BeamFailureRecoveryConfig }								OPTIONAL,	-- Need M
	...
}


BWP-Downlink ::= 					SEQUENCE {
	-- An identifier for this bandwidth part. Other parts of the RRC configuration use the BWP-Id to associate themselves with a particular
	-- bandwidth part. The BWP ID=0 is always associated with the initial BWP and may hence not be used here. (in other bandwidth parts).
	-- The NW may trigger the UE to swtich UL or DL BWP using a DCI field. The four code points in that DCI field map to the RRC-configured 
	-- BWP-ID as follows: For up to 3 configured BWPs (in addition to the initial BWP) the DCI code point is equivalent to the BWP ID 
	-- (initial = 0, first dedicated = 1, ...). If the NW configures 4 dedicated bandwidth parts, they are identified by DCI code 
	-- points 0 to 3. In this case it is not possible to switch to the initial BWP using the DCI field.
	-- Corresponds to L1 parameter 'DL-BWP-index'. (see 38.211, 38.213, section 12)
	bwp-Id								BWP-Id,
	bwp-Common							BWP-DownlinkCommon														OPTIONAL,	-- Need M
	bwp-Dedicated						BWP-DownlinkDedicated													OPTIONAL,	-- Need M
	...
}


BWP-DownlinkCommon ::=				SEQUENCE {
	genericParameters					BWP,
	pdcch-ConfigCommon					SetupRelease { PDCCH-ConfigCommon }										OPTIONAL,	-- Need M
	pdsch-ConfigCommon					SetupRelease { PDSCH-ConfigCommon }										OPTIONAL,	-- Need M
	...
}

BWP-DownlinkDedicated ::= 			SEQUENCE {
	pdcch-Config						SetupRelease { PDCCH-Config }											OPTIONAL,	-- Need M
	pdsch-Config						SetupRelease { PDSCH-Config }											OPTIONAL,	-- Need M 
	sps-Config							SetupRelease { SPS-Config }												OPTIONAL, 	-- Need M
	radioLinkMonitoringConfig			SetupRelease { RadioLinkMonitoringConfig }								OPTIONAL,	-- Need M
	...
}


-- TAG-BANDWIDTH-PART-STOP 
-- ASN1STOP

–	BWP-Id
The IE BWP-Id is used to refer to Bandwidth Parts (BWP). The initial BWP is referred to by BWP-Id 0. The other BWPs are referred to by BWP-Id 1 to maxNrofBWPs.
BWP-Id information element
-- ASN1START
-- TAG-BWP-ID-START

BWP-Id ::=							INTEGER (0..maxNrofBWPs)

-- TAG-BWP-ID-STOP
-- ASN1STOP

–	BeamFailureRecoveryConfig
The BeamFailureRecoveryConfig IE is used to configure the UE with RACH resources and candidate beams for beam failure recovery in case of beam failure detection. See also 38.321, section 5.1.1.
BeamFailureRecoveryConfig information element
-- ASN1START
-- TAG-BEAM-FAILURE-RECOVERY-CONFIG-START

BeamFailureRecoveryConfig ::= 		SEQUENCE {
	rootSequenceIndex-BFR				INTEGER (0..137)															OPTIONAL,	--	Need M
	-- Configuration of contention free random access occasions for BFR
	rach-ConfigBFR						RACH-ConfigGeneric															OPTIONAL,	--	Need M
	-- L1-RSRP threshold used for determining whether a candidate beam may be used by the UE to attempt contention free 
	-- Random Access to recover from beam failure. The signalled threshold is applied directly for SSB, a threshold for 
	-- CSI-RS is determined by linearly scaling singalled value based on Pc_ss corresponding to the CSI-RS resource.
	-- (see FFS_Specification, FFS_Section)
	candidateBeamThreshold		RSRP-Range																			OPTIONAL,	--	Need M
	-- A list of reference signals (CSI-RS and/or SSB) identifying the candidate beams for recover and the associated RA parameters
	candidateBeamRSList					SEQUENCE (SIZE(1..maxNrofCandidateBeams)) OF PRACH-ResourceDedicatedBFR		OPTIONAL,	--	Need M
	-- Explicitly signalled PRACH Mask Index for RA Resource selection in TS 36.321. The mask is valid for all SSB resources
	ra-ssb-OccasionMaskIndex			INTEGER (0..15)																OPTIONAL, 	--	Need M
	-- Control Resource Set that the UE uses to receive the random access response for beam failure recovery. 
	-- If the field is absent the UE uses the initial CORESET (ControlResourceSetId = 0)
	recoveryControlResourceSetId		ControlResourceSetId														OPTIONAL	,	-- Need S
	-- Search space to use for BFR RAR. If the field is absent, the UE uses the initial Serach Space (SearchSpaceId = 0).
	recoverySearchSpaceId				SearchSpaceId																OPTIONAL,	-- Need S
	...
}

PRACH-ResourceDedicatedBFR ::= 		CHOICE {
	ssb									BFR-SSB-Resource,
	csi-RS								BFR-CSIRS-Resource
}

BFR-SSB-Resource ::= 			SEQUENCE {
	-- The ID of an SSB transmitted by this serving cell. It determines a candidate beam for beam failure recovery (BFR)
	ssb								SSB-Index,
	-- The preamble index that the UE shall use when performing BFR upon selecting the candidate beams identified by this SSB.
	ra-PreambleIndex				INTEGER (0..63),
	...
}

BFR-CSIRS-Resource ::=			SEQUENCE {
	-- The ID of a NZP-CSI-RS-Resource configured in the CSI-MeasConfig of this serving cell. This reference signal determines a candidate beam
	-- for beam failure recovery (BFR).
	csi-RS							NZP-CSI-RS-ResourceId,
	-- RA occasions that the UE shall use when performing BFR upon selecting the candidate beam identified by this CSI-RS. If the field is absent
	-- the UE uses the RA occasion associated with the SSB that is QCLed with this CSI-RS. 
	-- The RA preamble index to use in the RA occasions associated with this CSI-RS. If the field is absent, the UE uses the preamble index
	-- associated with the SSB that is QCLed with this CSI-RS. 
	ra-PreambleIndex				INTEGER (0..63)																	OPTIONAL,	-- Need R
	...
}

-- TAG-BEAM-FAILURE-RECOVERY-CONFIG-STOP
-- ASN1STOP

–	CellGroupConfig
The CellGroupConfig IE is used to configure a master cell group (MCG) or secondary cell group (SCG). A cell group comprises of one MAC entity, a set of logical channels with associated RLC entities and of a primary cell (SpCell) and one or more secondary cells (SCells).
CellGroupConfig information element
-- ASN1START
-- TAG-CELL-GROUP-CONFIG-START

-- Configuration of one Cell-Group:
CellGroupConfig	::= 						SEQUENCE {
	cellGroupId									CellGroupId,

	-- Logical Channel configuration and association with radio bearers:
	rlc-BearerToAddModList 						SEQUENCE (SIZE(1..maxLC-ID)) OF RLC-Bearer-Config				OPTIONAL,   -- Need N
	rlc-BearerToReleaseList						SEQUENCE (SIZE(1..maxLC-ID)) OF LogicalChannelIdentity			OPTIONAL,   -- Need N

	-- Parameters applicable for the entire cell group:
	mac-CellGroupConfig							MAC-CellGroupConfig												OPTIONAL,	-- Need M
	physicalCellGroupConfig						PhysicalCellGroupConfig											OPTIONAL,	-- Need M

	-- Serving Cell specific parameters (SpCell and SCells)
	spCellConfig								SpCellConfig													OPTIONAL, 	-- Need M
	sCellToAddModList							SEQUENCE (SIZE (1..maxNrofSCells)) OF SCellConfig				OPTIONAL,	-- Need N
	-- List of seconary serving cells to be released (not applicable for SpCells)
	sCellToReleaseList							SEQUENCE (SIZE (1..maxNrofSCells)) OF SCellIndex				OPTIONAL,	-- Need N
	...
}

-- The ID of a cell group. 0 identifies the master cell group. Other values identify secondary cell groups.
-- In this version of the specification only values 0 and 1 are supported.
-- FFS: This should be moved to be own IE section
CellGroupId ::=									INTEGER (0.. maxSecondaryCellGroups)


RLC-Bearer-Config ::=								SEQUENCE {
	-- ID used commonly for the MAC logical channel and for the RLC bearer.
	logicalChannelIdentity						LogicalChannelIdentity,

	-- Associates the RLC Bearer with an SRB or a DRB. The UE shall deliver DL RLC SDUs received via the RLC entity of this
	-- RLC bearer to the PDCP entity of the servedRadioBearer. Furthermore, the UE shall advertise and deliver uplink PDCP PDUs of the 
	-- uplink PDCP entity of the servedRadioBearer to the uplink RLC entity of this RLC bearer unless the uplink scheduling 
	-- restrictions ('moreThanOneRLC' in PDCP-Config and the restrictions in LogicalChannelConfig) forbid it to do so.
	servedRadioBearer							CHOICE {
		srb-Identity                           SRB-Identity,
		drb-Identity                           DRB-Identity
	}																											OPTIONAL,	-- Cond LCH-SetupOnly

	reestablishRLC								ENUMERATED {true}												OPTIONAL, 	-- Need N
	rlc-Config									RLC-Config														OPTIONAL,	-- Cond LCH-Setup

	mac-LogicalChannelConfig					LogicalChannelConfig											OPTIONAL,	-- Cond LCH-Setup
	...	
}

LogicalChannelIdentity ::= 					INTEGER (1..maxLC-ID)

-- Cell-Group specific L1 parameters
PhysicalCellGroupConfig ::=					SEQUENCE {
	-- Enables spatial bundling of HARQ ACKs. It is configured per cell group (i.e. for all the cells within the cell group) for PUCCH 
	-- reporting of HARQ-ACK. It is only applicable when more than 4 layers are possible to schedule.
	-- Corresponds to L1 parameter 'HARQ-ACK-spatial-bundling' (see 38.213, section FFS_Section)
	-- Absence indicates that spatial bundling is disabled.
	harq-ACK-SpatialBundlingPUCCH				ENUMERATED {true}												OPTIONAL,	-- Need R

	-- Enables spatial bundling of HARQ ACKs. It is configured per cell group (i.e. for all the cells within the cell group) for PUSCH 
	-- reporting of HARQ-ACK. It is only applicable when more than 4 layers are possible to schedule.
	-- Corresponds to L1 parameter 'HARQ-ACK-spatial-bundling' (see 38.213, section FFS_Section)
	-- Absence indicates that spatial bundling is disabled.
	harq-ACK-SpatialBundlingPUSCH				ENUMERATED {true}												OPTIONAL,	-- Need R
	-- The maximum transmit power to be used by the UE in this NR cell group. 
	p-NR										P-Max															OPTIONAL,	-- Need R
	-- The PDSCH HARQ-ACK codebook is either semi-static of dynamic. This is applicable to both CA and none CA operation.
	-- Corresponds to L1 parameter 'HARQ-ACK-codebook' (see 38.213, section FFS_Section)
	pdsch-HARQ-ACK-Codebook						ENUMERATED {semiStatic, dynamic},
	-- RNTI used for SRS TPC commands on DCI. Corresponds to L1 parameter 'TPC-SRS-RNTI' (see 38.213, section 10)
	tpc-SRS-RNTI								RNTI-Value														OPTIONAL,	-- Need R
	-- RNTI used for PUCCH TPC commands on DCI. Corresponds to L1 parameter 'TPC-PUCCH-RNTI' (see 38.213, section 10).
	tpc-PUCCH-RNTI								RNTI-Value														OPTIONAL,	-- Need R
	-- RNTI used for PUSCH TPC commands on DCI. Corresponds to L1 parameter 'TPC-PUSCH-RNTI' (see 38.213, section 10)
	tpc-PUSCH-RNTI	RNTI-Value																					OPTIONAL,-- Need R
	...
}


-- Serving cell specific MAC and PHY parameters for a SpCell:
SpCellConfig ::=						SEQUENCE {
	-- Serving cell ID of a PSCell (the PCell of the Master Cell Group uses ID = 0)
	servCellIndex						ServCellIndex															OPTIONAL,	-- Cond SCG
	-- Parameters for the synchronous reconfiguration to the target SpCell:
	reconfigurationWithSync 			ReconfigurationWithSync 												OPTIONAL,	-- Cond ReconfWithSync
	rlf-TimersAndConstants				SetupRelease { RLF-TimersAndConstants }									OPTIONAL,	-- Need M
	rlmInSyncOutOfSyncThreshold         INTEGER (0..1)                         									OPTIONAL,	-- Need M
	spCellConfigDedicated				ServingCellConfig														OPTIONAL,	-- Need M
	...
}

ReconfigurationWithSync ::=			SEQUENCE {
	spCellConfigCommon					ServingCellConfigCommon													OPTIONAL,	-- Need M
	newUE-Identity						RNTI-Value,
	t304								ENUMERATED {ms50, ms100, ms150, ms200, ms500, ms1000, ms2000, ms10000},
		rach-ConfigDedicated				CHOICE {
			uplink								RACH-ConfigDedicated,
			supplementaryUplink					RACH-ConfigDedicated
	}																											OPTIONAL,	-- Need N
	...
}			

SCellConfig ::=						SEQUENCE {
	sCellIndex							SCellIndex,
	sCellConfigCommon					ServingCellConfigCommon													OPTIONAL,	-- Cond SCellAdd
	sCellConfigDedicated				ServingCellConfig														OPTIONAL,	-- Cond SCellAddMod
	...
}

-- TAG-CELL-GROUP-CONFIG-STOP 
-- ASN1STOP

CellGroupConfig field descriptionslogicalChannelIdentity
The logical channel identity for both UL and DL.rlmInSyncOutOfSyncThreshold
BLER threshold pair index for IS/OOS indication generation (TS 38.133). Whenever this is reconfigured, UE resets on-going RLF timers and counter.
Conditional PresenceExplanationLCH-SetupOnlyThe field is mandatory present if the corresponding LCH is being set up; otherwise it is not present.LCH-SetupThe field is mandatory present if the corresponding LCH is being set up for DRB; otherwise it is optionally present, need M.ReconfWithSyncThe field is mandatory present in case of SpCell change and security key change; otherwise it is optionally present, need M.SCellAddThe field is optionally present, need M, upon SCell addition; otherwise it is not presentSCellAddModThe field is mandatory present upon SCell addition; otherwise it is optionally present, need M.
–	CodebookConfig
The IE CodebookConfig is used to configure codebooks of Type-I and Type-II (see 38.214, section 5.2.2.2)
CodebookConfig information element
-- ASN1START
-- TAG-CODEBOOKCONFIG-START
CodebookConfig ::= 									SEQUENCE {
	-- CodebookType including possibly sub-types and the corresponding parameters for each. Corresponds to L1 parameter 'CodebookType'
	-- (see 38.214, section 5.2.2.2)
	codebookType 										CHOICE {
		type1 												SEQUENCE {
			subType										CHOICE {
				typeI-SinglePanel									SEQUENCE {
					nrOfAntennaPorts									CHOICE {
						two													SEQUENCE {
							-- Codebook subset restriction for 2TX codebook 
							-- Corresponds to L1 parameter ' TypeI-SinglePanel-2Tx-CodebookSubsetRestriction' (see 38.214 section 5.2.2.2.1)
							twoTX-CodebookSubsetRestriction						BIT STRING (SIZE (6))
						},
						moreThanTwo											SEQUENCE {
							-- Number of antenna ports in first (n1) and second (n2) dimension and codebook subset restriction
							-- Corresponds to L1 parameters 'CodebookConfig-N1', 'CodebookConfig-N2'
							-- 'TypeI-SinglePanel-CodebookSubsetRestriction ' (see 38.214 section 5.2.2.2.1)
							n1-n2												CHOICE {
								two-one-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (8)),
								two-two-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (64)),
								four-one-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (16)),
								three-two-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (96)),
								six-one-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (24)),
								four-two-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (128)),
								eight-one-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (32)),
								four-three-TypeI-SinglePanel-Restriction			BIT STRING (SIZE (192)),
								six-two-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (192)),
								twelve-one-TypeI-SinglePanel-Restriction			BIT STRING (SIZE (48)),
								four-four-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (256)),
								eight-two-TypeI-SinglePanel-Restriction				BIT STRING (SIZE (256)),
								sixteen-one-TypeI-SinglePanel-Restriction			BIT STRING (SIZE (64))
							},
							-- i2 codebook subset restriction for Type I Single-panel codebook used when reportQuantity is CRI/Ri/i1/CQI
							-- Corresponds to L1 parameter 'TypeI-SinglePanel-CodebookSubsetRestriction-i2' (see 38.214 section 5.2.2.2.1)
							typeI-SinglePanel-codebookSubsetRestriction-i2		BIT STRING (SIZE (16))	OPTIONAL
						}
					},
					-- Restriction for RI for TypeI-SinglePanel-RI-Restriction
					-- Corresponds to L1 parameter 'TypeI-SinglePanel-RI-Restriction' (see 38.214, section 5.2.2.2.1)
					typeI-SinglePanel-ri-Restriction					BIT STRING (SIZE (8))
				}, 
				typeI-MultiPanel									SEQUENCE {
					-- Codebook subset restriction for Type I Multi-panel codebook
					-- Corresponds to L1 parameter 'TypeI-MultiPanel-CodebookSubsetRestriction' (see 38.214, section 5.2.2.2.2)
					ng-n1-n2												CHOICE {
						two-two-one-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (8)),
						two-four-one-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (32)),
						four-two-one-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (32)),
						two-two-two-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (128)),
						two-eight-one-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (64)),
						four-four-one-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (64)),
						two-four-two-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (256)),
						four-two-two-TypeI-MultiPanel-Restriction				BIT STRING (SIZE (256))
					},
					-- Restriction for RI for TypeI-MultiPanel-RI-Restriction
					-- Corresponds to L1 parameter 'TypeI-MultiPanel-RI-Restriction' (see 38.214, section 5.2.2.2.2)
					ri-Restriction							BIT STRING (SIZE (4))
				}
			},
			-- CodebookMode as specified in 38.214 section 5.2.2.2.2
			codebookMode										INTEGER (1..2)

		},
		type2									SEQUENCE {
			subType									CHOICE {
				typeII									SEQUENCE {
					-- Number of antenna ports in first (n1) and second (n2) dimension and codebook subset restriction
					-- Corresponds to L1 parameters 'CodebookConfig-N1', 'CodebookConfig-N2'
					-- The CHOICE name indicates the value of n1 and n2, the CHOICE contents is the codebook subset restriction bitmap
					-- Corresponds to L1 parameter ' TypeII-CodebookSubsetRestriction' (see 38.214 section 5.2.2.2.3)
					-- Number of bits for codebook subset restriction is ceil(log2(nchoosek(O1*O2,4)))+8*n1*n2 where nchoosek(a,b) = a!/(b!(a-b)!)
					n1-n2-codebookSubsetRestriction			CHOICE {
						two-one									BIT STRING (SIZE (16)),
						two-two									BIT STRING (SIZE (139)),
						four-one								BIT STRING (SIZE (32)),
						three-two								BIT STRING (SIZE (59)),
						six-one									BIT STRING (SIZE (49)),
						four-two								BIT STRING (SIZE (75)),
						eight-one								BIT STRING (SIZE (65)),
						four-three								BIT STRING (SIZE (107)),
						six-two									BIT STRING (SIZE (107)),
						twelve-one								BIT STRING (SIZE (129)),
						four-four								BIT STRING (SIZE (139)),
						eight-two								BIT STRING (SIZE (139)),
						sixteen-one								BIT STRING (SIZE (129))
					},
					-- Restriction for RI for TypeII-RI-Restriction
					-- Corresponds to L1 parameter 'TypeII-RI-Restriction' (see 38.214, section 5.2.2.2.3)
					typeII-RI-Restriction					BIT STRING (SIZE (2))
				}, 
				typeII-PortSelection					SEQUENCE {
					-- The size of the port selection codebook (parameter d)
					portSelectionSamplingSize				ENUMERATED {n1, n2, n3, n4}					OPTIONAL,		-- Cond TypeII-PortSelection
					-- Restriction for RI for TypeII-PortSelection-RI-Restriction
					-- Corresponds to L1 parameter 'TypeII-PortSelection-RI-Restriction' (see 38.214, section 5.2.2.4)
					typeII-PortSelectionRI-Restriction		BIT STRING (SIZE (2))
				}
			},
			-- The size of the PSK alphabet, QPSK or 8-PSK
			phaseAlphabetSize						ENUMERATED {n4, n8},
			-- If subband amplitude reporting is activated (true)
			subbandAmplitude						BOOLEAN,
			-- Number of beams, L,  used for linear combination
			numberOfBeams							ENUMERATED {two, three, four}
		}
	}
}

-- TAG-CODEBOOKCONFIG-STOP
-- ASN1STOP

–	ConfiguredGrantConfig
The IE ConfiguredGrantConfig is used to configure uplink transmission without dynamic grant according to two possible schemes. The actual uplink grant may either be configured via RRC (type1) or provided via the PDCCH (addressed to CS-RNTI) (type2).
ConfiguredGrantConfig information element
-- ASN1START
-- TAG-CONFIGUREDGRANTCONFIG-START

ConfiguredGrantConfig ::=				SEQUENCE {

	-- Frequency hopping as agreed in RAN1-AH18776
	frequencyHopping             ENUMERATED {mode1, mode2},
	-- DMRS configuration, as agreed in RAN1-AH18776
	cg-DMRS-Configuration		DMRS-UplinkConfig,

	-- Indicates the MCS table the UE shall use for PUSCH without transform precoding, as agreed in RAN1-AH18776
	mcs-Table					ENUMERATED {qam64, qam256},
	-- Indicates the MCS table the UE shall use for PUSCH with transform precoding, as agreed in RAN1-AH18776
	-- When the field is absent the UE applies the value 64QAM
	mcs-TableTransformPrecoder		ENUMERATED {qam256}																	OPTIONAL,	-- Need S
	-- Selection between and configuration of dynamic and semi-static beta-offset, as agreed in RAN1-AH18776
	-- Note: For Type 1 UL data transmission without grant, "uci-on-PUSCH" should be set to semiStatic
	uci-OnPUSCH							SetupRelease { CG-UCI-OnPUSCH },
	-- Configuration of resource allocation type 0 and resource allocation type 1, as agreed in RAN1-AH18776
	-- Note: For Type 1 UL data transmission without grant, "resourceAllocation" should be resourceAllocationType0 or resourceAllocationType1
	resourceAllocation					ENUMERATED { resourceAllocationType0, resourceAllocationType1, dynamicSwitch },
	-- Selection between config 1 and config 2 for RBG size for PUSCH. When the field is absent the UE applies the value config1.
	-- Note: rbg-Size is used when the transformPrecoder parameter is disabled.
	rbg-Size								ENUMERATED {config2}														OPTIONAL,	-- Need S
									
	-- Closed control loop to apply. Corresponds to L1 parameter 'PUSCH-closed-loop-index' (see 38.213, section FFS_Section)
	powerControlLoopToUse					ENUMERATED {n0, n1},
	-- Index of the P0-PUSCH-AlphaSet to be used for this configuration
	p0-PUSCH-Alpha							P0-PUSCH-AlphaSetId,
	-- Enable transformer precoder for type1 and type2. Absence indicates that it is disabled.
	-- Corresponds to L1 parameter 'UL-TWG-tp' (see 38.214, section 6.1.3)
	transformPrecoder						ENUMERATED {enabled}														OPTIONAL,	-- Need R
	-- The number of HARQ processes configured. It applies for both Type 1 and Type 2
	-- Corresponds to L1 parameter 'UL-TWG-numbHARQproc' (see 38.321, section 5.8.2)
	nrofHARQ-Processes						INTEGER(1..16),
	-- 	The number or repetitions of K:
	repK									ENUMERATED {n1, n2, n4, n8},
	-- If repetitions is used, this field indicates the redundancy version (RV) sequence to use.
	-- Corresponds to L1 parameter 'UL-TWG-RV-rep' (see 38.321, section 5.8.2)
	repK-RV									ENUMERATED {s1-0231, s2-0303, s3-0000}										OPTIONAL,	-- Cond RepK
	-- Periodicity for UL transmission without UL grant for type 1 and type 2
	-- Corresponds to L1 parameter 'UL-TWG-periodicity' (see 38.321, section 5.8.2)

	-- The following periodicities are supported depending on the configured subcarrier spacing [symbols]:
	--	15kHz: 2, 7, n*14, where n={1, 2, 4, 5, 8, 10, 16, 20, 32, 40, 64, 80, 128, 160, 320, 640}
	--	30kHz: 2, 7, n*14, where n={1, 2, 4, 5, 8, 10, 16, 20, 32, 40, 64, 80, 128, 160, 256, 320, 640, 1280}
	--	60kHz with normal CP: 2, 7, n*14, where n={1, 2, 4, 5, 8, 10, 16, 20, 32, 40, 64, 80, 128, 160, 256, 320, 512, 640, 1280, 2560}
	--	60kHz with ECP: 2, 6, n*12, where n={1, 2, 4, 5, 8, 10, 16, 20, 32, 40, 64, 80, 128, 160, 256, 320, 512, 640, 1280, 2560}
	--	120kHz: 2, 7, n*14, where n={1, 2, 4, 5, 8, 10, 16, 20, 32, 40, 64, 80, 128, 160, 256, 320, 512, 640, 1024, 1280, 2560, 5120}
	-- (see 38.214, Table 6.1.2.3-1)
	periodicity								ENUMERATED {
												sym2, sym7, sym1x14, sym2x14, sym4x14, sym5x14, sym8x14, sym10x14, sym16x14, sym20x14,
												sym32x14, sym40x14, sym64x14, sym80x14, sym128x14, sym160x14, sym256x14, sym320x14, sym512x14,
												sym640x14, sym1024x14, sym1280x14, sym2560x14, sym5120x14,

												sym6, sym1x12, sym2x12, sym4x12, sym5x12, sym8x12, sym10x12, sym16x12, sym20x12, sym32x12,
												sym40x12, sym64x12, sym80x12, sym128x12, sym160x12, sym256x12, sym320x12, sym512x12, sym640x12,
												sym1280x12, sym2560x12
											},

	-- If configured, the UE uses the configured grant timer (see 38.321, section 5.8.2) with this initial timer value.
	-- Supported values are as follows in units of symbols:
	-- For normal CP: 2, 7, {1, 2, 4, 5, 8, 10, 20, 32, 40, 64, 80, 128, 160, 256, 512, 640 } x 14
	-- For extended CP: 2, 6, {1, 2, 4, 8, 20, 40, 80, 128, 160, 256, 320, 512, 640 } x 12
	configuredGrantTimer					ENUMERATED {
												sym2, sym7, sym1x14, sym2x14, sym4x14, sym5x14, sym8x14, sym10x14, sym16x14, sym20x14, sym32x14,
												sym40x14, sym64x14, sym80x14, sym128x14, sym160x14, sym256x14, sym512x14, sym640x14,

												sym6, sym1x12, sym2x12, sym4x12, sym5x12, sym8x12, sym10x12, sym16x12, sym20x12, sym32x12,
												sym40x12, sym64x12, sym80x12, sym128x12, sym256x12, sym320x12, sym512x12, sym640x12
											}																			OPTIONAL,	-- Need R
	-- Selection between "configured grant" transmission with fully RRC-configured UL grant (Type1) 
	-- or with UL grant configured by DCI addressed to CS-RNTI (Type2).
	rrc-ConfiguredUplinkGrant		SEQUENCE {
			-- Offset related to SFN=0
			timeDomainOffset						INTEGER  (0..5119),
			-- Corresponding to the DCI field of time domain resource assignment, and the maximum bit width is 4.
			--(see 38.214, section 6.1.2 and 38.212, section 7.3.1)
			timeDomainAllocation					 INTEGER  (0..15), -- RAN1 indicated just "Mapping-type,Index-start-len"
            -- Corresponding to the DCI field of freq domain resource assignment. 
			-- (see 38.214, section 6.1.2, and 38.212, section 7.3.1)
			frequencyDomainAllocation				BIT STRING (SIZE(18)),
			-- UE-specific DMRS configuration: corresponding to the DCI field of antenna ports, and the maximum bitwidth is 5. 
			-- (see 38.214, section 6.1.2, and 38.212, section 7.3.1)
            antennaPort								INTEGER   (0..31),
            dmrs-SeqInitialization					INTEGER   (0..1)          					  OPTIONAL,  -- Cond NoTransformPrecoder
            precodingAndNumberOfLayers				INTEGER   (0..63),
            srs-ResourceIndicator					INTEGER   (0..15),
			-- The modulation order, target code rate and TB size (see 38.214, section 6.1.2)
			mcsAndTBS								INTEGER (0..31),
			-- Enables intra-slot frequency hopping with the given frequency hopping offset
			-- Corresponds to L1 parameter 'UL-TWG-hopping' (see 38.214, section FFS_Section)

			frequencyHoppingOffset					INTEGER (1.. maxNrofPhysicalResourceBlocks-1),
			pathlossReferenceIndex					INTEGER (0..maxNrofPUSCH-PathlossReferenceRSs-1),
			...
	}																								OPTIONAL  -- Cond Type1
}

CG-UCI-OnPUSCH ::= CHOICE {
	dynamic									SEQUENCE (SIZE (1..4)) OF BetaOffsets,
	semiStatic								BetaOffsets
}

-- TAG-CONFIGUREDGRANTCONFIG-STOP
-- ASN1STOP

ConfiguredGrantConfigfield descriptionsconfiguredGrantTimer
If configured, the UE uses the configured grant timer (see 38.321, section 5.8.2) with this initial timer value.frequencyHopping
Controls frequency hopping for transmission with configured grant.nrofHARQ-Processes
The number of HARQ processes configured. It applies for both Type 1 and Type 2p0-PUSCH-Alpha
Index of the P0-PUSCH-AlphaSet to be used for this configurationperiodicity
Periodicity for UL transmission without UL grant for type 1 and type 2powerControlLoopToUse
Closed control loop to apply. Corresponds to L1 parameter 'PUSCH-closed-loop-index' (see 38.213, section FFS_Section)rbg-Size
Selection between config 1 and config 2 for RBG size for PUSCH. When the field is absent the UE applies the value config1.repK
The number or repetitions of K.repK-RV
If repetitions is used, this field indicates the redundancy version (RV) sequence to use.resourceAllocation
Configuration of resource allocation type 0 and resource allocation type 1.  For Type 1 UL data transmission without grant, “resourceAllocation” should be resourceAllocationType0 or resourceAllocationType1.rrc-ConfiguredUplinkGrant
Configuration for "configured grant" transmission with fully RRC-configured UL grant (Type1).

NOTE: 	Type 1 confgured grant may be configured for UL or SUL, but not for both simultaneously.transformPrecoder
Enable transformer precoder for type1 and type2. Absence indicates that it is disabled.
Conditional PresenceExplanationRepKThe field is mandatory present if repK is set to n2, n4,or n8.  It is not present if repK is set to n1.
–	ControlResourceSet
The IE ControlResourceSet is used to configure a time/frequency control resource set (CORESET) in which to search for downlink control information (see 38.213, section FFS_Section).
ControlResourceSet information element
-- ASN1START
-- TAG-CONTROLRESOURCESET-START

ControlResourceSet ::= 					SEQUENCE {
	-- Corresponds to L1 parameter 'CORESET-ID'
	-- Value 0 identifies the common CORESET configured in MIB and in ServingCellConfigCommon
	-- Values 1..maxNrofControlResourceSets-1 identify CORESETs configured by dedicated signalling
	-- The controlResourceSetId is unique among the BWPs of a ServingCell.
	controlResourceSetId					ControlResourceSetId,


	-- Frequency domain resources for the CORESET. Each bit corresponds a group of 6 RBs, with grouping starting from PRB 0, which is fully 
	-- contained in the bandwidth part within which the CORESET is configured. 
	-- The most significant bit corresponds to the group of lowest frequency which is fully contained in the bandwidth part within which the 
	-- CORESET is configured, each next subsequent lower significance bit corresponds to the next lowest frequency group fully contained within
	-- the bandwidth part within which the CORESET is configured, if any. 
	-- Bits corresponding to a group not fully contained within the bandwidth part within which the CORESET is configured are set to zero. 
	-- Corresponds to L1 parameter 'CORESET-freq-dom'(see 38.211, section 7.3.2.2)
	frequencyDomainResources				BIT STRING (SIZE (45)),
	-- Contiguous time duration of the CORESET in number of symbols 
	-- Corresponds to L1 parameter 'CORESET-time-duration' (see 38.211, section 7.3.2.2FFS_Section)
	duration								INTEGER (1..maxCoReSetDuration),
	-- Mapping of Control Channel Elements (CCE) to Resource Element Groups (REG). 
	-- Corresponds to L1 parameter 'CORESET-CCE-REG-mapping-type' (see 38.211Section sections 7.3.2.2 and 7.4.1.3.2)
	cce-REG-MappingType							CHOICE { 
		interleaved								SEQUENCE {
			-- Resource Element Groups (REGs) can be bundled to create REG bundles. This parameter defines the size of such bundles. 
			-- Corresponds to L1 parameter 'CORESET-REG-bundle-size' (see 38.211, section FFS_Section)
			reg-BundleSize							ENUMERATED {n2, n3, n6},
			-- Corresponds to L1 parameter 'CORESET-interleaver-size' (see 38.211, 38.213, section FFS_Section)
			interleaverSize							ENUMERATED {n2, n3, n6}, 
			-- Corresponds to L1 parameter 'CORESET-shift-index' (see 38.211, section 7.3.2.2)
			shiftIndex								INTEGER(0..maxNrofPhysicalResourceBlocks-1)
		}, 
		nonInterleaved 							NULL
	},
	-- Precoder granularity in frequency domain. 
	-- Corresponds to L1 parameter 'CORESET-precoder-granuality' (see 38.211, sections 7.3.2.2 and 7.4.1.3.2)
	precoderGranularity						ENUMERATED {sameAsREG-bundle, allContiguousRBs},

	-- A subset of the TCI states defined in TCI-States used for providing QCL relationships between the DL RS(s) in one RS Set 
	-- (TCI-State) and the PDCCH DMRS ports. Corresponds to L1 parameter 'TCI-StatesPDCCH' (see 38.214, section FFS_Section)
	tci-StatesPDCCH							SEQUENCE(SIZE (1..maxNrofTCI-StatesPDCCH)) OF TCI-StateId				OPTIONAL,	-- Need R

	-- If at least spatial QCL is configured/indicated, this field indicates if TCI field is present or not present in DL-related DCI.
	-- When the field is absent the UE considers the TCI to be absent/disabled.
	-- Corresponds to L1 parameter 'TCI-PresentInDCI' (see 38,213, section 5.1.5)
	tci-PresentInDCI						ENUMERATED {enabled}													OPTIONAL, 	-- Need S

	-- PDCCH DMRS scrambling initalization. Corresponds to L1 parameter 'PDCCH-DMRS-Scrambling-ID' (see 38.214, section 5.1)
	-- When the field is absent the UE applies the value '0'.
	pdcch-DMRS-ScramblingID					BIT STRING (SIZE (16))													OPTIONAL 	-- Need S
}

-- TAG-CONTROLRESOURCESET-STOP
-- ASN1STOP

–	ControlResourceSetId
The ControlResourceSetId IE concerns a short identity, used to identify a control resource set within a serving cell. The ControlResourceSetId = 0 identifies the ControlResourceSet configured via PBCH (MIB) and in ServingCellConfigCommon. The ID space is used across the BWPs of a Serving Cell. The number of CORESETs per BWP is limited to 3 (including the initial CORESET).
ControlResourceSetId information element
-- ASN1START
-- TAG-CONTROL-RESOURCE-SET-ID-START

ControlResourceSetId ::=				INTEGER (0..maxNrofControlResourceSets-1)

-- TAG-CONTROL-RESOURCE-SET-ID-STOP
-- ASN1STOP

–	CrossCarrierSchedulingConfig
The IE CrossCarrierSchedulingConfig is used to specify the configuration when the cross-carrier scheduling is used in a cell.
CrossCarrierSchedulingConfig information elements
-- ASN1START

CrossCarrierSchedulingConfig ::=		SEQUENCE {
	schedulingCellInfo						CHOICE {
		own										SEQUENCE {					-- No cross carrier scheduling
			cif-Presence							BOOLEAN
		},
		other									SEQUENCE {					-- Cross carrier scheduling
			schedulingCellId						ServCellIndex,
			cif-InSchedulingCell					INTEGER (1..7)
		}																	-- Cond SCellOnly
	},
	...
}

-- ASN1STOP

CrossCarrierSchedulingConfig field descriptionscif-Presence
The field is used to indicate whether carrier indicator field is present (value TRUE) or not (value FALSE) in PDCCH/EPDCCH DCI formats, see TS 38.213 [REF, SECTION]. cif-InSchedulingCell
The field indicates the CIF value used in the scheduling cell to indicate a grant or assignment applicable for this cell, see TS 38.213 [REF, SECTION]. If cif-Presence is set to true, the CIF value indicating a grant or assignment for this cell is 0.pdsch-Start
The starting OFDM symbol of PDSCH for the concerned SCell, see TS [REF]. Values 1, 2, 3 are applicable when dl-Bandwidth for the concerned SCell is greater than 10 resource blocks, values 2, 3, 4 are applicable when dl-Bandwidth for the concerned SCell is less than or equal to 10 resource blocks, see TS [REF].schedulingCellId
Indicates which cell signals the downlink allocations and uplink grants, if applicable, for the concerned SCell. In case the UE is configured with DC, the scheduling cell is part of the same cell group (i.e. MCG or SCG) as the scheduled cell. 
Conditional PresenceExplanationSCellOnlyThis field is optionally present, Need M, for SCells. It is absent otherwise
–	CSI-AperiodicTriggerStateList
The CSI-AperiodicTriggerStateList IE is used to configure the UE with a list of aperiodic trigger states. Each value from 1 to 2^reportTriggerSize of the DCI field "CSI request" field is associated with one trigger state. Upon reception of the value associated with a trigger state, the UE will perform measurement of aperiodic CSI-RS (reference signals) and aperiodic reporting on L1 according to all entries in the associatedReportConfigInfoList for that trigger state.
CSI-AperiodicTriggerStateList information element
-- ASN1START
-- TAG-CSI-APERIODICTRIGGERSTATELIST-START

CSI-AperiodicTriggerStateList ::=	SEQUENCE (SIZE (1..maxNrOfCSI-AperiodicTriggers)) OF CSI-AperiodicTriggerState 

CSI-AperiodicTriggerState ::=		SEQUENCE {
	associatedReportConfigInfoList		SEQUENCE (SIZE(1..maxNrofReportConfigPerAperiodicTrigger)) OF CSI-AssociatedReportConfigInfo,
	...	
}

CSI-AssociatedReportConfigInfo ::=		SEQUENCE {
	-- The reportConfigId of one of the CSI-ReportConfigToAddMod configured in CSI-MeasConfig
	reportConfigId						CSI-ReportConfigId,

	resourcesForChannel					CHOICE {
       nzp-CSI-RS							SEQUENCE {
			-- NZP-CSI-RS-ResourceSet for channel measurements. Entry number in nzp-CSI-RS-ResourceSetList in the CSI-ResourceConfig 
			-- indicated by resourcesForChannelMeasurement in the CSI-ReportConfig indicated by reportConfigId above 
			-- (1 corresponds to the first entry, 2 to thesecond entry, and so on).
			resourceSet		INTEGER (1..maxNrofNZP-CSI-RS-ResourceSetsPerConfig),

			-- List of references to TCI-States for providing the QCL source and QCL type for for each NZP-CSI-RS-Resource 
			-- listed in nzp-CSI-RS-Resources of the NZP-CSI-RS-ResourceSet indicated by nzp-CSI-RS-ResourcesforChannel. 
			-- First entry in qcl-info-forChannel corresponds to first entry in nzp-CSI-RS-Resources of that NZP-CSI-RS-ResourceSet, 
			-- second entry in qcl-info-forChannel corresponds to second entry in nzp-CSI-RS-Resources,
			-- and so on. Corresponds to L1 parameter 'QCL-Info-aPeriodicReportingTrigger' (see 38.214, section 5.2.1.5.1)
			qcl-info						SEQUENCE (SIZE(1..maxNrofAP-CSI-RS-ResourcesPerSet)) OF TCI-StateId
		},
		-- CSI-SSB-ResourceSet for channel measurements. Entry number in csi-SSB-ResourceSetList in the CSI-ResourceConfig indicated by
		-- resourcesForChannelMeasurement in the CSI-ReportConfig indicated by reportConfigId above (1 corresponds to the first entry, 2 to 
		-- the second entry, and so on).
		csi-SSB-ResourceSet					INTEGER (1..maxNrofCSI-SSB-ResourceSetsPerConfig)
	},

	-- CSI-IM-ResourceSet for interference measurement. Entry number in csi-IM-ResourceSetList in the CSI-ResourceConfig indicated by 
	-- csi-IM-ResourcesForInterference in the CSI-ReportConfig indicated by reportConfigId above (1 corresponds to the first entry, 2 to the second
	-- entry, and so on).
	-- The indicated CSI-IM-ResourceSet should have exactly the same number of resources like the NZP-CSI-RS-ResourceSet indicated in 
	-- nzp-CSI-RS-ResourcesforChannel.
	-- This field can only be present if the CSI-ReportConfig identified by reportConfigId includes csi-IM-ResourcesForInterference.
	csi-IM-ResourcesforInteference				INTEGER(1..maxNrofCSI-IM-ResourceSetsPerConfig)			OPTIONAL, --Cond CSI-IM-forInterference


	-- NZP-CSI-RS-ResourceSet for interference measurement. Entry number in nzp-CSI-RS-ResourceSetList in the CSI-ResourceConfig indicated by 
	-- nzp-CSI-RS-ResourcesForInterference in the CSI-ReportConfig indicated by reportConfigId above (1 corresponds to the first entry,
	-- 2 to the second entry, and so on).
	-- The indicated NZP-CSI-RS-ResourceSet should have exactly the same number of resources like the NZP-CSI-RS-ResourceSet indicated in 
	-- nzp-CSI-RS-ResourcesforChannel.
	-- This field can only be present if the CSI-ReportConfig identified by reportConfigId includes nzp-CSI-RS-ResourcesForInterference.
	nzp-CSI-RS-ResourcesforInterference			INTEGER (1..maxNrofNZP-CSI-RS-ResourceSetsPerConfig)	OPTIONAL, --Cond LinkedNZP-CSI-RS-forInterference
	...
}

-- TAG-CSI-APERIODICTRIGGERSTATELIST-STOP 
-- ASN1STOP

–	CSI-FrequencyOccupation
The IE CSI-FrequencyOccupation is used to configure the frequency domain occupation of a channel state information measurement resource (e.g. NZP-CSI-RS-Resource, CSI-IM-Resource).
CSI-FrequencyOccupation information element
-- ASN1START
-- TAG-CSI-FREQUENCYOCCUPATION-START

CSI-FrequencyOccupation ::=				SEQUENCE {
	-- PRB where this CSI resource starts in relation to PRB 0 of the associated BWP. 
	-- Only multiples of 4 are allowed (0, 4, ...)
	startingRB								INTEGER (0..maxNrofPhysicalResourceBlocks-1),
	-- Number of PRBs across which this CSI resource spans. Only multiples of 4 are allowed. The smallest configurable 
	-- number is the minimum of 24 and the width of the associated BWP.
	nrofRBs									INTEGER (24..maxNrofPhysicalResourceBlocks),
	...
}

-- TAG-CSI-FREQUENCYOCCUPATION-STOP
-- ASN1STOP

–	CSI-IM-Resource
The IE CSI-IM-Resource is used to configure one CSI Interference Management (IM) resource.
CSI-IM-Resource information element
-- ASN1START
-- TAG-CSI-IM-RESOURCE-START
CSI-IM-Resource ::= 			SEQUENCE {
	csi-IM-ResourceId						CSI-IM-ResourceId,

	-- The resource element pattern (Pattern0 (2,2) or Pattern1 (4,1)) with corresponding parameters.
	-- Corresponds to L1 parameter 'CSI-IM-RE-pattern' (see 38.214, section 5.2.2.3.4)
	csi-IM-ResourceElementPattern				CHOICE {
		pattern0									SEQUENCE {
			-- OFDM subcarrier occupancy of the CSI-IM resource for Pattern0
			-- Corresponds to L1 parameter 'CSI-IM-ResourceMapping' (see 38.214, section 5.2.2.3.4)
			subcarrierLocation-p0						ENUMERATED { s0, s2, s4, s6, s8, s10 },
			-- OFDM symbol location of the CSI-IM resource for Pattern0 
			-- Corresponds to L1 parameter 'CSI-IM-ResourceMapping' (see 38.214, section 5.2.2.3.4)
			symbolLocation-p0							INTEGER (0..12)
		},
		pattern1									SEQUENCE {
			-- OFDM subcarrier occupancy of the CSI-IM resource for Pattern1
			-- Corresponds to L1 parameter 'CSI-IM-ResourceMapping' (see 38.214, section 5.2.2.3.4)
			subcarrierLocation-p1						ENUMERATED { s0, s4, s8 },
			-- OFDM symbol location of the CSI-IM resource for Pattern1 
			-- Corresponds to L1 parameter 'CSI-IM-ResourceMapping' (see 38.214, section 5.2.2.3.4)
			symbolLocation-p1							INTEGER (0..13)
		}
	}																										OPTIONAL,	--Need M

	-- Frequency-occupancy of CSI-IM. Corresponds to L1 parameter 'CSI-IM-FreqBand' (see 38.214, section 5.2.2.3.2)
	freqBand									CSI-FrequencyOccupation										OPTIONAL,	-- Need M

	-- Periodicity and slot offset for periodic/semi-persistent CSI-IM. Corresponds to L1 parameter 'CSI-IM-timeConfig' 
	periodicityAndOffset					CSI-ResourcePeriodicityAndOffset								OPTIONAL, --Cond PeriodicOrSemiPersistent
	...
}

-- TAG-CSI-IM-RESOURCE-STOP
-- ASN1STOP

–	CSI-IM-ResourceId
The IE CSI-IM-ResourceId is used to identify one CSI-IM-Resource.
CSI-IM-ResourceId information element
-- ASN1START
-- TAG-CSI-IM-RESOURCEID-START
CSI-IM-ResourceId ::= 			INTEGER (0..maxNrofCSI-IM-Resources-1) 

-- TAG-CSI-IM-RESOURCEID-STOP
-- ASN1STOP

–	CSI-IM-ResourceSet
The IE CSI-IM-ResourceSet is used to configure a set of one or more CSI Interference Management (IM) resources (their IDs) and set-specific parameters. 
CSI-IM-ResourceSet information element
-- ASN1START
-- TAG-CSI-IM-RESOURCESET-START
CSI-IM-ResourceSet ::=			SEQUENCE {

	csi-IM-ResourceSetId					CSI-IM-ResourceSetId,
	-- CSI-IM-Resources associated with this CSI-IM-ResourceSet
	-- Corresponds to L1 parameter 'CSI-IM-ResourceConfigList' (see 38.214, section 5.2)
	csi-IM-Resources						SEQUENCE (SIZE(1..maxNrofCSI-IM-ResourcesPerSet)) OF CSI-IM-ResourceId,
	...
}
-- TAG-CSI-IM-RESOURCESET-STOP
-- ASN1STOP

–	CSI-IM-ResourceSetId
The IE CSI-IM-ResourceSetId is used to identify CSI-IM-ResourceSets.
CSI-IM-ResourceSetId information element
-- ASN1START
-- TAG-CSI-IM-RESOURCESETID-START

CSI-IM-ResourceSetId ::=				INTEGER (0..maxNrofCSI-IM-ResourceSets-1)

-- TAG-CSI-IM-RESOURCESETID-STOP
-- ASN1STOP

–	CSI-MeasConfig
The CSI-MeasConfig IE is used to configure CSI-RS (reference signals) belonging to the serving cell in which CSI-MeasConfig is included and channel state information reports to be transmitted on L1 (PUCCH, PUSCH) on the serving cell in which CSI-MeasConfig is included. See also 38.214, section 5.2.
CSI-MeasConfig information element
-- ASN1START
-- TAG-CSI-MEAS-CONFIG-START

CSI-MeasConfig ::=					SEQUENCE {
	-- Pool of NZP-CSI-RS-Resource which can be referred to from NZP-CSI-RS-ResourceSet
    nzp-CSI-RS-ResourceToAddModList		SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-Resources)) OF NZP-CSI-RS-Resource					OPTIONAL, -- Need N
	nzp-CSI-RS-ResourceToReleaseList	SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-Resources)) OF NZP-CSI-RS-ResourceId				OPTIONAL, -- Need N

	-- Pool of NZP-CSI-RS-ResourceSet which can be referred to from CSI-ResourceConfig or from MAC CEs
	nzp-CSI-RS-ResourceSetToAddModList	SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourceSets)) OF NZP-CSI-RS-ResourceSet			OPTIONAL, -- Need N
	nzp-CSI-RS-ResourceSetToReleaseList	SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourceSets)) OF NZP-CSI-RS-ResourceSetId			OPTIONAL, -- Need N

	-- Pool of CSI-IM-Resource which can be referred to from CSI-IM-ResourceSet
	csi-IM-ResourceToAddModList			SEQUENCE (SIZE (1..maxNrofCSI-IM-Resources)) OF CSI-IM-Resource							OPTIONAL, -- Need N
	csi-IM-ResourceToReleaseList		SEQUENCE (SIZE (1..maxNrofCSI-IM-Resources)) OF CSI-IM-ResourceId						OPTIONAL, -- Need N

	-- Pool of CSI-IM-ResourceSet which can be referred to from CSI-ResourceConfig or from MAC CEs
	csi-IM-ResourceSetToAddModList		SEQUENCE (SIZE (1..maxNrofCSI-IM-ResourceSets)) OF CSI-IM-ResourceSet					OPTIONAL, -- Need N
	csi-IM-ResourceSetToReleaseList		SEQUENCE (SIZE (1..maxNrofCSI-IM-ResourceSets)) OF CSI-IM-ResourceSetId					OPTIONAL, -- Need N

	-- Pool of CSI-SSB-ResourceSet which can be referred to from CSI-ResourceConfig
	csi-SSB-ResourceSetToAddModList		SEQUENCE (SIZE (1..maxNrofCSI-SSB-ResourceSets)) OF CSI-SSB-ResourceSet					OPTIONAL, -- Need N
	csi-SSB-ResourceSetToAddReleaseList	SEQUENCE (SIZE (1..maxNrofCSI-SSB-ResourceSets)) OF CSI-SSB-ResourceSetId				OPTIONAL, -- Need N

	-- Configured CSI resource settings as specified in TS 38.214 section 5.2.1.2
	csi-ResourceConfigToAddModList 		SEQUENCE (SIZE (1..maxNrofCSI-ResourceConfigurations)) OF CSI-ResourceConfig			OPTIONAL, -- Need N
	csi-ResourceConfigToReleaseList 	SEQUENCE (SIZE (1..maxNrofCSI-ResourceConfigurations)) OF CSI-ResourceConfigId			OPTIONAL, -- Need N

	-- Configured CSI report settings as specified in TS 38.214 section 5.2.1.1
	csi-ReportConfigToAddModList		SEQUENCE (SIZE (1..maxNrofCSI-ReportConfigurations)) OF CSI-ReportConfig				OPTIONAL, -- Need N
	csi-ReportConfigToReleaseList		SEQUENCE (SIZE (1..maxNrofCSI-ReportConfigurations)) OF CSI-ReportConfigId				OPTIONAL, -- Need N
	

	-- Size of CSI request field in DCI (bits). Corresponds to L1 parameter 'ReportTriggerSize' (see 38.214, section 5.2)
	reportTriggerSize				INTEGER (0..6)																				OPTIONAL,

	-- Contains trigger states for dynamically selecting one or more aperiodic and semi-persistent reporting configurations
	-- and/or triggering one or more aperiodic CSI-RS resource sets for channel and/or interference measurement.
	-- FFS: How to address the MAC-CE configuration
	aperiodicTriggerStateList			SetupRelease { CSI-AperiodicTriggerStateList }											OPTIONAL, -- Need M
	semiPersistentOnPUSCH-TriggerStateList			SetupRelease { CSI-SemiPersistentOnPUSCH-TriggerStateList }					OPTIONAL, -- Need M
	...
}

maxNrofNZP-CSI-RS-ResourceSets		INTEGER ::= 		64
maxNrofNZP-CSI-RS-ResourceSets-1	INTEGER ::= 		63

maxNrofCSI-SSB-ResourceSets 		INTEGER ::=			64
maxNrofCSI-SSB-ResourceSets-1 		INTEGER ::=			63

maxNrofCSI-IM-ResourceSets 			INTEGER ::=			64
maxNrofCSI-IM-ResourceSets-1		INTEGER ::=			63

-- TAG-CSI-MEAS-CONFIG-STOP 
-- ASN1STOP

–	CSI-ReportConfig
The IE CSI-ReportConfig is used to configure reports sent on L1 (e.g. PUCCH) on the cell in which the CSI-ReportConfig is included.
CSI-ReportConfig information element
-- ASN1START
-- TAG-CSI-REPORTCONFIG-START
-- Configuration of a CSI-Report sent on L1 (e.g. PUCCH) (see 38.214, section 5.2.1)
CSI-ReportConfig ::=			SEQUENCE {
	reportConfigId							CSI-ReportConfigId,

	-- Indicates in which serving cell the CSI-ResourceConfigToAddMod(s) below are to be found.
	-- If the field is absent, the resources are on the same serving cell as this report configuration.
	carrier									ServCellIndex			OPTIONAL,	-- Need S

	-- Resources for channel measurement. csi-ResourceConfigId of a CSI-ResourceConfig included in the configuration of the serving cell
	-- indicated with the field "carrier" above. This CSI-ReportConfig is associated with the DL BWP indicated by bwp-Id in that CSI-ResourceConfig.
	resourcesForChannelMeasurement			CSI-ResourceConfigId,

	-- CSI IM resources for interference measurement. csi-ResourceConfigId of a CSI-ResourceConfig included in the configuration of the serving cell
	-- indicated with the field "carrier" above. The bwp-Id in that CSI-ResourceConfigToAddMod is the same value like the bwp-Id in the
	-- CSI-ResourceConfig indicated by resourcesForChannelMeasurement.
	csi-IM-ResourcesForInterference			CSI-ResourceConfigId	OPTIONAL,	-- Need R

	-- NZP CSI RS resources for interference measurement. csi-ResourceConfigId of a CSI-ResourceConfigToAddMod included in the configuration of the 
	-- serving cell indicated with the field "carrier" above. The bwp-Id in that CSI-ResourceConfigToAddMod is the same value like the bwp-Id in the
	-- CSI-ResourceConfigToAddMod indicated by resourcesForChannelMeasurement.
	nzp-CSI-RS-ResourcesForInterference		CSI-ResourceConfigId	OPTIONAL, 	-- Need R

	-- Time domain behavior of reporting configuration
	reportConfigType						CHOICE {
		periodic								SEQUENCE {
			-- Periodicity and slot offset. Corresponds to L1 parameter 'ReportPeriodicity'and 'ReportSlotOffset' 
			-- (see 38.214, section section 5.2.1.4).
			reportSlotConfig						CSI-ReportPeriodicityAndOffset,
			-- Indicates which PUCCH resource to use for reporting on PUCCH.
			pucch-CSI-ResourceList					SEQUENCE (SIZE (1..maxNrofBWPs)) OF PUCCH-CSI-Resource
		},
		semiPersistentOnPUCCH					SEQUENCE {
			-- Periodicity and slot offset. Corresponds to L1 parameter 'ReportPeriodicity' and 'ReportSlotOffset' 
			-- (see 38.214, section section 5.2.1.4). 
			reportSlotConfig						CSI-ReportPeriodicityAndOffset,
			-- Indicates which PUCCH resource to use for reporting on PUCCH.
			pucch-CSI-ResourceList					SEQUENCE (SIZE (1..maxNrofBWPs)) OF PUCCH-CSI-Resource
		},
		semiPersistentOnPUSCH					SEQUENCE {
			-- Periodicity. Corresponds to L1 parameter 'Reportperiodicity-spCSI'. (see 38.214, section 5.2.1.1?FFS_Section)
			reportSlotConfig						ENUMERATED {sl5, sl10, sl20, sl40, sl80, sl160, sl320},
			-- Timing offset Y for aperiodic reporting using PUSCH. This field lists the allowed offset values. 
			-- A particular value is indicated in DCI. The first report is transmitted in slot n+Y, second report in n+Y+P,
			-- where P is the configured periodicity.
			reportSlotOffsetList				SEQUENCE (SIZE (1..4)) OF INTEGER (0..7),
			-- RNTI for SP CSI-RNTI, Corresponds to L1 parameter 'SPCSI-RNTI' (see 38.214, section 5.2.1.5.2)
			-- FFS: RAN1 models different RNTIs as different Search Spaces with independent configurations. Align the configuration 
			-- of this one (e.g. group with monitoring periodicity, PDCCH candidate configuration, DCI-Payload size...)?
			csi-RNTI								RNTI-Value,
			-- Index of the p0-alpha set determining the power control for this CSI report transmission. 
			-- Corresponds to L1 parameter 'SPCSI-p0alpha' (see 38.214, section FFS_Section)
			p0alpha									P0-PUSCH-AlphaSetId
		},
		aperiodic								SEQUENCE {
			-- Timing offset Y for aperiodic reporting using PUSCH. This field lists the allowed offset values. A particular value is indicated in DCI. 
			-- (see 38.214, section 5.2.3)
			-- FFS_Value: Range wasn’t final in RAN1 table. 
			-- FFS_FIXME: How are the DCI codepoints mapped to the allowed offsets?
			reportSlotOffsetList				SEQUENCE (SIZE (1..16)) OF INTEGER (0..7)
		}
	},
	-- The CSI related quanities to report. Corresponds to L1 parameter 'ReportQuantity' (see 38.214, section REF)
	reportQuantity							CHOICE {
		none									NULL,
		cri-RI-PMI-CQI							NULL, 
		cri-RI-i1								NULL, 
		cri-RI-i1-CQI							SEQUENCE {
			-- PRB bundling size to assume for CQI calcuation when reportQuantity is CRI/RI/i1/CQI
			-- Corresponds to L1 parameter 'PDSCH-bundle-size-for-CSI' (see 38.214, section 5.2.1.4)
			pdsch-BundleSizeForCSI					ENUMERATED {n2, n4}		OPTIONAL
		}, 
		cri-RI-CQI								NULL, 
		cri-RSRP								NULL, 
		ssb-Index-RSRP							NULL,
		cri-RI-LI-PMI-CQI						NULL
	},
	-- Reporting configuration in the frequency domain. (see 38.214, section 5.2.1.4)
	reportFreqConfiguration					 SEQUENCE {
		-- Indicates whether the UE shall report a single (wideband) or multiple (subband) CQI. (see 38.214, section 5.2.1.4)
		cqi-FormatIndicator						ENUMERATED { widebandCQI, subbandCQI },
		-- Indicates whether the UE shall report a single (wideband) or multiple (subband) PMI. (see 38.214, section 5.2.1.4)
		pmi-FormatIndicator						ENUMERATED { widebandPMI, subbandPMI },
		-- Indicates a contiguous or non-contigous subset of subbands in the bandwidth part which CSI shall be reported 
		-- for. Each bit in the bit-string represents one subband. The right-most bit in the bit string represents the 
		-- lowest subband in the BWP. (see 38.214, section 5.2.1.4)
		-- The number of subbands is determined according to 38.214 section 5.2.1.4. It is absent if there are less than 24 PRBs (no sub band)
		-- and present otherwise, the number of sub bands can be from 3 (24 PRBs, sub band size 8) to 18 (72 PRBs, sub band size 4).
		csi-ReportingBand						CHOICE {
			subbands3								BIT STRING(SIZE(3)),
			subbands4								BIT STRING(SIZE(4)),
			subbands5								BIT STRING(SIZE(5)),
			subbands6								BIT STRING(SIZE(6)),
			subbands7								BIT STRING(SIZE(7)),
			subbands8								BIT STRING(SIZE(8)),
			subbands9								BIT STRING(SIZE(9)),
			subbands10								BIT STRING(SIZE(10)),
			subbands11								BIT STRING(SIZE(11)),
			subbands12								BIT STRING(SIZE(12)),
			subbands13								BIT STRING(SIZE(13)),
			subbands14								BIT STRING(SIZE(14)),
			subbands15								BIT STRING(SIZE(15)),
			subbands16								BIT STRING(SIZE(16)),
			subbands17								BIT STRING(SIZE(17)),
			subbands18								BIT STRING(SIZE(18)),
			...
		}	OPTIONAL	-- Need S

	},
	-- Time domain measurement restriction for the channel (signal) measurements. 
	-- Corresponds to L1 parameter 'MeasRestrictionConfig-time-channel' (see 38.214, section 5.2.1.1)
	timeRestrictionForChannelMeasurements				ENUMERATED {configured, notConfigured},
	-- Time domain measurement restriction for interference measurements. 
	-- Corresponds to L1 parameter 'MeasRestrictionConfig-time-interference' (see 38.214, section 5.2.1.1)
	timeRestrictionForInterferenceMeasurements			ENUMERATED {configured, notConfigured},
	-- Codebook configuration for Type-1 or Type-II including codebook subset restriction
	codebookConfig								CodebookConfig,
	-- Maximum number of CQIs per CSI report (cf. 1 for 1-CW, 2 for 2-CW)	
	nrofCQIsPerReport							ENUMERATED {n1, n2},
	-- Turning on/off group beam based reporting (see 38.214, section 5.2.1.4)	
	groupBasedBeamReporting						CHOICE {
		enabled										NULL,
		disabled 									SEQUENCE {
			-- The number (N) of measured RS resources to be reported per report setting in a non-group-based report. 
			-- N <= N_max, where N_max is either 2 or 4 depending on UE capability. 
			-- FFS: The signaling mechanism for the gNB to select a subset of N beams for the UE to measure and report. 
			-- FFS: Note: this parameter may not be needed for certain resource and/or report settings
			-- FFS_ASN1: Change groupBasedBeamReporting into a CHOICE and include this field into the "no" option?
			-- (see 38.214, section FFS_Section)
			-- When the field is absent the UE applies the value 1
			nrofReportedRS							ENUMERATED {n1, n2, n3, n4}												OPTIONAL	-- Need S
		}
	},

	-- Which CQI table to use for CQI calculation. Corresponds to L1 parameter 'CQI-table' (see 38.214, section 5.2.2.1)
	cqi-Table								ENUMERATED {table1, table2, spare2, spare1}										OPTIONAL,
	-- Indicates one out of two possible BWP-dependent values for the subband size as indicated in 38.214 table 5.2.1.4-2
	-- Corresponds to L1 parameter 'SubbandSize' (see 38.214, section 5.2.1.4)
	subbandSize								ENUMERATED {value1, value2},
	-- BLER target that the UE shall be assume in its CQI calculation.
	-- Corresponds to L1 parameter 'BLER-Target' (see 38.214, section 5.2.2.1)
	-- FFS_Values (now filled with spares)
	bler-Target								ENUMERATED {zerodot1, spare3, space2, spare1}										OPTIONAL,
	-- Port indication for RI/CQI calculation. For each  CSI-RS resource in the linked ResourceConfig for channel measurement, 
	-- a port indication for each rank R, indicating which R ports to use. Applicable only for non-PMI feedback.
	-- Corresponds to L1 parameter 'Non-PMI-PortIndication' (see 38.214, section FFS_Section)
	-- The first entry in non-PMI-PortIndication corresponds to the NZP-CSI-RS-Resource indicated by the first entry in
	-- nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the
	-- CSI-ResourceConfig whose CSI-ResourceConfigId is indicated in a CSI-MeasId together with the above CSI-ReportConfigId,
	-- the second entry in non-PMI-PortIndication corresponds to the NZP-CSI-RS-Resource indicated by the second entry in
	-- nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the
	-- same CSI-ResourceConfig, and so on until the NZP-CSI-RS-Resource indicated by the last entry in nzp-CSI-RS-Resources
	-- in the in the NZP-CSI-RS-ResourceSet indicated in the first entry of nzp-CSI-RS-ResourceSetList of the
	-- same CSI-ResourceConfig, then the next entry corresponds to the NZP-CSI-RS-Resource indicated by the first entry
	-- in nzp-CSI-RS-Resources in the NZP-CSI-RS-ResourceSet indicated in the second entry of nzp-CSI-RS-ResourceSetList of the
	-- same CSI-ResourceConfig and so on.
	non-PMI-PortIndication					SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourcesPerConfig)) OF PortIndexFor8Ranks		OPTIONAL,	...
}

CSI-ReportPeriodicityAndOffset ::= CHOICE {
	slots4								INTEGER(0..3),
	slots5								INTEGER(0..4),
	slots8								INTEGER(0..7),
	slots10								INTEGER(0..9),
	slots16								INTEGER(0..15),
	slots20								INTEGER(0..19),
	slots40								INTEGER(0..39),
	slots80								INTEGER(0..79),
	slots160							INTEGER(0..159),
	slots320							INTEGER(0..319)
}

PUCCH-CSI-Resource ::= 				CHOICE {
	uplinkBandwidthPartId				BWP-Id,
	-- PUCCH resource for the associated uplink BWP. Only PUCCH-Resource of format 2, 3 and 4 is supported.
	pucch-Resource						PUCCH-Resource
}

-- The PortIndexFor8Ranks allows to indicate port indexes for 1 to 8 ranks using a port index ranges from 0 to 31, or from 0 to 15, or from 0
-- to 7, or from 0 to 3, or from 0 to 1, or with 0 only.

PortIndexFor8Ranks ::=	CHOICE {
	portIndex8				SEQUENCE{
		rank1-8					PortIndex8,
		rank2-8					SEQUENCE(SIZE(1..2)) OF PortIndex8,
		rank3-8					SEQUENCE(SIZE(1..3)) OF PortIndex8,
		rank4-8					SEQUENCE(SIZE(1..4)) OF PortIndex8,
		rank5-8					SEQUENCE(SIZE(1..5)) OF PortIndex8,
		rank6-8					SEQUENCE(SIZE(1..6)) OF PortIndex8,
		rank7-8					SEQUENCE(SIZE(1..7)) OF PortIndex8,
		rank8-8					SEQUENCE(SIZE(1..8)) OF PortIndex8
	},
	portIndex4				SEQUENCE{
		rank1-4					PortIndex4,
		rank2-4					SEQUENCE(SIZE(1..2)) OF PortIndex4,
		rank3-4					SEQUENCE(SIZE(1..3)) OF PortIndex4,
		rank4-4					SEQUENCE(SIZE(1..4)) OF PortIndex4
	},
	portIndex2				SEQUENCE{
		rank1-2					PortIndex2,
		rank2-2					SEQUENCE(SIZE(1..2)) OF PortIndex2
	},
	portIndex1				NULL
}

PortIndex8::=	INTEGER (0..7)
PortIndex4::=	INTEGER (0..3)
PortIndex2::=	INTEGER (0..1)

maxNrofNZP-CSI-RS-ResourcesPerConfig	INTEGER ::=	128
-- TAG-CSI-REPORTCONFIG-STOP
-- ASN1STOP


–	CSI-ReportConfigId
The IE CSI-ReportConfigId is used to identify one CSI-ReportConfig.
CSI-ReportConfigId information element
-- ASN1START
-- TAG-CSI-REPORTCONFIGID-START
CSI-ReportConfigId ::= 					INTEGER (0..maxNrofCSI-ReportConfigurations-1)

-- TAG-CSI-REPORTCONFIGID-STOP
-- ASN1STOP

–	CSI-ResourceConfig
The IE CSI-ResourceConfig refers to one or more NZP-CSI-RS-ResourceSet, CSI-IM-ResourceSet and/or CSI-SSB-ResourceSet.
CSI-ResourceConfig information element
-- ASN1START
-- TAG-CSI-RESOURCECONFIG-START

-- One CSI resource configuration comprising of one or more resource sets
CSI-ResourceConfig ::= 		SEQUENCE {

	-- Used in CSI-ReportConfig to refer to an instance of CSI-ResourceConfig
	csi-ResourceConfigId				CSI-ResourceConfigId,

	-- Contains up to maxNrofNZP-CSI-RS-ResourceSetsPerConfig resource sets if ResourceConfigType is 'aperiodic' and 1 otherwise.
	-- Corresponds to L1 parameter 'ResourceSetConfigList' (see 38.214, section 5.2.1.3.1)	
	csi-RS-ResourceSetList 	 			CHOICE {
		nzp-CSI-RS-SSB 						SEQUENCE {
			nzp-CSI-RS-ResourceSetList			SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourceSetsPerConfig)) OF NZP-CSI-RS-ResourceSetId OPTIONAL,
			-- List of SSB resources used for beam measurement and reporting in a resource set
			-- Corresponds to L1 parameter 'resource-config-SS-list' (see 38,214, section FFS_Section)
			csi-SSB-ResourceSetList				SEQUENCE (SIZE (1..maxNrofCSI-SSB-ResourceSetsPerConfig)) OF CSI-SSB-ResourceSetId	OPTIONAL
		},			
		csi-IM-ResourceSetList				SEQUENCE (SIZE (1..maxNrofCSI-IM-ResourceSetsPerConfig)) OF CSI-IM-ResourceSetId
	},


	-- The DL BWP which the CSI-RS associated with this CSI-ResourceConfig are located in. 
	-- Corresponds to L1 parameter 'BWP-Info' (see 38.214, section 5.2.1.2
	bwp-Id								BWP-Id,

	-- Time domain behavior of resource configuration. Corresponds to L1 parameter 'ResourceConfigType' (see 38.214, section 5.2.2.3.5)	
	resourceType						ENUMERATED { aperiodic, semiPersistent, periodic },
	...
}

-- TAG-CSI-RESOURCECONFIGTOADDMOD-STOP
-- ASN1STOP

–	CSI-ResourceConfigId
The IE CSI-ResourceConfigId is used to identify a CSI-ResourceConfig.
CSI-ResourceConfigId information element
-- ASN1START
-- TAG-CSI-RESOURCECONFIGID-START
CSI-ResourceConfigId ::= INTEGER (0..maxNrofCSI-ResourceConfigurations-1)

-- TAG-CSI-RESOURCECONFIGID-STOP
-- ASN1STOP

–	CSI-ResourcePeriodicityAndOffset
The IE CSI-ResourcePeriodicityAndOffset is used to configure a periodicity and a corresponding offset for periodic and semi-persistent CSI resources, and for periodic and semi-persistent reporting on PUCCH. both, the periodicity and the offset are given in number of slots. The periodicity value slots4 corresponds to 4 slots, slots5 corresponds to 5 slots, and so on.
CSI-ResourcePeriodicityAndOffset information element
-- ASN1START
-- TAG-CSI-RESOURCEPERIODICITYANDOFFSET-START

CSI-ResourcePeriodicityAndOffset ::=	CHOICE {
	slots4							INTEGER (0..3), 
	slots5							INTEGER (0..4), 
	slots8							INTEGER (0..7), 
	slots10							INTEGER (0..9), 
	slots16							INTEGER (0..15), 
	slots20							INTEGER (0..19), 
	slots32							INTEGER (0..31), 
	slots40							INTEGER (0..39), 
	slots64							INTEGER (0..63), 
	slots80							INTEGER (0..79), 
	slots160						INTEGER (0..159), 
	slots320						INTEGER (0..319), 
	slots640						INTEGER (0..639)
}

-- TAG-CSI-RESIYRCEPERIODICITYANDOFFSET-STOP
-- ASN1STOP

–	CSI-RS-ResourceMapping
The IE CSI-RS-ResourceMapping is used to configure the resource element mapping of a CSI-RS resource in time- and frequency domain.
CSI-RS-ResourceMapping information element
-- ASN1START
-- TAG-CSI-RS-RESOURCEMAPPING-START

CSI-RS-ResourceMapping ::= 				SEQUENCE {
	-- Frequency domain allocation within a physical resource block in accordance with 38.211, section 7.4.1.5.3 including table 7.4.1.5.2-1.
	-- The number of bits that may be set to one depend on the chosen row in that table. For the choice "other", the row can be determined from
	-- the parmeters below and from the number of bits set to 1 in frequencyDomainAllocation.
	frequencyDomainAllocation			CHOICE {
		row1								BIT STRING (SIZE (4)),
		row2								BIT STRING (SIZE (12)),
		row4								BIT STRING (SIZE (3)),
		other								BIT STRING (SIZE (6))
	},
	-- Number of ports (see 38.214, section 5.2.2.3.1)
	nrofPorts							ENUMERATED {p1,p2,p4,p8,p12,p16,p24,p32},
	-- Time domain allocation within a physical resource block. The field indicates the first OFDM symbol in the PRB used for CSI-RS.
	-- Parameter l0 in 38.211, section 7.4.1.5.3. Value 2 is supported only when DL-DMRS-typeA-pos equals 3.
	firstOFDMSymbolInTimeDomain			INTEGER (0..13),
	-- Time domain allocation within a physical resource block. Parameter l1 in 38.211, section 7.4.1.5.3.
	firstOFDMSymbolInTimeDomain2		INTEGER (0..13)																OPTIONAL,	-- Need R
	-- CDM type (see 38.214, section 5.2.2.3.1)	
	cdm-Type								ENUMERATED {noCDM, fd-CDM2, cdm4-FD2-TD2, cdm8-FD2-TD4},
	-- Density of CSI-RS resource measured in RE/port/PRB. Corresponds to L1 parameter 'CSI-RS-Density'  (see 38.211, section 7.4.1.5.3)
	-- Values 0.5 (dot5), 1 (one) and 3 (three) are allowed for X=1,
	-- values 0.5 (dot5) and 1 (one) are allowed for X=2, 16, 24 and 32,
	-- value 1 (one) is allowed for X=4, 8, 12.
	-- For density = 1/2, includes 1 bit indication for RB level comb offset indicating  whether odd or even RBs are occupied by CSI-RS
	density									CHOICE {
		dot5									ENUMERATED {evenPRBs, oddPRBs}, 
		one										NULL, 
		three									NULL, 
		spare									NULL
	},
	-- Wideband or partial band CSI-RS. Corresponds to L1 parameter 'CSI-RS-FreqBand' (see 38.214, section 5.2.2.3.1)	
	freqBand								CSI-FrequencyOccupation,
	...
}

-- TAG-CSI-RS-RESOURCEMAPPING-STOP
-- ASN1STOP

–	CSI-SemiPersistentOnPUSCH-TriggerStateList
The CSI-SemiPersistentOnPUSCH-TriggerStateList IE is used to configure the UE with list of trigger states for semi-persistent reporting of channel state information on L1.  . See also 38.214, section 5.2.
CSI-SemiPersistentOnPUSCH-TriggerStateList information element
-- ASN1START
-- TAG-CSI-SEMIPERSISTENTONPUSCHTRIGGERSTATELIST-START

CSI-SemiPersistentOnPUSCH-TriggerStateList ::=	SEQUENCE(SIZE (1..maxNrOfSemiPersistentPUSCH-Triggers)) OF CSI-SemiPersistentOnPUSCH-TriggerState
CSI-SemiPersistentOnPUSCH-TriggerState ::=		SEQUENCE {
	associatedReportConfigInfo						CSI-ReportConfigId,
	...
}

maxNrOfSemiPersistentPUSCH-Triggers					INTEGER ::= 64		-- Maximum number of triggers for semi persistent reporting on PUSCH

-- TAG-CSI-SEMIPERSISTENTONPUSCHTRIGGERSTATELIST-STOP 
-- ASN1STOP

–	CSI-SSB-ResourceSetId
The IE CSI-SSB-ResourceSetId is used to identify one SS/PBCH block resource set.
CSI-SSB-ResourceId information element
-- ASN1START
-- TAG-CSI-SSB-RESOURCESETID-START

CSI-SSB-ResourceSetId ::=	INTEGER (0..maxNrofCSI-SSB-ResourceSets-1)

-- TAG-CSI-SSB-RESOURCESETID-STOP
-- ASN1STOP

–	CSI-SSB-ResourceSet
The IE CSI-SSB-ResourceSet is used to configure one SS/PBCH block resource set which refers to SS/PBCH as indicated in ServingCellConfigCommon.
CSI-SSB-ResourceSet information element
-- ASN1START
-- TAG-CSI-SSB-RESOURCESET-START

CSI-SSB-ResourceSet ::=						SEQUENCE {
	csi-SSB-ResourceSetId						CSI-SSB-ResourceSetId,
	csi-SSB-ResourceList						SEQUENCE (SIZE(1..maxNrofCSI-SSB-ResourcePerSet)) OF SSB-Index,
	...
}

-- TAG-CSI-SSB-RESOURCESET-STOP
-- ASN1STOP

–	DMRS-DownlinkConfig
The IE DMRS-DownlinkConfig is used to configure downlink demodulation reference signals for PDSCH.
DMRS-DownlinkConfig information element
-- ASN1START
-- TAG-DMRS-DOWNLINKCONFIG-START

DMRS-DownlinkConfig ::=					SEQUENCE {
	-- Selection of the DMRS type to be used for DL (see 38.211, section 7.4.1.1.1).
	-- If the field is absent, the UE uses DMRS type 1.
	dmrs-Type								ENUMERATED {type2}													OPTIONAL,	-- Need R
	-- Position for additional DM-RS in DL, see Table 7.4.1.1.2-4 in 38.211. 
	-- The four values represent the cases of 1+0, 1+1, 1+1+1. 1+1+1+1 non-adjacent OFDM symbols for DL.
	-- If the field is absent, the UE applies the value pos2.
	dmrs-AdditionalPosition					ENUMERATED {pos0, pos1, pos3}										OPTIONAL,	-- Need R
	-- DM-RS groups that are QCL:ed, i.e. group 1 (see 38.214, section 5.1)
	dmrs-group1								BIT STRING (SIZE (12))												OPTIONAL,	-- Need R
	-- DM-RS groups that are QCL:ed, i.e. group 2 (see 38.214, section 5.1)
	dmrs-group2								BIT STRING (SIZE (12))												OPTIONAL,	-- Need R
	-- The maximum number of OFDM symbols for DL front loaded DMRS. 'len1' corresponds to value 1. 'len2 corresponds to value 2.
	-- If the field is absent, the UE applies value len1.
	-- Corresponds to L1 parameter 'DL-DMRS-max-len' (see 38.214, section 5.1)
	maxLength								ENUMERATED {len2}													OPTIONAL, 	-- Need R
	-- DL DMRS scrambling initalization
	-- Corresponds to L1 parameter 'n_SCID 0' (see 38.211, section 7.4.1)
	-- When the field is absent the UE applies the value Physical cell ID (physCellId) configured for this serving cell."
	scramblingID0							INTEGER (0..65535)													OPTIONAL, 	-- Need S
	-- DL DMRS scrambling initalization. Corresponds to L1 parameter 'n_SCID 1' (see 38.211, section 7.4.1)
	-- When the field is absent the UE applies the value (physCellId) configured for this serving cell.
	scramblingID1							INTEGER (0..65535)													OPTIONAL, 	-- Need S

	-- Configures downlink PTRS. If absent of released, the UE assumes that downlink PTRS are not present. See 38.214 section 5.1.6.3
	phaseTrackingRS						SetupRelease { PTRS-DownlinkConfig	}									OPTIONAL,	-- Need M

	...
}

-- TAG-DMRS-DOWNLINKCONFIG-STOP
-- ASN1STOP

–	DMRS-UplinkConfig
The IE DMRS-UplinkConfig is used to configure FFS
DMRS-UplinkConfig information element
-- ASN1START
-- TAG-DMRS-UPLINKCONFIG-START

DMRS-UplinkConfig ::=					SEQUENCE {
	-- Selection of the DMRS type to be used for UL (see section 38.211, section 6.4.1.1.3)
	-- If the field is absent, the UE uses DMRS type 1.
	dmrs-Type								ENUMERATED {type2} 													OPTIONAL,	-- Need R
	-- Position for additional DM-RS in UL. Corresponds to L1 parameter 'UL-DMRS-add-pos' (see Table 7.4.1.1.2-4 in 38.211) 
	-- The four values represent the cases of 1+0, 1+1, 1+1+1. 1+1+1+1 non-adjacent OFDM symbols for UL. 
	-- If the field is absent, the UE applies the value pos2.
	dmrs-AdditionalPosition					ENUMERATED {pos0, pos1, pos3}										OPTIONAL,	-- Need R
	-- Configures uplink PTRS (see 38.211, section x.x.x.x) FFS_Ref
	phaseTrackingRS						SetupRelease { PTRS-UplinkConfig }										OPTIONAL,	-- Need M
	-- The maximum number of OFDM symbols for UL front loaded DMRS. 'len1' corresponds to value 1. 'len2 corresponds to value 2.
	-- If the field is absent, the UE applies value len1.
	-- Corresponds to L1 parameter 'UL-DMRS-max-len' (see 38.214, section 6.4.1.1.2)
	maxLength								ENUMERATED {len2}													OPTIONAL, 	-- Need R

	transformPrecoding					CHOICE {
		-- DMRS related parameters for Cyclic Prefix OFDM
		disabled									SEQUENCE {
			-- UL DMRS scrambling initalization for CP-OFDM
			-- Corresponds to L1 parameter 'n_SCID 0' (see 38.214, section 6.4.1.1.2)
			-- When the field is absent the UE applies the value Physical cell ID (physCellId)
			scramblingID0							INTEGER (0..65535)											OPTIONAL,	-- Need S
			-- UL DMRS scrambling initalization for CP-OFDM.
			-- Corresponds to L1 parameter 'n_SCID 1' (see 38.214, section 6.4.1.1.2)
			-- When the field is absent the UE applies the value Physical cell ID (physCellId)
			scramblingID1							INTEGER (0..65535)											OPTIONAL		-- Need S

		},
		-- DMRS related parameters for DFT-s-OFDM (Transform Precoding)
		enabled								SEQUENCE {
			-- Parameter: N_ID^(PUSCH) for DFT-s-OFDM DMRS. If the value is absent or released, the UE uses the Physical cell ID.
			-- Corresponds to L1 parameter 'nPUSCH-Identity-Transform precoding' (see 38.211, section FFS_Section)
			nPUSCH-Identity							INTEGER(0..1007)											OPTIONAL,	-- Need S
			-- Sequence-group hopping for PUSCH can be disabled for a certain UE despite being enabled on a cell basis. For DFT-s-OFDM DMRS
			-- If the field is released, the UE considers group hopping to be enabled.
			-- Corresponds to L1 parameter 'Disable-sequence-group-hopping-Transform-precoding' (see 38.211, section FFS_Section)
			disableSequenceGroupHopping				ENUMERATED {disabled}										OPTIONAL,	-- Need S
			-- Determines if sequence hopping is enabled or not. For DFT-s-OFDM DMRS. 
			-- If the field is released, the UE considers sequence hopping to be disabled.
			-- Corresponds to L1 parameter 'Sequence-hopping-enabled-Transform-precoding' (see 38.211, section FFS_Section)
			sequenceHoppingEnabled					ENUMERATED {enabled}										OPTIONAL	-- Need S
		}
	},
	...
}

-- TAG-DMRS-UPLINKCONFIG-STOP
-- ASN1STOP

–	DownlinkPreemption
The IE DownlinkPreemption is used to configure the UE to monitor PDCCH for the INT-RNTI (interruption). 
DownlinkPreemption information element
-- ASN1START
-- TAG-DOWNLINKPREEMPTION-START

-- Configuration of downlink preemption indication on PDCCH.
DownlinkPreemption ::=						SEQUENCE {
	-- RNTI used for indication pre-emption in DL. 
	-- Corresponds to L1 parameter 'INT-RNTI', where ”INT” stands for ”interruption” (see 38.213, section 10)
	int-RNTI								RNTI-Value,

	-- Set selection for DL-preemption indication. Corresponds to L1 parameter 'int-TF-unit' (see 38.213, section 10.1)
	-- The set determines how the UE interprets the DL preemption DCI payload.
	timeFrequencySet						ENUMERATED {set0, set1},

	-- Total length of the DCI payload scrambled with INT-RNTI. The value must be an integer multiple of 14 bit.
	-- Corresponds to L1 parameter 'INT-DCI-payload-length' (see 38.213, section 11.2)
	dci-PayloadSize							INTEGER (0..maxINT-DCI-PayloadSize),

	-- Indicates (per serving cell) the position of the 14 bit INT values inside the DCI payload. 
	-- Corresponds to L1 parameter 'INT-cell-to-INT' and 'cell-to-INT' (see 38.213, section 11.2)
	int-ConfigurationPerServingCell			SEQUENCE (SIZE (1..maxNrofServingCells)) OF INT-ConfigurationPerServingCell,
	...
}

INT-ConfigurationPerServingCell ::= 		SEQUENCE {
	servingCellId							ServCellIndex,
	-- Starting position (in number of bit) of the 14 bit INT value applicable for this serving cell (servingCellId) within the DCI 
	-- payload. Must be multiples of 14 (bit). Corresponds to L1 parameter 'INT-values' (see 38.213, section 11.2)
	positionInDCI							INTEGER (0..maxINT-DCI-PayloadSize-1)
}

-- TAG-DOWNLINKPREEMPTION-STOP
-- ASN1STOP

–	DRB-Identity
The IE DRB-Identity is used to identify a DRB used by a UE.
DRB-Identity information elements
-- ASN1START
-- TAG-DRB-IDENTITY-START

DRB-Identity ::=					INTEGER (1..32)

-- TAG-DRB-IDENTITY-STOP
-- ASN1STOP

–	EUTRA-MBSFN-SubframeConfigList
The IE EUTRA-MBSFN-SubframeConfigList is used to define an E-UTRA MBSFN subframe pattern (for the purpose of NR rate matching).
EUTRA-MBSFN-SubframeConfigList information element
-- ASN1START
-- TAG-EUTRA-MBSFN-SUBFRAMECONFIGLIST-START

EUTRA-MBSFN-SubframeConfigList ::= 		SEQUENCE (SIZE (1..maxMBSFN-Allocations)) OF EUTRA-MBSFN-SubframeConfig

EUTRA-MBSFN-SubframeConfig ::=			SEQUENCE {
	-- Field as defined in MBSFN-SubframeConfig in 36.331 
	radioframeAllocationPeriod			ENUMERATED {n1, n2, n4, n8, n16, n32},
	-- Field as defined in MBSFN-SubframeConfig in 36.331 
	radioframeAllocationOffset			INTEGER (0..7),
	-- Field as defined in MBSFN-SubframeConfig in 36.331 
	subframeAllocation					CHOICE {
		-- Field as defined in MBSFN-SubframeConfig in 36.331 
		oneFrame							BIT STRING (SIZE(6)),
		-- Field as defined in MBSFN-SubframeConfig in 36.331 
		fourFrames							BIT STRING (SIZE(24))
	},
	subframeAllocation-v1430			CHOICE {
		-- Field as defined in MBSFN-SubframeConfig in 36.331 
		oneFrame-v1430						BIT STRING (SIZE(2)),
		-- Field as defined in MBSFN-SubframeConfig in 36.331 
		fourFrames-v1430					BIT STRING (SIZE(8))
	}																														OPTIONAL,	-- Need R
	...
}

-- TAG-EUTRA-MBSFN-SUBFRAMECONFIGLIST-STOP
-- ASN1STOP

–	FilterCoefficient
The IE FilterCoefficient specifies the measurement filtering coefficient. Value fc0 corresponds to k = 0, fc1 corresponds to k = 1, and so on.
FilterCoefficient information element
-- ASN1START

FilterCoefficient ::=					ENUMERATED {
											fc0, fc1, fc2, fc3, fc4, fc5,
											fc6, fc7, fc8, fc9, fc11, fc13, 
											fc15, fc17, fc19, spare1, ...}

-- ASN1STOP

Editor’s Note: Values should be checked.
–	FreqBandIndicatorNR
The IE FreqBandIndicatorNR is used to convey an NR frequency band number as defined in 38.101.
FreqBandIndicatorNR information element
-- ASN1START
-- TAG-FREQBANDINDICATORNR-START

FreqBandIndicatorNR ::=     		INTEGER (1..1024)

-- TAG-FREQBANDINDICATORNR-STOP
-- ASN1STOP

–	FrequencyInfoDL
The IE FrequencyInfoDL provides basic parameters of a downlink carrier and transmission thereon. 
FrequencyInfoDL information element
-- ASN1START
-- TAG-FREQUENCY-INFO-DL-START

FrequencyInfoDL ::= 				SEQUENCE {
	-- Frequency of the SSB to be used for this serving cell. The frequency provided in this field identifies the position of 
	-- resource element RE=#0 (subcarrier #0) of resource block RB#10 of the SS block. The cell-defining SSB of an SpCell is always on
	-- the sync raster. Frequencies are considered to be on the sync raster if they are also identifiable with a GSCN value (see 38.101).
	absoluteFrequencySSB					ARFCN-ValueNR,
	-- The frequency domain offset between SSB and the overall resource block grid in number of subcarriers. 
	-- Absence of the field indicates that no offset is applied (offset = 0). For FR2 only values up to 11 are applicable. 
	-- Corresponds to L1 parameter kssb (See 38.211, section 7.4.3.1)
	ssb-SubcarrierOffset					INTEGER (1..23)																OPTIONAL,	-- Need S
	-- List of one or multiple frequency bands to which this carrier(s) belongs. Multiple values are only supported in 
	-- system information but not when the FrequencyInfoDL is provided in dedicated signalling (HO or S(p)Cell addition).
	frequencyBandList					MultiFrequencyBandListNR,
	-- Absolute frequency position of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A. 
	-- Note that the lower edge of the actual carrier is not defined by this field but rather in the scs-SpecificCarrierList.
	-- Corresponds to L1 parameter 'offset-ref-low-scs-ref-PRB' (see 38.211, section FFS_Section)
	absoluteFrequencyPointA					ARFCN-ValueNR,

	-- A set of carriers for different subcarrier spacings (numerologies). Defined in relation to Point A.
	-- Corresponds to L1 parameter 'offset-pointA-set' (see 38.211, section FFS_Section)
	scs-SpecificCarrierList					SEQUENCE (SIZE (1..maxSCSs)) OF SCS-SpecificCarrier,
	...
}

-- TAG-FREQUENCY-INFO-UL-STOP
-- ASN1STOP

–	FrequencyInfoUL
The IE FrequencyInfoUL provides basic parameters of an uplink carrier and transmission thereon. 
FrequencyInfoUL information element
-- ASN1START
-- TAG-FREQUENCY-INFO-UL-START

FrequencyInfoUL ::= 				SEQUENCE {
	-- List of one or multiple frequency bands to which this carrier(s) belongs. Multiple values are only supported in 
	-- system information but not when the FrequencyInfoDL is provided in dedicated signalling (HO or S(p)Cell addition).
	frequencyBandList					MultiFrequencyBandListNR										OPTIONAL,	-- Cond FDD-OrSUL
	-- Absolute frequency of the reference resource block (Common RB 0). Its lowest subcarrier is also known as Point A.
	-- Corresponds to L1 parameter 'offset-ref-low-scs-ref-PRB' (see 38.211, section FFS_Section)
	absoluteFrequencyPointA						ARFCN-ValueNR					OPTIONAL,	-- Cond FDD-OrSUL
	-- A set of virtual carriers for different subcarrier spacings (numerologies). Defined in relation to Point A.
	-- Note that the lower edge of the actual carrier is not defined by this field but rather in the scs-SpecificCarrierList.
	-- Corresponds to L1 parameter 'offset-pointA-set' (see 38.211, section FFS_Section)
	scs-SpecificCarriers				SEQUENCE (SIZE (1..maxSCSs)) OF SCS-SpecificCarrier,

	-- The additional spectrum emission requirements to be applied by the UE on this uplink. 
	-- If the field is absent, the UE applies the value FFS_RAN4. (see FFS_section, section FFS_Section)
	additionalSpectrumEmission			AdditionalSpectrumEmission										OPTIONAL,	-- Need S
	-- FFS_Definition. Corresponds to parameter FFS_RAN4. (see FFS_Spec, section FFS_Section)
	-- If the field is absent, the UE applies the value FFS_RAN4.
	p-Max								P-Max															OPTIONAL,	-- Need S
	-- Enable the NR UL transmission with a 7.5KHz shift to the LTE raster. If the field is absent, the frequency shift is disabled.
	frequencyShift7p5khz				ENUMERATED {true}												OPTIONAL,	-- Cond FDD-OrSUL-Optional
	...
}

-- TAG-FREQUENCY-INFO-UL-STOP
-- ASN1STOP

Conditional PresenceExplanationFDD-OrSULThe field is mandatory present if this FrequencyInfoUL is for the paired UL for a DL (defined in a FrequencyInfoDL) or if this FrequencyInfoUL is for a supplementary uplink (SUL). It is absent otherwise (if this FrequencyInfoUL is for an unpaired UL (TDD).FDD-OrSUL-OptionalThe field is optionally present, Need R, if this FrequencyInfoUL is for the paired UL for a DL (defined in a FrequencyInfoDL) or if this FrequencyInfoUL is for a supplementary uplink (SUL). It is absent otherwise.
–	GSCN-ValueNR
The IE GSCN-ValueNR is used to indicate the frequency positions of the SS/PBCH Blocks, as defined in TS 38.101 [15].
-- ASN1START
-- TAG-GSCN-VALUE-NR-START

GSCN-ValueNR ::=				INTEGER (1..28557)


-- TAG-GSCN-VALUE-NR-STOP
-- ASN1STOP

–	Hysteresis
The IE Hysteresis is a parameter used within the entry and leave condition of an event triggered reporting condition. The actual value is field value * 0.5 dB.
Hysteresis information element
-- ASN1START

Hysteresis ::=							INTEGER (0..30)

-- ASN1STOP
Editor’s Note: Values should be checked.

-	LogicalChannelConfig
The IE LogicalChannelConfig is used to configure the logical channel parameters.
LogicalChannelConfig information element
-- ASN1START
-- TAG-LOGICAL-CHANNEL-CONFIG-START

LogicalChannelConfig ::=		SEQUENCE {
	ul-SpecificParameters			SEQUENCE {
		priority						INTEGER (1..16),
		prioritisedBitRate				ENUMERATED {kBps0, kBps8, kBps16, kBps32, kBps64, kBps128, kBps256, kBps512, 
											kBps1024, kBps2048, kBps4096, kBps8192, kBps16384, kBps32768, kBps65536, infinity},
		bucketSizeDuration				ENUMERATED {ms50, ms100, ms150, ms300, ms500, ms1000, spare2, spare1},

		allowedServingCells				SEQUENCE (SIZE (1..maxNrofServingCells-1)) OF ServCellIndex					OPTIONAL,	-- Need R
		allowedSCS-List					SEQUENCE (SIZE (1..maxSCSs)) OF SubcarrierSpacing							OPTIONAL,	-- Need R
		maxPUSCH-Duration				ENUMERATED { ms0p02, ms0p04, ms0p0625, ms0p125, ms0p25, ms0p5, spare2, spare1 }												OPTIONAL,	-- Need R
		configuredGrantType1Allowed		ENUMERATED {true}															OPTIONAL,	-- Need R

		logicalChannelGroup				INTEGER (0..maxLCG-ID)														OPTIONAL, 	-- Need R
		schedulingRequestID				SchedulingRequestId															OPTIONAL,	-- Need R
		logicalChannelSR-Mask			BOOLEAN,
		logicalChannelSR-DelayTimerApplied	BOOLEAN
	}																												OPTIONAL,		-- Cond UL

	-- other parameters
	...
}

-- TAG-LOGICAL-CHANNEL-CONFIG-STOP
-- ASN1STOP

LogicalChannelConfig field descriptionsallowedSCS-List
If present, UL MAC SDUs from this logical channel can only be mapped to the indicated numerology. Otherwise, UL MAC SDUs from this logical channel can be mapped to any configured numerology. Corresponds to ‘allowedSCS-List’ as specified in TS 38.321 [3].allowedServingCells
If present, UL MAC SDUs from this logical channel can only be mapped to the serving cells indicated in this list. Otherwise, UL MAC SDUs from this logical channel can be mapped to any configured serving cell of this cell group. Corresponds to 'allowedServingCells' in TS 38.321 [3].bucketSizeDuration
Value in ms. ms50 corresponds to 50ms, ms100 corresponds to 100ms, and so on.configuredGrantType1Allowed
If present, UL MAC SDUs from this logical channel can be transmitted on a configured grant type 1. Corresponds to 'configuredGrantType1Allowed' in TS 38.321 [3].logicalChannelGroup 
ID of the logical channel group, as specified in TS 38.321 [3], which the logical channel belongs to.logicalChannelSR-Mask
Indicates whether SR masking is configured for this logical channel.logicalChannelSR-DelayTimerApplied 
Indicates whether to apply the delay timer for SR transmission for this logical channel. Set to FALSE if logicalChannelSR-DelayTimer is not included in BSR-Config.maxPUSCH-Duration
If present, UL MAC SDUs from this logical channel can only be transmitted using uplink grants that result in a PUSCH duration shorter than or equal to the the duration indicated by this field. Otherwise, UL MAC SDUs from this logical channel can be transmitted using an uplink grant resulting in any PUSCH duration. Corresponds to "maxPUSCH-Duration' in TS 38.321 [3].priority
Logical channel priority, as specified in TS 38.321 [3].prioritisedBitRate
Value in kiloBytes/s. 0kBps corresponds to 0, 8kBps corresponds to 8 kiloBytes/s,16 kBps corresponds to 16 kiloBytes/s, and so on.   For SRBs, the value can only be set to infinity.schedulingRequestId
If present, it indicates the scheduling request configuration applicable for this logical channel, as specified in TS 38.321 [3].
Conditional PresenceExplanationULThe field is mandatory present for a logical channel with uplink if it serves DRB. It is optionally present for a logical channel with uplink if it serves an SRB. otherwise it is not present.
–	MAC-CellGroupConfig
The IE MAC-CellGroupConfig is used to configure MAC parameters for a cell group, including DRX.
MAC-CellGroupConfig information element
-- ASN1START
-- TAG-MAC-CELL-GROUP-CONFIG-START

MAC-CellGroupConfig ::= 			SEQUENCE {
	drx-Config							SetupRelease { DRX-Config }																OPTIONAL, -- Need M

	schedulingRequestConfig				SchedulingRequestConfig																OPTIONAL, -- Need M
	bsr-Config							BSR-Config																	OPTIONAL,	-- Need M
	tag-Config							TAG-Config																	OPTIONAL,	-- Need M	
	phr-Config							SetupRelease { PHR-Config }																OPTIONAL,	-- Need M
	-- FFS : configurable per SCell?
	skipUplinkTxDynamic					BOOLEAN,
	-- RNTI value for downlink SPS (see SPS-config) and uplink configured scheduling (see ConfiguredSchedulingConfig).
	cs-RNTI								SetupRelease { RNTI-Value }															OPTIONAL	-- Need M
}

DRX-Config ::=						SEQUENCE {
	drx-onDurationTimer					CHOICE {
											subMilliSeconds	INTEGER (1..31),
											milliSeconds	ENUMERATED {
											ms1, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, 
											ms80, ms100, ms200, ms300, ms400, ms500, ms600, ms800, ms1000, ms1200, 
											ms1600, spare9, spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1 }
											},
	drx-InactivityTimer					ENUMERATED { 
											ms0, ms1, ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40, ms50, ms60, ms80, 
											ms100, ms200, ms300, ms500, ms750, ms1280, ms1920, ms2560, spare9, spare8, 
											spare7, spare6, spare5, spare4, spare3, spare2, spare1},
	drx-HARQ-RTT-TimerDL				INTEGER (0..56),
	drx-HARQ-RTT-TimerUL				INTEGER (0..56),
	drx-RetransmissionTimerDL			ENUMERATED { 
											sl0, sl1, sl2, sl4, sl6, sl8, sl16, sl24, sl33, sl40, sl64, sl80, sl96, sl112, sl128, 
											sl160, sl320, spare15, spare14, spare13, spare12, spare11, spare10, spare9, 
											spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1},
	drx-RetransmissionTimerUL			ENUMERATED {
											sl0, sl1, sl2, sl4, sl6, sl8, sl16, sl24, sl33, sl40, sl64, sl80, sl96, sl112, sl128, 
											sl160, sl320, spare15, spare14, spare13, spare12, spare11, spare10, spare9, 
											spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1 },
	drx-LongCycleStartOffset		CHOICE {
		ms10							INTEGER(0..9),
		ms20							INTEGER(0..19),
		ms32							INTEGER(0..31),
		ms40							INTEGER(0..39),
		ms60							INTEGER(0..59),
		ms64							INTEGER(0..63),
		ms70							INTEGER(0..69),
		ms80							INTEGER(0..79),
		ms128							INTEGER(0..127),
		ms160							INTEGER(0..159),
		ms256							INTEGER(0..255),
		ms320							INTEGER(0..319),
		ms512							INTEGER(0..511),
		ms640							INTEGER(0..639),
		ms1024							INTEGER(0..1023),
		ms1280							INTEGER(0..1279),
		ms2048							INTEGER(0..2047),
		ms2560							INTEGER(0..2559),
		ms5120							INTEGER(0..5119),
		ms10240							INTEGER(0..10239)
	},
	-- FFS need for finer offset granulary
	-- FFS need for shorter values for long and short cycles
	shortDRX							SEQUENCE {
		drx-ShortCycle						ENUMERATED	{
												ms2, ms3, ms4, ms5, ms6, ms7, ms8, ms10, ms14, ms16, ms20, ms30, ms32,
												ms35, ms40, ms64, ms80, ms128, ms160, ms256, ms320, ms512, ms640, spare9,
												spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1 },
		drx-ShortCycleTimer					INTEGER (1..16)
	}		OPTIONAL,													-- Need R
	drx-SlotOffset						INTEGER (0..31)

}

PHR-Config ::=						SEQUENCE {
	phr-PeriodicTimer					ENUMERATED {sf10, sf20, sf50, sf100, sf200,sf500, sf1000, infinity},
	phr-ProhibitTimer					ENUMERATED {sf0, sf10, sf20, sf50, sf100,sf200, sf500, sf1000},
	phr-Tx-PowerFactorChange			ENUMERATED {dB1, dB3, dB6, infinity},
	multiplePHR							BOOLEAN,
	phr-Type2PCell						BOOLEAN,
	phr-Type2OtherCell					BOOLEAN,
	phr-ModeOtherCG						ENUMERATED {real, virtual}

}


TAG-Config ::=				SEQUENCE {
	tag-ToReleaseList			SEQUENCE (SIZE (1..maxNrofTAGs)) OF TAG-Id											OPTIONAL,	-- Need N
	tag-ToAddModList			SEQUENCE (SIZE (1..maxNrofTAGs)) OF TAG-ToAddMod											OPTIONAL		-- Need N
}

TAG-ToAddMod ::= 			SEQUENCE {
	tag-Id						TAG-Id,
	timeAlignmentTimer			TimeAlignmentTimer,
	...
}

TAG-Id ::=					INTEGER (0..maxNrofTAGs-1)

TimeAlignmentTimer ::= 		ENUMERATED {ms500, ms750, ms1280, ms1920, ms2560, ms5120, ms10240, infinity}

BSR-Config ::=				SEQUENCE {
	periodicBSR-Timer			ENUMERATED {
									sf1, sf5, sf10, sf16, sf20, sf32, sf40, sf64, sf80, sf128, sf160, sf320, sf640, sf1280, sf2560, infinity},
	retxBSR-Timer				ENUMERATED { sf10, sf20, sf40, sf80, sf160, sf320, sf640, sf1280, sf2560, sf5120, sf10240, spare5, spare4,
											spare3, spare2, spare1},
	logicalChannelSR-DelayTimer		ENUMERATED { sf20, sf40, sf64, sf128, sf512, sf1024, sf2560, spare1}	OPTIONAL	-- Need R
}



-- TAG-MAC-CELL-GROUP-CONFIG-STOP
-- ASN1STOP

MAC-CellGroupConfig field descriptionsdrx-Config
Used to configure DRX as specified in TS 38.321 [3].drx-HARQ-RTT-TimerDL
Value in number of symbols.drx-HARQ-RTT-TimerUL
Value in number of symbols.drx-InactivityTimer
Value in multiple integers of 1ms. ms0 corresponds to 0, ms1 corresponds to 1ms, ms2 corresponds to 2ms, and so on.drx-onDurationTimer
Value in multiples of 1/32 ms (subMilliSeconds) or in ms (milliSecond). For the latter, ms1 corresponds to 1ms, ms2 corresponds to 2ms, and so on.drx-LongCycleStartOffset 
drx-LongCycle in ms and drx-StartOffset in multiples of 1ms.drx-RetransmissionTimerDL 
Value in number of slot lengths. sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on.drx-RetransmissionTimerUL
Value in number of slot lengths. sl1 corresponds to 1 slot, sl2 corresponds to 2 slots, and so on.drx-ShortCycle 
Value in ms. ms1 corresponds to 1ms, ms2 corresponds to 2ms, and so on.drx-ShortCycleTimer 
Value in multiples of drx-ShortCycle. A value of 1 corresponds to drx-ShortCycle, a value of 2 corresponds to 2 * drx-ShortCycle and so on.drx-SlotOffset
Value in 1/32 ms. Value 0 corresponds to 0ms, value 1 corresponds to 1/32ms, value 2 corresponds to 2/32ms, and so on.logicalChannelSR-DelayTimer
Value in number of subframes. sf1 corresponds to one subframe, sf2 corresponds to 2 subframes, and so on.multiplePHR
Indicates if power headroom shall be reported using the Single Entry PHR MAC control element or Multiple Entry PHR MAC control element defined in TS 38.321 [3]. True means to use Multiple Entry PHR MAC control element and False means to use the Single Entry PHR MAC control element defined in TS 38.321 [3]. periodicBSR-Timer
Value in number of subframes. Value sf1 corresponds to 1 subframe, sf5 corresponds to 5 subframes and so on.phr-Tx-PowerFactorChange
Value in dB for PHR reporting as specified in TS 38.321 [3]. Value dB1 corresponds to 1 dB, dB3 corresponds to 3 dB and so on. The same value applies for each serving cell (although the associated functionality is performed independently for each cell).phr-ModeOtherCG
Indicates the mode (i.e. real or virtual) used for the PHR of the activated cells that are part of the other Cell Group (i.e. MCG or SCG), when DC is configured.phr-PeriodicTimer
Value in number of subframes for PHR reporting as specified in TS 38.321 [3]. sf10 corresponds to 10 subframes, sf20 corresonds to 20 subframes, and so on.phr-ProhibitTimer
Value in number of subframes for PHR reporting as specified in TS 38.321 [3]. sf0 corresponds to 0 subframe, sf10 corresponds to 10 subframes, sf20 corresponds to 20 subframes, and so on.phr-Type2PCell
Indicates whether or not PHR type 2 is reported for the PCellphr-Type2OtherCell
Indicates whether or not PHR type 2 is reported for the PSCell and PUCCH SCells.retxBSR-Timer
Value in number of subframes. Value sf10 corresponds to 10 subframes, sf20 corresponds to 20 subframes and so on.skipUplinkTxDynamic
If configured, indicates whether the UE skips UL transmissions for an uplink grant other than a configured uplink grant if no data is available for transmission in the UE buffer as described in TS 38.321 [3].tag-ID
Indicates the TAG of an SCell, see TS 38.321 [3]. Uniquely identifies the TAG within the scope of a Cell Group (i.e. MCG or SCG). If the field is not configured for an SCell, the SCell is part of the PTAG.timeAlignmentTimer
Value in ms of the timeAlignmentTimer for TAG with ID tag-Id, as specified in TS 38.321 [3].
–	MeasConfig
The IE MeasConfig specifies measurements to be performed by the UE, and covers intra-frequency, inter-frequency and inter-RAT mobility as well as configuration of measurement gaps.
MeasConfig information element
-- ASN1START
-- TAG-MEAS-CONFIG-START

MeasConfig ::=							SEQUENCE {
	-- Measurement objects
	measObjectToRemoveList					MeasObjectToRemoveList											OPTIONAL,	-- Need N
	measObjectToAddModList					MeasObjectToAddModList											OPTIONAL,	-- Need N

	-- Reporting configurations
	reportConfigToRemoveList				ReportConfigToRemoveList										OPTIONAL,	-- Need N
	reportConfigToAddModList				ReportConfigToAddModList										OPTIONAL,	-- Need N

	-- Measurement identities
	measIdToRemoveList						MeasIdToRemoveList												OPTIONAL,	-- Need N
	measIdToAddModList						MeasIdToAddModList												OPTIONAL,	-- Need N

	-- Other parameters
	--s-Measure config
	s-MeasureConfig							CHOICE {
		ssb-RSRP								RSRP-Range,						
		csi-RSRP								RSRP-Range						
	} 																										OPTIONAL,	-- Need M

	quantityConfig						QuantityConfig														OPTIONAL,	-- Need M

	--Placehold for measGapConfig
	measGapConfig							MeasGapConfig													OPTIONAL,	-- Need M
	...
}

MeasObjectToRemoveList ::=				SEQUENCE (SIZE (1..maxNrofObjectId)) OF MeasObjectId

MeasIdToRemoveList ::=					SEQUENCE (SIZE (1..maxNrofMeasId)) OF MeasId

ReportConfigToRemoveList ::=			SEQUENCE (SIZE (1..maxReportConfigId)) OF ReportConfigId

-- TAG-MEAS-CONFIG-STOP
-- ASN1STOP

Editor’s Note: FFS Whether UE speed based TTT scaling (e.g. speedStatePars) is supported in Rel-15 (not applicable for EN-DC).
Editor’s Note: FFS Whether measScaleFactor (or equivalent) is supported in Rel-15 (not applicable for EN-DC).
Editor’s Note: FFS How to support allowInterruptions in NR (RAN4 input needed) in Rel-15.

MeasConfig field descriptionsmeasGapConfig
Used to setup and release measurement gaps in NR.measIdToAddModList
List of measurement identities to add and/or modify.measIdToRemoveList
List of measurement identities to remove.measObjectToAddModList
List of measurement objects to add and/or modify.measObjectToRemoveList
List of measurement objects to remove.reportConfigToAddModList
List of measurement reporting configurations to add and/or modifyreportConfigToRemoveList 
List of measurement reporting configurations to remove.s-MeasureConfig
Threshold for NR SpCell RSRP measurement controlling when the UE is required to perform measurements on non-serving cells. Choice of ssb-RSRP corresponds to cell RSRP based on SS/PBCH block and choice of csi-RSRP corresponds to cell RSRP of CSI-RS. The UE is only required to perform measurements on non-serving cells when the SpCell RSRP is below that threshold.
–	MeasGapConfig
The IE MeasGapConfig specifies the measurement gap configuration and controls setup/ release of measurement gaps.
MeasGapConfig information element
-- ASN1START
--TAG-MEAS-GAP-CONFIG-START

MeasGapConfig ::=				SEQUENCE {
		gapFR2 						SetupRelease { GapConfig }				OPTIONAL,
		...
}

GapConfig ::=					SEQUENCE {
		gapOffset 					INTEGER (0..159),
		mgl 						ENUMERATED {ms1dot5, ms3, ms3dot5, ms4, ms5dot5, ms6},
		mgrp 						ENUMERATED {ms20, ms40, ms80, ms160},
		mgta						ENUMERATED {ms0, ms0dot25, ms0dot5},
		...
}

-- TAG-MEAS-GAP-CONFIG-STOP
-- ASN1STOP

MeasGapConfig field descriptionsgapFR2
Indicates measurement gap configuration applies to FR2 only. The applicability of the measurement gap is according to Table 9.1.2-2 in TS 38.133 [14].gapOffset
Value gapOffset is the gap offset of the gap pattern with MGRP indicated in the field mgrp. The value range should be from 0 to mgrp-1.mgl
Value mgl is the measurement gap length in ms of the measurement gap. The applicability of the measurement gap is according to in Table 9.1.2-1 and Table 9.1.2-2 in TS 38.133 [14]. Value ms1dot5 corresponds to 1.5ms, ms3 corresponds to 3ms and so on.mgrp
Value mgrp is measurement gap repetition period in (ms) of the measurement gap. The applicability of the measurement gap is according to in Table 9.1.2-1 and Table 9.1.2-2 in TS 38.133 [14].mgta
Value mgta is the measurement gap timing advance in ms. The applicability of the measurement gap timing advance is according to section9.1.2 of TS 38.133 [14]. Value ms0 corresponds to 0 ms, ms0dot25 corresponds to 0.25ms and ms0dot5 corresponds to 0.5ms.For FR2, the network only configures 0 and 0.25ms. 
–	MeasId
The IE MeasId is used to identify a measurement configuration, i.e., linking of a measurement object and a reporting configuration.
MeasId information element
-- ASN1START
-- TAG-MEAS-ID-START

MeasId ::=							INTEGER (1..maxNrofMeasId)

-- TAG-MEAS-ID-STOP
-- ASN1STOP

–	MeasIdToAddModList
The IE MeasIdToAddModList concerns a list of measurement identities to add or modify, with for each entry the measId, the associated measObjectId and the associated reportConfigId.
MeasIdToAddModList information element
-- ASN1START
-- TAG-MEAS-ID-TO-ADD-MOD-LIST-START

MeasIdToAddModList ::=				SEQUENCE (SIZE (1..maxNrofMeasId)) OF MeasIdToAddMod

MeasIdToAddMod ::=					SEQUENCE {
	measId								MeasId,
	measObjectId						MeasObjectId,
	reportConfigId						ReportConfigId
}

-- TAG-MEAS-ID-TO-ADD-MOD-LIST-STOP
-- ASN1STOP

–	MeasObjectEUTRA
The IE MeasObjectEUTRA specifies information applicable for EUTRA cells.
Editor’s Note: FFS Details of measObjectEUTRA that can be configured via NR (not applicable for EN-DC).

–	MeasObjectId
The IE MeasObjectId used to identify a measurement object configuration.
MeasObjectId information element
-- ASN1START
-- TAG-MEAS-OBJECT-ID-START

MeasObjectId ::=							INTEGER (1..maxNrofObjectId)

-- TAG-MEAS-OBJECT-ID-STOP
-- ASN1STOP

–	MeasObjectNR
The IE MeasObjectNR specifies information applicable for SS/PBCH block(s) intra/inter-frequency measurements or CSI-RS intra/inter-frequency measurements.
MeasObjectNR information element
-- ASN1START
-- TAG-MEAS-OBJECT-NR-START

MeasObjectNR ::=							SEQUENCE {
	ssbFrequency								ARFCN-ValueNR															OPTIONAL,
	refFreqCSI-RS								ARFCN-ValueNR															OPTIONAL,

	--RS configuration (e.g. SMTC window, CSI-RS resource, etc.)
	referenceSignalConfig						ReferenceSignalConfig,													

	--Consolidation of L1 measurements per RS index
	absThreshSS-BlocksConsolidation			ThresholdNR																	OPTIONAL,	-- Need R
	absThreshCSI-RS-Consolidation			ThresholdNR																	OPTIONAL,	-- Need R
																													
	--Config for cell measurement derivation
	nrofSS-BlocksToAverage					INTEGER (2..maxNrofSS-BlocksToAverage)										OPTIONAL,	-- Need R
	nrofCSI-RS-ResourcesToAverage			INTEGER (2..maxNrofCSI-RS-ResourcesToAverage)								OPTIONAL,	-- Need R
																															
	-- Filter coefficients applicable to this measurement object
	quantityConfigIndex							INTEGER (1..maxNrofQuantityConfig),

	--Frequency-specific offsets 
	offsetFreq									Q-OffsetRangeList,

	-- Cell list
	cellsToRemoveList							PCI-List																OPTIONAL,	-- Need N
	cellsToAddModList							CellsToAddModList														OPTIONAL,	-- Need N

	-- Black list
	blackCellsToRemoveList						PCI-RangeIndexList														OPTIONAL,	-- Need N
	blackCellsToAddModList						BlackCellsToAddModList													OPTIONAL,	-- Need N

	-- White list
	whiteCellsToRemoveList						PCI-RangeIndexList														OPTIONAL,	-- Need N
	whiteCellsToAddModList						WhiteCellsToAddModList													OPTIONAL,	-- Need N
	...
}

ReferenceSignalConfig::=     			SEQUENCE {
	

	-- SSB configuration for mobility (nominal SSBs, timing configuration)
	ssb-ConfigMobility						SSB-ConfigMobility				OPTIONAL,	-- Need M
	-- CSI-RS resources to be used for CSI-RS based RRM measurements
	csi-rs-ResourceConfigMobility			SetupRelease { CSI-RS-ResourceConfigMobility } OPTIONAL-- Need M		

}

-- A measurement timing configuration
SSB-ConfigMobility::= 	SEQUENCE {
		--Only the values 15, 30 or 60 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are applicable
		subcarrierSpacing                    SubcarrierSpacing,
		-- The set of SS blocks to be measured within the SMTC measurement duration. 
		-- Corresponds to L1 parameter 'SSB-measured' (see FFS_Spec, section FFS_Section)
		-- When the field is absent the UE measures on all SS-blocks 
		-- FFS_CHECK: Is this IE placed correctly.
		ssb-ToMeasure							SetupRelease { SSB-ToMeasure }								OPTIONAL,	-- Need M

	-- Indicates whether the UE can utilize serving cell timing to derive the index of SS block transmitted by neighbour cell:
	useServingCellTimingForSync				BOOLEAN,
																									
	-- Primary measurement timing configuration. Applicable for intra- and inter-frequency measurements. 
	smtc1									SEQUENCE {
		-- Periodicity and offset of the measurement window in which to receive SS/PBCH blocks. 
		-- Periodicity and offset are given in number of subframes.
		-- FFS_FIXME: This does not match the L1 parameter table! They seem to intend an index to a hidden table in L1 specs. 
		-- (see 38.213, section REF):
		periodicityAndOffset					CHOICE {
			sf5										INTEGER (0..4),
			sf10									INTEGER (0..9),
			sf20									INTEGER (0..19),
			sf40									INTEGER (0..39),
			sf80									INTEGER (0..79),
			sf160									INTEGER (0..159)
		},
		-- Duration of the measurement window in which to receive SS/PBCH blocks. It is given in number of subframes 
		-- (see 38.213, section 4.1)
		duration								ENUMERATED { sf1, sf2, sf3, sf4, sf5 }
	},

	-- Secondary measurement timing confguration for explicitly signalled PCIs. It uses the offset and duration from smtc1.
	-- It is supported only for intra-frequency measurements in RRC CONNECTED. 
	smtc2 									SEQUENCE {
		-- PCIs that are known to follow this SMTC.
		pci-List								SEQUENCE (SIZE (1..maxNrofPCIsPerSMTC)) OF PhysCellId		OPTIONAL,	-- Need M
		-- Periodicity for the given PCIs. Timing offset and Duration as provided in smtc1.
		periodicity								ENUMERATED {sf5, sf10, sf20, sf40, sf80, sf160, spare2, spare1}
	}																										OPTIONAL,-- Cond IntraFreqConnected
	ss-RSSI-Measurement							SEQUENCE {
		measurementSlots							CHOICE {
			kHz15										BIT STRING (SIZE(1)),
			kHz30										BIT STRING (SIZE(2)),
			kHz60										BIT STRING (SIZE(4)),
			kHz120										BIT STRING (SIZE(8))
		},
		endSymbol									INTEGER(0..13)
	}																										OPTIONAL				
}

CSI-RS-ResourceConfigMobility ::= 		SEQUENCE {
	-- MO specific values
		isServingCellMO						BOOLEAN,
	-- Subcarrier spacing of CSI-RS. 
	-- Only the values 15, 30 or 60 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are applicable.
	-- Corresponds to L1 parameter 'Numerology' (see 38.211, section FFS_Section)
	subcarrierSpacing						SubcarrierSpacing,
	-- List of cells
	csi-RS-CellList-Mobility 	SEQUENCE (SIZE (1..maxNrofCSI-RS-CellsRRM))	OF CSI-RS-CellMobility

}

CSI-RS-CellMobility ::=				SEQUENCE {
	cellId									PhysCellId,

	csi-rs-MeasurementBW					SEQUENCE {
		-- Allowed size of the measurement BW in PRBs
		-- Corresponds to L1 parameter 'CSI-RS-measurementBW-size' (see FFS_Spec, section FFS_Section)
		nrofPRBs			ENUMERATED { size24, size48, size96, size192, size264},
		-- Starting PRB index of the measurement bandwidth
		-- Corresponds to L1 parameter 'CSI-RS-measurement-BW-start' (see FFS_Spec, section FFS_Section)
		-- FFS_Value: Upper edge of value range unclear in RAN1
		startPRB			INTEGER(0..2169)
	},

	-- Frequency domain density for the 1-port CSI-RS for L3 mobility
	-- Corresponds to L1 parameter 'Density' (see FFS_Spec, section FFS_Section)
	density									ENUMERATED {d1,d3}												OPTIONAL,


-- List of resources
	csi-rs-ResourceList-Mobility 	SEQUENCE (SIZE (1..maxNrofCSI-RS-ResourcesRRM))	OF CSI-RS-Resource-Mobility
}


CSI-RS-Resource-Mobility ::=			SEQUENCE {
	csi-RS-Index							CSI-RS-Index,
	-- Contains periodicity and slot offset for periodic/semi-persistent CSI-RS (see 38.211, section x.x.x.x)FFS_Ref
	slotConfig								CHOICE {
		ms4										INTEGER (0..31),
		ms5										INTEGER (0..39),
		ms10									INTEGER (0..79),
		ms20									INTEGER (0..159),
		ms40									INTEGER (0..319)
	},
	-- Each CSI-RS resource may be associated with one SSB. If such SSB is indicated, the NW also indicates whether the UE may assume 
	-- quasi-colocation of this SSB with this CSI-RS reosurce. 
	-- Corresponds to L1 parameter 'Associated-SSB' (see FFS_Spec, section FFS_Section)
	
	associatedSSB							SEQUENCE {
		ssb-Index								SSB-Index,
		-- The CSI-RS resource is either QCL’ed not QCL’ed with the associated SSB in spatial parameters
		-- Corresponds to L1 parameter 'QCLed-SSB' (see FFS_Spec, section FFS_Section)
		isQuasiColocated						BOOLEAN
	}					OPTIONAL, -- Cond AssociatedSSB

	
	-- Frequency domain allocation within a physical resource block in accordance with 38.211, section 7.4.1.5.3 including table 7.4.1.5.2-1.
	-- The number of bits that may be set to one depend on the chosen row in that table. For the choice "other", the row can be determined from
	-- the parmeters below and from the number of bits set to 1 in frequencyDomainAllocation.
	frequencyDomainAllocation			CHOICE {
		row1								BIT STRING (SIZE (4)),
		row2								BIT STRING (SIZE (12))
	},

	
	-- Time domain allocation within a physical resource block. The field indicates the first OFDM symbol in the PRB used for CSI-RS.
	-- Parameter l0 in 38.211, section 7.4.1.5.3. Value 2 is supported only when DL-DMRS-typeA-pos equals 3.
	firstOFDMSymbolInTimeDomain			INTEGER (0..13),	
	-- Scrambling ID for CSI-RS(see 38.211, section 7.4.1.5.2)
	sequenceGenerationConfig				INTEGER (0..1023),
	...
}

CSI-RS-Index ::= 				INTEGER (0..maxNrofCSI-RS-ResourcesRRM-1)

Q-OffsetRangeList ::=					SEQUENCE {
	rsrpOffsetSSB							Q-OffsetRange				DEFAULT dB0,
	rsrqOffsetSSB							Q-OffsetRange				DEFAULT dB0,
	sinrOffsetSSB							Q-OffsetRange				DEFAULT dB0,
	rsrpOffsetCSI-RS						Q-OffsetRange				DEFAULT dB0,
	rsrqOffsetCSI-RS						Q-OffsetRange				DEFAULT dB0,
	sinrOffsetCSI-RS						Q-OffsetRange				DEFAULT dB0
}

SSB-ToMeasure ::=			CHOICE {
	-- bitmap for sub 3 GHz
	shortBitmap							BIT STRING (SIZE (4)),
	-- bitmap for 3-6 GHz
	mediumBitmap						BIT STRING (SIZE (8)),
	-- bitmap for above 6 GHz
	longBitmap							BIT STRING (SIZE (64))
}


ThresholdNR ::=							SEQUENCE{
	thresholdRSRP							RSRP-Range					OPTIONAL,
	thresholdRSRQ						RSRQ-Range					OPTIONAL,
	thresholdSINR						SINR-Range					OPTIONAL
}

CellsToAddModList ::=					SEQUENCE (SIZE (1..maxNrofCellMeas)) OF CellsToAddMod

CellsToAddMod ::=						SEQUENCE {
	physCellId								PhysCellId,
	cellIndividualOffset					Q-OffsetRangeList
}

BlackCellsToAddModList ::=				SEQUENCE (SIZE (1..maxNrofPCI-Ranges)) OF BlackCellsToAddMod

BlackCellsToAddMod ::=					SEQUENCE {
	pci-RangeIndex							PCI-RangeIndex,		
	pci-Range								PCI-Range
}


WhiteCellsToAddModList ::=				SEQUENCE (SIZE (1..maxNrofPCI-Ranges)) OF WhiteCellsToAddMod

WhiteCellsToAddMod ::=					SEQUENCE {
	pci-RangeIndex							PCI-RangeIndex,
	pci-Range							PCI-Range
}

-- TAG-MEAS-OBJECT-NR-STOP
-- ASN1STOP

Editor’s Note: FFS How to support CGI reporting and whether changes are required in MeasObjectNR (e.g. introduction of cellForWhichToReportCGI). Not applicable for EN-DC.
Editor’s Note: FFS Whether alternative TTT is supported in Rel-15 (not applicable for EN-DC).
Editor’s Note: FFS measCycleSCell. (not applicable for EN-DC)
Editor’s Note: FFS reducedMeasPerformance (not applicable for EN-DC).

MeasObjectNR field descriptionsabsThreshCSI-RS-Consolidation
Absolute threshold for the consolidation of measurement results per CSI-RS resource(s) from L1 filter(s). The values above the threshold are used as input to the derivation of cell measurement results as described in 5.5.3.3 and the L3 filter(s) per CSI-RS resource as described in 5.5.3.2.absThreshSS-BlocksConsolidation
Absolute threshold for the consolidation of measurement results per SS/PBCH block(s) from L1 filter(s). The values above the threshold are used as input to the derivation of cell measurement results as described in 5.5.3.3and the L3 filter(s) per SS/PBCH block index as described in 5.5.3.2.associatedSSB
If this field is present, the UE may base the timing of the CSI-RS resource indicated in CSI-RS-Resource-Mobilityon the timing of the cell indicated by the cellIdin the CSI-RS-CellMobility. In this case,the UE is not required to monitor that CSI-RS resourceif the UE can’t detect the SS/PBCH block indicated by thisassociatedSSBandcellId.If this field is absent, the UE shall base the timing of the CSI-RS resource indicated in CSI-RS-Resource-Mobilityon the timing of the serving cell.In this case, the UE is required to measure the CSI-RS resource even if SS/PBCH block(s) with cellIdin the CSI-RS-CellMobilityare not detected.blackCellsToAddModList
List of cells to add/modify in the black list of cells.blackCellsToRemoveList
List of cells to remove from the black list of cells.cellIndividualOffset
Cell individual offsets applicable to a specific cell.cellsToAddModList
List of cells to add/modify in the cell list.cellsToRemoveList
List of cells to remove from the cell list. csi-RS-Index
CSI-RS resource index associated to the CSI-RS resource to be measured (and used for reporting).endSymbol
RSSI is measured from symbol 0 to symbol endSymbol.nrofCSInrofCSI-RS-ResourcesToAverage
Indicates the maximum number of measurement results per beam based on CSI-RS resources to be averaged. The same value applies for each detected cell associated with this MeasObjectNR.nrofSS-BlocksToAverage  
Indicates the maximum number of measurement results per beam based on SS/PBCH blocks to be averaged. The same value applies for each detected cell associated with this MeasObject.offsetFreq
Offset values applicable to the carrier frequency.physCellId
Physical cell identity of a cell in the cell list.quantityConfigIndex
Indicates the n-th element of quantityConfigNR-Listprovided in MeasConfig.pci-Range
Physical cell identity or a range of physical cell identities.measurementSlots
Indicates the slots in which the UE can perform RSSI measurements.slotConfig
Indicates the CSI-RS periodicity (in milliseconds) and for each periodicity the offset (in number of slots).When subcarrierSpacingCSI-RS is set to 15kHZ, the maximum offset values for periodicities ms4/ms5/ms10/ms20/ms40 are 3/4/9/19/39 slots. When subcarrierSpacingCSI-RS is set to 30kHZ, the maximum offset values for periodicities ms4/ms5/ms10/ms20/ms40 are 7/9/19/39/79 slots. When subcarrierSpacingCSI-RS is set to 60kHZ, the maximum offset values for periodicities ms4/ms5/ms10/ms20/ms40 are 15/19/39/79/159 slots. When subcarrierSpacingCSI-RS is set 120kHZ, the maximum offset values for periodicities ms4/ms5/ms10/ms20/ms40 are 31/39/79/159/319 slots.ssbFrequency
Indicates the frequency of the SS associated to this MeasObjectNR. For cell defining SSB, it will be located on the sync raster.whiteCellsToAddModList
List of cells to add/modify in the white list of cells.whiteCellsToRemoveList
List of cells to remove from the white list of cells.
Conditional presenceExplanationAssociatedSSBIf useServingCellTimingForSync is set to FALSE, this field is mandatory present, otherwise if ssb-ConfigMobility is present, it is optionally present, otherwise, it is absent.
–	MeasObjectToAddModList
The IE MeasObjectToAddModList concerns a list of measurement objects to add or modify.
MeasObjectToAddModList information element
-- ASN1START
-- TAG-MEAS-OBJECT-TO-ADD-MOD-LIST-START

MeasObjectToAddModList ::=					SEQUENCE (SIZE (1..maxNrofObjectId)) OF MeasObjectToAddMod

MeasObjectToAddMod ::=						SEQUENCE {
	measObjectId								MeasObjectId,
	measObject									CHOICE {
		measObjectNR								MeasObjectNR,
		...
	}
}

-- TAG-MEAS-OBJECT-TO-ADD-MOD-LIST-STOP 
-- ASN1STOP

–	MeasResults
The IE MeasResults covers measured results for intra-frequency, inter-frequency, and inter-RAT mobility.
MeasResults information element
-- ASN1START
-- TAG-MEAS-RESULTS-START

MeasResults ::=								SEQUENCE {
	measId										MeasId,
	measResultServingFreqList					MeasResultServFreqList,
	measResultNeighCells						CHOICE {
		measResultListNR							MeasResultListNR,
		...
	}																														OPTIONAL,
	...
}

MeasResultServFreqList ::=					SEQUENCE (SIZE (1..maxNrofServingCells)) OF MeasResultServFreq

MeasResultServFreq ::=						SEQUENCE {
	servFreqId									ServCellIndex,																
	measResultServingCell						MeasResultNR,
	measResultBestNeighCell						MeasResultNR,
	...															
}

MeasResultListNR ::=						SEQUENCE (SIZE (1..maxCellReport)) OF MeasResultNR

MeasResultNR ::=							SEQUENCE {
	physCellId									PhysCellId																	OPTIONAL,
	--FFS: Details of cgi info 
	cgi-Info									ENUMERATED {ffsTypeAndValue}												OPTIONAL,
	measResult									SEQUENCE {
		cellResults									SEQUENCE{
			resultsSSB-Cell								MeasQuantityResults													OPTIONAL,
			resultsCSI-RS-Cell							MeasQuantityResults													OPTIONAL
		},
		rsIndexResults								SEQUENCE{
			resultsSSB-Indexes							ResultsPerSSB-IndexList												OPTIONAL, 
			resultsCSI-RS-Indexes						ResultsPerCSI-RS-IndexList											OPTIONAL
		}																													OPTIONAL
	},
	...
}


MeasQuantityResults ::= 		SEQUENCE {
	rsrp							RSRP-Range													OPTIONAL,
	rsrq							RSRQ-Range													OPTIONAL,
	sinr							SINR-Range													OPTIONAL
}

ResultsPerSSB-IndexList::= 				SEQUENCE (SIZE (1..maxNrofSSBs)) OF ResultsPerSSB-Index

ResultsPerSSB-Index ::= 					SEQUENCE {
	ssb-Index									SSB-Index,
	ssb-Results									MeasQuantityResults							OPTIONAL
}

ResultsPerCSI-RS-IndexList::= 				SEQUENCE (SIZE (1..maxNrofCSI-RS)) OF ResultsPerCSI-RS-Index

ResultsPerCSI-RS-Index ::= 					SEQUENCE {
	csi-RS-Index								CSI-RS-Index,
	csi-RS-Results								MeasQuantityResults							OPTIONAL
}

-- TAG-MEAS-RESULTS-STOP
-- ASN1STOP
Editor’s Note: FFS locationInfo.

MeasResults field descriptionscsi-rs-Index
CSI-RS resource index associated to the measurement information to be reported.measId
Identifies the measurement identity for which the reporting is being performed.measResult
Measured results of an NR cell.measResultListNR
List of measured results for the maximum number of reported best cells for an NR measurement identity.measResultServingFreqList 
Measured results of the serving frequencies including measurement results of SpCell, configured SCell(s) and best neighbouring cell on each serving frequency.resultsCSI-RS-Indexes
List of measurement information per CSI-RS resource index of an NR cell.resultsSSB-Indexes
List of measurement information per SS/PBCH index of an NR cell.resultsCSI-RS-Cell
Cell level measurement results (e.g. RSRP, RSRQ, SINR) to be reported derived from CSI-RS measurements.resultsSSB-Cell
Cell level measurement results (e.g. RSRP, RSRQ, SINR) to be reported derived on SS/PBCH block measurements.rsrp
Measured SS-RSRP or CSI-RSRP resultsas defined in TS 38.215 [9], either per NR cell from the L1 filter(s) or per (SS/PBCH)/(CSI-RS) index as specified in 5.5.3.3a.rsrq
Measured SS-RSRQ or CSI-RSRQ results as defined in TS 38.215 [9], either per NR cell from the L1 filter(s) or per (SS/PBCH)/(CSI-RS) index as specified in 5.5.3.3a.sinr
Measured SS-SINR or CSI-SINR results as defined in TS 38.215 [9], either per NR cell from the L1 filter(s) or per (SS/PBCH)/(CSI-RS) index as specified in 5.5.3.3a.ssb-Index
SS/PBCH block index associated to the measurement information to be reported.
–	MeasResultSCG-Failure
The IE MeasResultSCG-Failure is used to provide information regarding failures detected by the UE in case of EN-DC.
MeasResultSCG-Failure information element
-- ASN1START
-- TAG-MEAS-RESULT-SCG-FAILURE-START

MeasResultSCG-Failure ::= 			SEQUENCE {
	measResultServFreqList					MeasResultServFreqList2NR,
	measResultNeighCells						MeasResultList2NR,
	...
}

MeasResultServFreqList2NR ::=			SEQUENCE (SIZE (1..maxNrofServingCells)) OF MeasResultServFreq2NR

MeasResultServFreq2NR ::=				SEQUENCE {
	ssbFrequency							ARFCN-ValueNR			OPTIONAL,
	refFreqCSI-RS							ARFCN-ValueNR			OPTIONAL,
	measResultServingCell					MeasResultNR,
	measResultBestNeighCell					MeasResultNR		OPTIONAL
}

MeasResultList2NR ::=					SEQUENCE (SIZE (1..maxFreq)) OF MeasResult2NR

MeasResult2NR ::=						SEQUENCE {	
	ssbFrequency							ARFCN-ValueNR			OPTIONAL,
	refFreqCSI-RS							ARFCN-ValueNR			OPTIONAL,
	measResultListNR						MeasResultListNR
}

-- TAG-MEAS-RESULT-SCG-FAILURE-STOP
-- ASN1STOP

–	MeasResultCellListSFTD
The IE MeasResultCellListSFTD consists of SFN and radio frame boundary difference between the PCell and an NR  cell as specified in TS 38.215 [9] and TS 38.133 [14].
MeasResultCellListSFTD information element
-- ASN1START
-- TAG-MEASRESULT-CELL-LIST-SFTD-START

MeasResultCellListSFTD ::=			SEQUENCE (SIZE (1..maxCellSFTD)) OF MeasResultCellSFTD

MeasResultCellSFTD ::=	SEQUENCE {
	physCellId							PhysCellId,
	sfn-OffsetResult					INTEGER (0..1023),
	frameBoundaryOffsetResult			INTEGER (-30720..30719),
	rsrp-Result							RSRP-Range						OPTIONAL
}

-- TAG-MEASRESULT-CELL-LIST-SFTD-STOP
-- ASN1STOP

MeasResultSFTD field descriptionssfn-OffsetResult
Indicates the SFN difference between the PCell and the NR cell as an integer value according to TS 38.215 [9].frameBoundaryOffsetResult
Indicates the frame boundary difference between the PCell and the NR cell as an integer value according to TS 38.215 [9].
–	MultiFrequencyBandListNR
The IE MultiFrequencyBandListNR is used to configure a list of one or multiple NR frequency bands.
MultiFrequencyBandListNR information element
-- ASN1START
-- TAG-MULTIFREQUENCYBANDLISTNR-START

MultiFrequencyBandListNR ::= 		SEQUENCE (SIZE (1..maxNrofMultiBands)) OF FreqBandIndicatorNR

-- TAG-MULTIFREQUENCYBANDLISTNR-STOP
-- ASN1STOP

–	NZP-CSI-RS-ResourceSet
The IE NZP-CSI-RS-ResourceSet is a set of Non-Zero-Power (NZP) CSI-RS resources (their IDs) and set-specific parameters. 
NZP-CSI-RS-ResourceSet information element
-- ASN1START
-- TAG-NZP-CSI-RS-RESOURCESET-START
NZP-CSI-RS-ResourceSet ::= 		SEQUENCE {
	nzp-CSI-ResourceSetId					NZP-CSI-RS-ResourceSetId,	

	-- NZP-CSI-RS-Resources assocaited with this NZP-CSI-RS resource set.
	-- Corresponds to L1 parameter 'CSI-RS-ResourceConfigList' (see 38.214, section 5.2)
	-- For CSI, there are at most 8 NZP CSI RS resources per resource set
	nzp-CSI-RS-Resources						SEQUENCE (SIZE (1..maxNrofNZP-CSI-RS-ResourcesPerSet)) OF NZP-CSI-RS-ResourceId,

	-- Indicates whether repetition is on/off. If set to set to 'OFF', the UE may not assume that the 
	-- NZP-CSI-RS resources within the resource set are transmitted with the same downlink spatial domain transmission filter 
	-- and with same NrofPorts in every symbol.
	-- Corresponds to L1 parameter 'CSI-RS-ResourceRep' (see 38.214, sections 5.2.2.3.1 and 5.1.6.1.2)
	-- Can only be configured for CSI-RS resource sets which are associated with CSI-ReportConfig with report of L1 RSRP or “no report”	
	repetition									ENUMERATED { on, off }				OPTIONAL,

	-- Offset X between the slot containing the DCI that triggers a set of aperiodic NZP CSI-RS resources and the slot in which the 
	-- CSI-RS resource set is transmitted. When the field is absent the UE applies the value 0.
	-- Corresponds to L1 parameter 'Aperiodic-NZP-CSI-RS-TriggeringOffset' (see 38,214, section FFS_Section)
	aperiodicTriggeringOffset			 		INTEGER(0..4)																		OPTIONAL,	-- Need S

	-- Indicates that the antenna port for all NZP-CSI-RS resources in the CSI-RS resource set is same.
	-- Corresponds to L1 parameter 'TRS-Info' (see 38.214, section 5.2.2.3.1)
	trs-Info								ENUMERATED {true}																OPTIONAL,
	...
}

-- TAG-NZP-CSI-RS-RESOURCESET-STOP
-- ASN1STOP

–	NZP-CSI-RS-ResourceSetId
The IE NZP-CSI-RS-ResourceSetId is used to identify one NZP-CSI-RS-ResourceSet.
NZP-CSI-RS-ResourceSetId information element
-- ASN1START
-- TAG-NZP-CSI-RS-RESOURCESETID-START
NZP-CSI-RS-ResourceSetId ::= INTEGER (0..maxNrofNZP-CSI-RS-ResourceSets-1)

-- TAG-NZP-CSI-RS-RESOURCESETID-STOP
-- ASN1STOP

–	NZP-CSI-RS-Resource
The IE NZP-CSI-RS-Resource is used to configure Non-Zero-Power (NZP) CSI-RStransmitted in the cell where the IE is included, which the UE may be configured to measure on (see 38.214, section 5.2.2.3.1).
NZP-CSI-RS-Resource information element
-- ASN1START
-- TAG-NZP-CSI-RS-RESOURCE-START
NZP-CSI-RS-Resource ::=		SEQUENCE {
	nzp-CSI-RS-ResourceId				NZP-CSI-RS-ResourceId,

	-- OFDM symbol location(s) in a slot and subcarrier occupancy in a PRB of the CSI-RS resource	
	resourceMapping							CSI-RS-ResourceMapping,
	-- Power offset of NZP CSI-RS RE to PDSCH RE. Value in dB. Corresponds to L1 parameter Pc (see 38.214, sections 5.2.2.3.1 and 4.1)
	powerControlOffset						INTEGER(-8..15),
	-- Power offset of NZP CSI-RS RE to SS RE. Value in dB. Corresponds to L1 parameter 'Pc_SS' (see 38.214, section 5.2.2.3.1)
	powerControlOffsetSS					ENUMERATED{db-3, db0, db3, db6}								OPTIONAL,	
	-- Scrambling ID (see 38.214, section 5.2.2.3.1)
	scramblingID							ScramblingId,

	-- Periodicity and slot offset sl1 corresponds to a periodicity of 1 slot, sl2 to a periodicity of two slots, and so on. 
	-- The corresponding offset is also given in number of slots. Corresponds to L1 parameter 'CSI-RS-timeConfig' (see 38.214, section 5.2.2.3.1)
	periodicityAndOffset					CSI-ResourcePeriodicityAndOffset							OPTIONAL, --Cond PeriodicOrSemiPersistent

	-- For a target periodic CSI-RS, contains a reference to one TCI-State in TCI-States for providing the QCL source and 
	-- QCL type. For periodic CSI-RS, the source can be SSB or another periodic-CSI-RS.
	-- Corresponds to L1 parameter 'QCL-Info-PeriodicCSI-RS' (see 38.214, section 5.2.2.3.1)
	qcl-InfoPeriodicCSI-RS						TCI-StateId												OPTIONAL, --Cond Periodic
	...
}

-- TAG-NZP-CSI-RS-RESOURCE-STOP
-- ASN1STOP

–	NZP-CSI-RS-ResourceId
The IE NZP-CSI-RS-ResourceId is used to identify one NZP-CSI-RS-Resource.
NZP-CSI-RS-ResourceId information element
-- ASN1START
-- TAG-NZP-CSI-RS-RESOURCEID-START
NZP-CSI-RS-ResourceId ::= 					INTEGER (0..maxNrofNZP-CSI-RS-Resources-1)

-- TAG-NZP-CSI-RS-RESOURCEID-STOP
-- ASN1STOP

–	P-Max
The IE P-Max is used to limit the UE's uplink transmission power on a carrier frequency, see TS 38.101 [14].
P-Max information element
-- ASN1START
-- TAG-P-MAX-START

P-Max ::=				INTEGER (-30..33)

-- TAG-P-MAX-STOP
-- ASN1STOP

–	PCI-List
The IE PCI-List concerns a list of physical cell identities, which may be used for different purposes.
PCI-List information element
-- ASN1START
-- TAG-PCI-LIST-START

PCI-List ::=						SEQUENCE (SIZE (1..maxNrofCellMeas)) OF PhysCellId

-- TAG-PCI-LIST-STOP
-- ASN1STOP

–	PCI-Range
The IE PCI-Range is used to encode either a single or a range of physical cell identities. The range is encoded by using a start value and by indicating the number of consecutive physical cell identities (including start) in the range. For fields comprising multiple occurrences of PCI-Range, the Network may configure overlapping ranges of physical cell identities.
PCI-Range information element
-- ASN1START
-- TAG-PCI-RANGE-START

PCI-Range ::=				SEQUENCE {
	start							PhysCellId,
	range							ENUMERATED {
										n4, n8, n12, n16, n24, n32, n48, n64, n84,
										n96, n128, n168, n252, n504, n1008,
										spare1} 					OPTIONAL	-- Need Nss
}

-- TAG-PCI-RANGE-STOP
-- ASN1STOP

PCI-Range field descriptionsrange
Indicates the number of physical cell identities in the range (including start). Value n4 corresponds with 4, n8 corresponds with 8 and so on. The UE shall apply value 1 in case the field is absent, in which case only the physical cell identity value indicated by start applies.start
Indicates the lowest physical cell identity in the range.
–	PCI-RangeIndex
The IE PCI-RangeIndex identifies a physical cell id range, which may be used for different purposes.
PCI-RangeIndex information element
-- ASN1START
-- TAG-PCI-RANGE-INDEX-START

PCI-RangeIndex ::=						INTEGER (1..maxNrofPCI-Ranges)


-- TAG-PCI-RANGE-INDEX-STOP
-- ASN1STOP

–	PCI-RangeIndexList
The IE PCI-RangeIndexList concerns a list of indexes of physical cell id ranges, which may be used for different purposes.
PCI-RangeIndexList information element
-- ASN1START
-- TAG-PCI-RANGE-INDEX-LIST-START

PCI-RangeIndexList ::=						SEQUENCE (SIZE (1..maxNrofPCI-Ranges)) OF PCI-RangeIndex

-- TAG-PCI-Range-INDEX-LIST-STOP
-- ASN1STOP

–	PDCCH-Config
The PDCCH-Config IE is used to configure UE specific PDCCH parameters such as control resource sets (CORESET), search spaces and additional parameters for acquiring the PDCCH. 
PDCCH-Config information element
-- ASN1START
-- TAG-PDCCH-CONFIG-START

PDCCH-Config ::= 						SEQUENCE {
	-- List of UE specifically configured Control Resource Sets (CORESETs) to be used by the UE.
	-- The network configures at most 3 CORESETs per BWP per cell (including the initial CORESET).
	controlResourceSetToAddModList			SEQUENCE(SIZE (1..3)) OF ControlResourceSet 		OPTIONAL,
	controlResourceSetToReleaseList			SEQUENCE(SIZE (1..3)) OF ControlResourceSetId			OPTIONAL,

	-- List of UE specifically configured Control Resource Sets (CORESETs).
	-- The network configures at most 10 Search Spaces per BWP per cell (including the initial Search Space).
	searchSpacesToAddModList				SEQUENCE(SIZE (1..10)) OF SearchSpace						OPTIONAL,
	searchSpacesToReleaseList				SEQUENCE(SIZE (1..10)) OF SearchSpaceId						OPTIONAL,

	-- Configuration of downlink preemtption indications to be monitored in this cell. 
	-- Corresponds to L1 parameter 'Preemp-DL' (see 38.214, section 11.2)
	-- FFS_RAN1: LS R1-1801281 indicates this is "Per Cell (but association with each configured BWP is needed)" => Unclear, keep on BWP for now.
	downlinkPreemption						SetupRelease { DownlinkPreemption }															OPTIONAL,	-- Need M

	-- Configuration of Slot-Format-Indicators to be monitored in this cell

	-- FFS_RAN1 discusses still whether this SFI payload configuration is BWP- or Cell-Specific. 
	slotFormatIndicator						SetupRelease { SlotFormatIndicator }															OPTIONAL,	-- Need M
	-- Enable and configure reception of group TPC commands for PUSCH
	tpc-PUSCH								SetupRelease { PUSCH-TPC-CommandConfig }							OPTIONAL,   -- Need M

	-- Enable and configure reception of group TPC commands fpr PUCCH
	tpc-PUCCH								SetupRelease { PUCCH-TPC-CommandConfig }							OPTIONAL,   -- Cond PUCCH-CellOnly

	...
}

-- TAG-PDCCH-CONFIG-STOP 
-- ASN1STOP

Conditional PresenceExplanationPUCCH-CellOnlyThe field is optionally present, Need M, for the PDCCH-Config of an SpCells as well as for SCells configured with PUCCH. The Field is absent otherwise.
–	PDCCH-ConfigCommon
The IE PDCCH-ConfigCommon is used to configure cell specific PDCCH parameters provided in SIB as well as during handover and PSCell/SCell addition.
PDCCH-ConfigCommon information element
-- ASN1START
-- TAG-PDCCH-CONFIGCOMMON-START

PDCCH-ConfigCommon ::=					SEQUENCE {

	-- A list of common control resource sets. Only CORESETs with ControlResourceSetId = 0 or 1 are allowed. The CORESET#0 
	-- corresponds to the CORESET configured in MIB (see pdcch-ConfigSIB1) and is used to provide that information to the UE
	-- by dedicated signalling during handover and (P)SCell addition. The CORESET#1 may be configured an used for RAR 
	-- (see ra-ControlResourceSet).
	commonControlResourcesSets					SEQUENCE (SIZE(1..2)) OF ControlResourceSet							OPTIONAL, 	-- Need R

	-- A list of additional common search spaces.
	commonSearchSpaces							SEQUENCE (SIZE(1..4)) OF SearchSpace								OPTIONAL,	-- Need R

	-- ID of the search space for SIB1 message.
	
	-- Corresponds to L1 parameter 'rmsi-SearchSpace' (see 38.213, section 10)
	searchSpaceSIB1								SearchSpaceId														OPTIONAL,	-- Need R
	-- ID of the Search space for other system information, i.e., SIB2 and beyond. 
	-- Corresponds to L1 parameter 'osi-SearchSpace' (see 38.213, section 10)
	-- If the field is absent, the monitoring occasions are derived as described in 38.213, section 10.1 and section 13.
	searchSpaceOtherSystemInformation			SearchSpaceId														OPTIONAL,	-- Need R
	
	-- ID of the Search space for paging. Corresponds to L1 parameter 'paging-SearchSpace' (see 38.213, section 10)
	-- If the field is absent, the monitoring occasions are derived as described in 38.213, section 10.1 and section 13.
	pagingSearchSpace							SearchSpaceId														OPTIONAL, 	-- Need R

	-- CORESET configured for random access. When the field is absent the UE uses the CORESET according to pdcch-ConfigSIB1
	-- which is associated with ControlResourceSetId = 0.
	-- Corresponds to L1 parameter 'rach-coreset-configuration' (see 38.211?, section FFS_Section)
	ra-ControlResourceSet					ControlResourceSetId																OPTIONAL, 	-- Need S
	-- ID of the Search space for random access procedure. Corresponds to L1 parameter 'ra-SearchSpace' (see 38.214?, section FFS_Section)
	-- If the field is absent, the monitoring occasions are derived as described in 38.213, section 10.1 and section 13.
	ra-SearchSpace							SearchSpaceId																	OPTIONAL, 	-- Need R
	...

}

-- TAG-PDCCH-CONFIGCOMMON-STOP
-- ASN1STOP

–	PDCP-Config 
The IE PDCP-Config is used to set the configurable PDCP parameters for signalling and data radio bearers.
PDCP-Config information element
-- ASN1START
-- TAG-PDCP-CONFIG-START

PDCP-Config ::=			SEQUENCE {
	drb						SEQUENCE {
		discardTimer			ENUMERATED {ms10, ms20, ms30, ms40, ms50, ms60, ms75, ms100, ms150, ms200, ms250, ms300, ms500, ms750, ms1500, infinity} 													OPTIONAL, -- Cond Setup
		pdcp-SN-SizeUL			ENUMERATED {len12bits, len18bits}				OPTIONAL, -- Cond Setup2
		pdcp-SN-SizeDL			ENUMERATED {len12bits, len18bits}				OPTIONAL, -- Cond Setup2
		headerCompression		CHOICE {
			notUsed					NULL,
			rohc					SEQUENCE {
				maxCID					INTEGER (1..16383)				DEFAULT 15,
				profiles				SEQUENCE {
					profile0x0001			BOOLEAN,
					profile0x0002			BOOLEAN,
					profile0x0003			BOOLEAN,
					profile0x0004			BOOLEAN,
					profile0x0006			BOOLEAN,
					profile0x0101			BOOLEAN,
					profile0x0102			BOOLEAN,
					profile0x0103			BOOLEAN,
					profile0x0104			BOOLEAN
				},
				drb-ContinueROHC			BOOLEAN 
			},
			uplinkOnlyROHC			SEQUENCE {
				maxCID					INTEGER (1..16383)				DEFAULT 15,
				profiles				SEQUENCE {
					profile0x0006			BOOLEAN
				},
				drb-ContinueROHC			BOOLEAN 
			},
			...
		},
		integrityProtection		ENUMERATED { enabled }														OPTIONAL,	-- Cond ConnectedTo5GC
		statusReportRequired	ENUMERATED { true }															OPTIONAL,	-- Cond Rlc-AM
		outOfOrderDelivery		BOOLEAN
	}																											OPTIONAL,	-- Cond DRB
	-- FFS / TODO: Handle more than two secondary cell groups
	moreThanOneRLC			SEQUENCE {
		primaryPath				SEQUENCE {
			cellGroup				CellGroupId											OPTIONAL,	-- Need R
			logicalChannel			LogicalChannelIdentity								OPTIONAL	-- Need R
		},
		ul-DataSplitThreshold	UL-DataSplitThreshold 									OPTIONAL, -- Cond SplitBearer						
		pdcp-Duplication			ENUMERATED { true }													OPTIONAL	-- Need R
	}																										OPTIONAL, -- Cond MoreThanOneRLC

	t-Reordering				ENUMERATED {
									ms0, ms1, ms2, ms4, ms5, ms8, ms10, ms15, ms20, ms30, ms40, ms50, ms60, ms80, ms100, ms120, ms140, ms160, ms180, ms200, ms220, 
									ms240, ms260, ms280, ms300,	ms500, ms750, ms1000, ms1250, ms1500, ms1750, ms2000, ms2250, ms2500, ms2750,
									ms3000, spare28, spare27, spare26, spare25, spare24, spare23, spare22, spare21, spare20,
									spare19, spare18, spare17, spare16, spare15, spare14, spare13, spare12, spare11, spare10, spare09,
									spare08, spare07, spare06, spare05, spare04, spare03, spare02, spare01 }		OPTIONAL, -- Need S

	
	...
}

UL-DataSplitThreshold ::= ENUMERATED { 
											b0, b100, b200, b400, b800, b1600, b3200, b6400, b12800, b25600, b51200, b102400, b204800, 
											b409600, b819200, b1228800, b1638400, b2457600, b3276800, b4096000, b4915200, b5734400, 
											b6553600, infinity, spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1}

-- TAG-PDCP-CONFIG-STOP
-- ASN1STOP

PDCP-Configfield descriptionsdiscardTimer
Value in ms of discardTimer specified in TS 38.323 [5]. Value ms50 corresponds to 50 ms, ms100 corresponds to 100 ms and so on.drb-ContinueROHC
Indicates whether the PDCP entity continues or resets the ROHC header compression protocol during PDCP re-establishment. This field is set to true only in case of reconfiguration with sync where the PDCP termination point is not changed.headerCompression
If rohc is configured, the UE shall apply the configured ROHC profile(s) in both uplink and downlink. If uplinkOnlyROHC is configured, the UE shall apply the configure ROHC profile(s) in uplink (there is no header compression in downlink). ROHC can be configured for any bearer type. ROHC should be configured at reconfiguration involving PDCP re-establishment if the RB was previously configured with ROHC.  Header compression should not be configured when out-of-order delivery is allowed for PDCP SDUs.
integrityProtection
Indicates whether or not integrity protection is configured for this radio bearer.  The value of integrityProtection for a DRB can only be changed using reconfiguration with sync.
FFS: text to indicate where to find the key.maxCID
Indicates the value of the MAX_CID parameter as specified in TS 38.323 [5]
FFS: need to specify something with respect to UE capabilities.outOfOrderDelivery
Indicates whether or not outOfOrderDelivery specified in TS 38.323 [5] is configured. Out-of-order delivery is configured only when the radio bearer is establishedpdcp-Duplication
Indicates whether or not uplink duplication is configured as specified in TS 38.323 [5]. This field is absent in this version of the specification.pdcp-SN-Size
PDCP sequence number size, 12 or 18 bits.primaryPath
Indicates the cell group ID and LCID of the primary RLC entity as specified in TS 38.323 clause 5.2.1 for UL data tranmission when more than one RLC entity is associated with the PDCP entity. In this version of the specification, only cell group ID corresponding to MCG is supported for SRBs.pdcp-SN-Size
PDCP sequence number size, 12 or 18 bits.statusReportRequired
For AM DRBs, indicates whether the DRB is configured to send a PDCP status report in the uplink, as specified in TS 38.323 [5]. For UL DRBs, the value shall be ignored by the UE.t-Reordering
Value in ms of t-Reordering specified in TS 38.323 [5]. Value ms0 corresponds to 0ms, value ms20 corresponds to 20ms, value ms40 corresponds to 40ms, and so on.  When the field is absent the UE applies the value infinity.ul-DataSplitThreshold
Parameter specified in TS 38.323 [5]. Value b0 corresponds to 0 bits, value b100 corresponds to 100 bits, value b200 corresponds to 200 bits, and so on. 

Conditional presenceExplanationDRBThis field is mandatory present when the corresponding DRB is being set up, not present for SRBs.  Otherwise this field is optionally present, need M.MoreThanOneRLCThis field is mandatory present upon RRC reconfiguration with setup of a PDCP entity for a radio bearer with more than one associated logical channel and upon RRC reconfiguration with the association of an additional logical channel to the PDCP entity.
Upon RRC reconfiguration when a PDCP entity is associated with multiple logical channels, this field is optionally present need M. Otherwise, this field is absent and all its included parameters are released.Rlc-AMThe field is mandatory present upon setup of a PDCP entity for a radio bearer configured with RLC AM. Otherwise, the field is optionally present, need R.SetupThe field is mandatory present in case of radio bearer setup. Otherwise the field is optionally present, need M.SplitBearerThe field is optional present, need M, in case of radio bearer with more than one associated RLC mapped to different cell groups. Otherwise the field is not present and the UE shall delete any existing value for this field.ConnectedTo5GCThe field is optionally present, need R, if EN-DC is not configured, and absent if EN-DC is configured.Setup2This field is mandatory present in case for radio bearer setup for RLC-AM and RLC-UM. This field is optionally present in case for handover and reestablishment for for RLC-UM..Otherwise, ths field is not present.
–	PDSCH-Config
The PDSCH-Config IE is used to configure the UE specific PDSCH parameters. 
PDSCH-Config information element
-- ASN1START
-- TAG-PDSCH-CONFIG-START

PDSCH-Config ::= 						SEQUENCE {
	-- Identifer used to initalite data scrambling (c_init) for both PDSCH.
	-- Corresponds to L1 parameter 'Data-scrambling-Identity' (see 38,214, section FFS_Section)
	-- FFS:_Replace by tye ScramblingId used in other places?
	dataScramblingIdentityPDSCH			INTEGER (0..1007)															OPTIONAL,

	-- DMRS configuration for PDSCH transmissions using PDSCH mapping type A (chosen dynamically via PDSCH-TimeDomainResourceAllocation).
	dmrs-DownlinkForPDSCH-MappingTypeA			SetupRelease { DMRS-DownlinkConfig }										OPTIONAL,	-- Need M
	-- DMRS configuration for PDSCH transmissions using PDSCH mapping type B (chosen dynamically via PDSCH-TimeDomainResourceAllocation).
	dmrs-DownlinkForPDSCH-MappingTypeB			SetupRelease { DMRS-DownlinkConfig } 							OPTIONAL,	-- Need M


	-- A list of Transmission Configuration Indicator (TCI) states for dynamically indicating (over DCI) a transmission configuration 
	-- which includes QCL-relationships between the DL RSs in one RS set and the PDSCH DMRS ports 
	-- (see 38.214, section 5.1.4)
	tci-StatesToAddModList					SEQUENCE (SIZE(1..maxNrofTCI-States)) OF TCI-State					OPTIONAL,	-- Need N
	tci-StatesToReleaseList					SEQUENCE (SIZE(1..maxNrofTCI-States)) OF TCI-StateId						OPTIONAL,	-- Need N

	-- Interleaving unit configurable between 2 and 4 PRBs
	-- Corresponds to L1 parameter 'VRB-to-PRB-interleaver' (see 38.211, section 6.3.1.6)
	vrb-ToPRB-Interleaver					ENUMERATED {n2, n4},

	-- Configuration of resource allocation type 0 and resource allocation type 1 for non-fallback DCI
	-- Corresponds to L1 parameter 'Resouce-allocation-config' (see 38.214, section 5.1.2)
	resourceAllocation						ENUMERATED { resourceAllocationType0, 
resourceAllocationType1, 
dynamicSwitch},

	-- List of time-domain configurations for timing of DL assignment to DL data. If configured, the values provided herein 
	-- override the values received in corresponding PDSCH-ConfigCommon.
	pdsch-AllocationList			SEQUENCE (SIZE(1..maxNrofDL-Allocations)) OF PDSCH-TimeDomainResourceAllocation		OPTIONAL,	-- Need R
	-- Number of repetitions for data. Corresponds to L1 parameter 'aggregation-factor-DL' (see 38.214, section FFS_Section)
	-- When the field is absent the UE applies the value 1
	pdsch-AggregationFactor					ENUMERATED { n2, n4, n8 }													OPTIONAL,	-- Need S

	-- Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources 
	-- indicated in the nexted bitmaps. Corresponds to L1 parameter 'Resource-set-BWP' (see 38.214, section 5.1.2.2.3)
	-- FFS: RAN1 indicates that there should be a set of patterns per cell and one per BWP => Having both seems unnecessary.

	rateMatchPatternToAddModList			SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPattern											OPTIONAL, -- Need N
	rateMatchPatternToReleaseList			SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPatternId		OPTIONAL, -- Need N

	-- The IDs of a first group of RateMatchPatterns defined in the rateMatchPatternToAddModList.
	-- Corresponds to L1 parameter 'Resource-set-group-1'. (see 38.214, section FFS_Section)
	rateMatchPatternGroup1					SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPatternId		OPTIONAL, -- Need R
	-- The IDs of a second group of RateMatchPatterns defined in the rateMatchPatternToAddModList
	-- Corresponds to L1 parameter 'Resource-set-group-2'. (see 38.214, section FFS_Section)
	rateMatchPatternGroup2					SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPatternId		OPTIONAL, -- Need R


	-- Selection between config 1 and config 2 for RBG size for PDSCH. Corresponds to L1 parameter 'RBG-size-PDSCH' (see 38.214, section 5.1.2.2.1)
	rbg-Size								ENUMERATED {config1, config2},

	-- Indicates which MCS table the UE shall use for PDSCH. Corresponds to L1 parameter 'MCS-Table-PDSCH' (see 38.214, section 5.1.3.1).
	mcs-Table								ENUMERATED {qam64, qam256},

	-- Maximum number of code words that a single DCI may schedule. This changes the number of MCS/RV/NDI bits in the DCI message from 1 to 2.
	maxNrofCodeWordsScheduledByDCI			ENUMERATED {n1, n2}															OPTIONAL, 	-- Need R


	-- Indicates the PRB bundle type and bundle size(s). If "dynamic" is chosen, the actual BundleSizeSet to use is indicated via DCI. 
	-- If a bundleSize(Set) value is absent, the UE applies the value n2. Corresponds to L1 parameter 'PRB_bundling' 
	-- (see 38.214, section 5.1.2.3)
	prb-BundlingType					CHOICE {
		static									SEQUENCE {
			bundleSize								ENUMERATED { n4, wideband }											OPTIONAL	-- Need S
		},
		dynamic 								SEQUENCE {
			bundleSizeSet1							ENUMERATED { n4, wideband, n2-wideband, n4-wideband }				OPTIONAL,	-- Need S
			bundleSizeSet2							ENUMERATED { n4, wideband }											OPTIONAL	-- Need S
		}
	},

	-- A list of Zero-Power (ZP) CSI-RS resources used for PDSCH rate-matching.
	-- Corresponds to L1 parameter 'ZP-CSI-RS-ResourceConfigList' (see 38.214, section FFS_Section)
	zp-CSI-RS-ResourceToAddModList			SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Resources)) OF ZP-CSI-RS-Resource	OPTIONAL,	-- Need N
	zp-CSI-RS-ResourceToReleaseList			SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Resources)) OF ZP-CSI-RS-ResourceId	OPTIONAL,	-- Need M

	-- A list of sets. Each set contains a set-ID and the IDs of one or more ZP-CSI-RS-Resources (the actual resources are defined in the 
	-- zp-CSI-RS-ResourceToAddModList). The network triggers a set by indicating its set-ID (ZP-CSI-RS-ResourceSetId) in the DCI payload.
	-- The resources referenced in these sets are confgiured with resourceType 'aperiodic'.
	-- Corresponds to L1 parameter ' ZP-CSI-RS-ResourceSetConfigList' (see 38.214, section FFS_Section)
	aperiodic-ZP-CSI-RS-ResourceSetsToAddModList	SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Sets)) OF ZP-CSI-RS-ResourceSet		OPTIONAL,	-- Need N
	aperiodic-ZP-CSI-RS-ResourceSetsToReleaseList	SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Sets)) OF ZP-CSI-RS-ResourceSetId	OPTIONAL,	-- Need N
	
	-- A list of sets. Each set contains a set-ID and the IDs of one or more ZP-CSI-RS-Resources (the actual resources are defined in the 
	-- zp-CSI-RS-ResourceToAddModList). The network triggers a set by indicating its set-ID (ZP-CSI-RS-ResourceSetId) in the MAC CE.
	-- The resources referenced in these sets are confgiured with resourceType 'semi-persistent'.
	-- Corresponds to L1 parameter 'SP-ZP-CSI-RS-Resource-List' (see 38.214, section 5.1.4_Section)
	sp-ZP-CSI-RS-ResourceSetsToAddModList	SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Sets)) OF ZP-CSI-RS-ResourceSet		OPTIONAL,	-- Need N
	sp-ZP-CSI-RS-ResourceSetsToReleaseList	SEQUENCE (SIZE (1..maxNrofZP-CSI-RS-Sets)) OF ZP-CSI-RS-ResourceSetId	OPTIONAL,	-- Need N

	...
}




-- TAG-PDSCH-CONFIG-STOP
-- ASN1STOP

–	PDSCH-ConfigCommon
The IE PDSCH-ConfigCommon is used to configure FFS
PDSCH-ConfigCommon information element
-- ASN1START
-- TAG-PDSCH-CONFIGCOMMON-START

PDSCH-ConfigCommon ::=					SEQUENCE {

	-- List of time-domain configurations for timing of DL assignment to DL data 
	pdsch-AllocationList			SEQUENCE (SIZE(1..maxNrofDL-Allocations)) OF PDSCH-TimeDomainResourceAllocation			OPTIONAL,	-- Need R

	...
}

-- TAG-PDSCH-CONFIGCOMMON-STOP
-- ASN1STOP

–	PDSCH-ServingCellConfig
The IE PDSCH-ServingCellConfig is used to configure UE specific PDSCH parameters that are common across the UE's BWPs of one serving cell. 
PDSCH-ServingCellConfig information element
-- ASN1START
-- TAG-PDSCH-SERVINGCELLCONFIG-START

PDSCH-ServingCellConfig ::= 			SEQUENCE {
	-- Enables and configures code-block-group (CBG) based transmission (see 38.213, section 9.1.1)
	codeBlockGroupTransmission				SetupRelease { PDSCH-CodeBlockGroupTransmission }						OPTIONAL,	-- Need M
	-- Accounts for overhead from CSI-RS, CORESET, etc. If the field is absent, the UE applies value xOh0.
	-- Corresponds to L1 parameter 'Xoh-PDSCH' (see 38.214, section 5.1.3.2)
	xOverhead								ENUMERATED { xOh6, xOh12, xOh18 }										OPTIONAL,	-- Need S
	-- The number of HARQ processes to be used on the PDSCH of a serving cell. n2 corresponds to 2 HARQ processes, n4 to 4 HARQ processes 
	-- and so on. If the field is absent, the UE uses 8 HARQ processes. 
	-- Corresponds to L1 parameter 'number-HARQ-process-PDSCH' (see 38.214, section REF) 
	nrofHARQ-ProcessesForPDSCH				ENUMERATED {n2, n4, n6, n10, n12, n16}									OPTIONAL,	-- Need S
	-- The ID of the serving cell (of the same cell group) to use for PUCCH. 
	-- If the field is absent, the UE sends the HARQ feedback on the PUCCH of the SpCell of this cell group. 
	pucch-Cell								ServCellIndex															OPTIONAL	,	-- Cond SCellAddOnly
	...
}

PDSCH-CodeBlockGroupTransmission ::=		SEQUENCE {
	-- Maximum number of code-block-groups (CBGs) per TB. In case of multiple CW the maximum CBG is 4 (see 38.213, section 9.1.1)
	maxCodeBlockGroupsPerTransportBlock		ENUMERATED {n2, n4, n6, n8},
	-- Indicates whether CBGFI for CBG based (re)transmission in DL is enabled (true). (see 38.212, section 7.3.1.2.2)
	codeBlockGroupFlushIndicator			BOOLEAN,
	...
}

-- TAG-PDSCH-SERVINGCELLCONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationSCellAddOnlyIt is optionally present, Need M, for SCells when adding a new SCell. The field is absent when reconfiguring SCells. The field is also absent for the SpCells.
–	PDSCH-TimeDomainResourceAllocation
The IE PDSCH-TimeDomainResourceAllocation is used to configure a time domain relation between PDCCH and PDSCH.
PDSCH-TimeDomainResourceAllocation information element
-- ASN1START
-- TAG-PDSCH-TIMEDOMAINRESOURCEALLOCATION-START

PDSCH-TimeDomainResourceAllocation ::= 		SEQUENCE {
	-- Corresponds to L1 parameter 'K0' (see 38.214, section FFS_Section)
	-- When the field is absent the UE applies the value 0
	k0									INTEGER (1..3)																OPTIONAL,	-- Need S
	-- PDSCH mapping type. Corresponds to L1 parameter 'Mapping-type' (see 38.214, section FFS_Section)
	mappingType							ENUMERATED {typeA, typeB},
	-- An index into a table/equation in RAN1 specs capturing valid combinations of start symbol and length (jointly encoded)
	-- Corresponds to L1 parameter 'Index-start-len' (see 38.214, section FFS_Section)
	startSymbolAndLength				BIT STRING (SIZE (7))
}

-- TAG-PDSCH-TIMEDOMAINRESOURCEALLOCATION-STOP
-- ASN1STOP

–	PhysCellId
The PhysCellId identifies the physical cell identity (PCI). 
PhysCellId information element
-- ASN1START
-- TAG-PHYS-CELL-ID-START

PhysCellId ::=						INTEGER (0..1007)

-- TAG-PHYS-CELL-ID-STOP
-- ASN1STOP

–	PRB-Id
The PRB-Id indentifies a Physical Resource Block (PRB) position within a carrier. 
PRB-Id information element
-- ASN1START
-- TAG-PRB-ID-START

PRB-Id ::=						INTEGER (0..maxNrofPhysicalResourceBlocks-1)

-- TAG-PRB-ID-STOP
-- ASN1STOP

–	PTRS-DownlinkConfig
The IE PTRS-DownlinkConfig is used to configure downlink phase tracking reference signals (PTRS) (see 38.214 section5.1.6.3)
PTRS-DownlinkConfig information element
-- ASN1START
-- TAG-PTRS-DOWNLINKCONFIG-START

PTRS-DownlinkConfig ::= 					SEQUENCE {
	-- Presence and  frequency density of DL PT-RS as a function of Scheduled BW 
	-- If the field is absent, the UE uses K_PT-RS = 2.
	-- Corresponds to L1 parameter 'DL-PTRS-frequency-density-table' (see 38.214, section 5.1)
	frequencyDensity							SEQUENCE (SIZE (2)) OF INTEGER (1..276)			OPTIONAL,	-- Need S
	-- Presence and time density of DL PT-RS  as a function of MCS. The value 29 is only applicable for MCS Table 5.1.3.1-1 (38.214)
	-- If the field is absent, the UE uses L_PT-RS = 1.
	-- Corresponds to L1 parameter 'DL-PTRS-time-density-table' (see 38.214, section 5.1)
	timeDensity									SEQUENCE (SIZE (3)) OF INTEGER (0..29)		OPTIONAL, 	-- Need S
	-- EPRE ratio between PTRS and PDSCH. Value 0 correspond to the codepoint ”00” in table 4.1-2. Value 1 corresponds to codepoint ”01” 
	-- If the field is not provided, the UE applies value 0. Corresponds to L1 parameter 'DL-PTRS-EPRE-ratio' (see 38.214, section 4.1)
	epre-RatioPort1								INTEGER (0..3)															OPTIONAL,	-- Need S
	-- EPRE ratio between PTRS and PDSCH. Value 0 correspond to the codepoint ”00” in table 4.1-2. Value 1 corresponds to codepoint ”01”.
	-- If the field is not provided, the UE applies value 0. Corresponds to L1 parameter 'DL-PTRS-EPRE-ratio' (see 38.214, section 4.1)
	epre-RatioPort2								SEQUENCE (SIZE (1..2)) OF INTEGER (0..3)								OPTIONAL,	-- Cond TwoPorts
	-- Indicates the subcarrier offset for DL PTRS. If the field is absent, the UE applies the value offset00.
	-- Corresponds to L1 parameter 'DL-PTRS-RE-offset' (see 38.214, section 5.1.6.3)
	resourceElementOffset						ENUMERATED { offset01, offset10, offset11 }							OPTIONAL,	-- Need S
	...
}

-- TAG-PTRS-DOWNLINKCONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationTwoPortsThe field is optionally present, Need S, when the field nrofPTRS-Ports in at least one TCI-State (see PDSCH-Config) is set to n2. Otherwise the field is absent. 
–	PTRS-UplinkConfig
The IE PTRS-UplinkConfig is used to configure uplink Phase-Tracking-Reference-Signals (PTRS).
PTRS-UplinkConfig information element
-- ASN1START
-- TAG-PTRS-UPLINKCONFIG-START

PTRS-UplinkConfig ::= 					SEQUENCE { 

	modeSpecificParameters					CHOICE {
		-- Configuration of UL PTRS for CP-OFDM
		cp-OFDM									SEQUENCE {
			-- Presence and  frequency density of UL PT-RS for CP-OFDM waveform as a function of scheduled BW 
			-- If the field is absent, the UE uses K_PT-RS = 2.
			-- Corresponds to L1 parameter 'UL-PTRS-frequency-density-table' (see 38.214, section 6.1)
			frequencyDensity						SEQUENCE (SIZE (2)) OF INTEGER (1..276)		OPTIONAL,	-- Need S
			-- Presence and time density of UL PT-RS for CP-OFDM waveform as a function of MCS 
				-- If the field is absent, the UE uses L_PT-RS = 1.
			-- Corresponds to L1 parameter 'UL-PTRS-time-density-table' (see 38.214, section 6.1)
			timeDensity								SEQUENCE (SIZE (3)) OF INTEGER (0..29)		OPTIONAL, 	-- Need S
			-- The maximum number of UL PTRS ports for CP-OFDM. 
			-- Corresponds to L1 parameter 'UL-PTRS-ports' (see 38.214, section 6.2.3.1)
			maxNrofPorts								ENUMERATED {n1, n2},
			-- Indicates the subcarrier offset for UL PTRS for CP-OFDM. 
			-- Corresponds to L1 parameter 'UL-PTRS-RE-offset' (see 38.214, section 6.1)
			resourceElementOffset					ENUMERATED {offset01, offset10, offset11 }			OPTIONAL,	-- Need S
			-- UL PTRS power boosting factor per PTRS port. Corresponds to L1 parameter 'UL-PTRS-power' (see 38.214, section 6.1, table 6.2.3-5)
			ptrs-Power								ENUMERATED {p00, p01, p10, p11}
		},
		-- Configuration of UL PTRS for DFT-S-OFDM. 
		dft-S-OFDM								SEQUENCE {
			-- Sample density of PT-RS for DFT-s-OFDM, pre-DFT, indicating a set of thresholds T={NRBn,n=0,1,2,3,4},
			-- that indicates dependency between presence of PT-RS and scheduled BW and the values of X and K the UE should 
			-- use depending on the scheduled BW according to the table in 38.214 FFS_Section. 
			-- Corresponds to L1 parameter 'UL-PTRS-pre-DFT-density' (see 38.214, section 6.1, 6.2.3-3)
			sampleDensity						SEQUENCE (SIZE (5)) OF INTEGER (1..276),
			-- Time density (OFDM symbol level) of PT-RS for DFT-s-OFDM. If the value is absent, the UE applies value d1.
			-- Corresponds to L1 parameter 'UL-PTRS-time-density-transform-precoding' (see 38.214, section 6.1)
			timeDensity							ENUMERATED {d2}														OPTIONAL	-- Need S
		}
	}																													OPTIONAL,	-- Cond M
	...
}

-- TAG-PTRS-UPLINKCONFIG-STOP
-- ASN1STOP

–	PUCCH-Config
The IE PUCCH-Config is used to configure UE specific PUCCH parameters (per BWP).
PUCCH-Config information element
-- ASN1START
-- TAG-PUCCH-CONFIG-START

PUCCH-Config ::= 						SEQUENCE {
	-- Lists for adding and releasing PUCCH resource sets (see 38.213, section 9.2)
	resourceSetToAddModList					SEQUENCE (SIZE (1..maxNrofPUCCH-ResourceSets)) OF PUCCH-ResourceSet				OPTIONAL,	-- Need N
	resourceSetToReleaseList				SEQUENCE (SIZE (1..maxNrofPUCCH-ResourceSets)) OF PUCCH-ResourceSetId			OPTIONAL,	-- Need N

	-- Lists for adding and releasing PUCCH resources applicable for the UL BWP and serving cell in which the PUCCH-Config 
	-- is defined. The resources defined herein are referred to from other parts of the configuration to determine which 
	-- resource the UE shall use for which report. 
	resourceToAddModList					SEQUENCE (SIZE (1..maxNrofPUCCH-Resources)) OF PUCCH-Resource				OPTIONAL,	-- Need N
	resourceToReleaseList					SEQUENCE (SIZE (1..maxNrofPUCCH-Resources)) OF PUCCH-ResourceId				OPTIONAL,	-- Need N

	-- Parameters that are common for all PUCCH resources of format 1
	format1									SetupRelease { PUCCH-FormatConfig }												OPTIONAL,	-- Need M
	-- Parameters that are common for all PUCCH resources of format 2
	format2									SetupRelease { PUCCH-FormatConfig }												OPTIONAL,	-- Need M
	-- Parameters that are common for all PUCCH resources of format 3
	format3									SetupRelease { PUCCH-FormatConfig }												OPTIONAL,	-- Need M
	-- Parameters that are common for all PUCCH resources of format 4
	format4									SetupRelease { PUCCH-FormatConfig }												OPTIONAL,	-- Need M

	schedulingRequestResourceToAddModList	SEQUENCE (SIZE (1..maxNrofSR-Resources)) OF SchedulingRequestResourceConfig		OPTIONAL, -- Need M
	schedulingRequestResourceToReleaseList	SEQUENCE (SIZE (1..maxNrofSR-Resources)) OF SchedulingRequestResourceId			OPTIONAL, -- Need M

	multi-CSI-PUCCH-ResourceList			SEQUENCE (SIZE (1..2)) OF PUCCH-ResourceId										OPTIONAL,-- Need M

	-- List of timiing for given PDSCH to the DL ACK. In this version of the specification only the values [0..8] are applicable.
	-- Corresponds to L1 parameter 'Slot-timing-value-K1' (see 38.213, section FFS_Section)
	dl-DataToUL-ACK							SEQUENCE (SIZE (8)) OF INTEGER (0..15)											OPTIONAL,	-- Need M

	-- Configuration of the spatial relation between a reference RS and PUCCH. Reference RS can be SSB/CSI-RS/SRS.
	-- If the list has more than one element, MAC-CE selects a single element (see 38.321, section FFS_Section).
	-- Corresponds to L1 parameter 'PUCCH-SpatialRelationInfo' (see 38.213, section FFS_Section)
	spatialRelationInfoToAddModList			SEQUENCE (SIZE (1..maxNrofSpatialRelationInfos)) OF PUCCH-SpatialRelationInfo	OPTIONAL,	-- Need N
	spatialRelationInfoToReleaseList		SEQUENCE (SIZE (1..maxNrofSpatialRelationInfos)) OF PUCCH-SpatialRelationInfoId	OPTIONAL,	-- Need N

	pucch-PowerControl						PUCCH-PowerControl																OPTIONAL,	-- Need M
	...
}

PUCCH-FormatConfig ::=					SEQUENCE {
	-- Enabling inter-slot frequency hopping when PUCCH Format 1, 3 or 4 is repetead over multiple slots.
	-- The field is not applicable for format 2.
	interslotFrequencyHopping				ENUMERATED {enabled}														OPTIONAL, 	-- Need R
	-- Enabling 2 DMRS symbols per hop of a PUCCH Format 3 or 4 if both hops are more than X symbols when FH is enabled (X=4).
	-- Enabling 4 DMRS sybmols for a PUCCH Format 3 or 4 with more than 2X+1 symbols when FH is disabled (X=4).
	-- Corresponds to L1 parameter 'PUCCH-F3-F4-additional-DMRS' (see 38.213, section 9.2.1)
	-- The field is not applicable for format 1 and 2.
	additionalDMRS							ENUMERATED {true}															OPTIONAL,	-- Need R
	-- Max coding rate to determine how to feedback UCI on PUCCH for format 2, 3 or 4
	-- Corresponds to L1 parameter 'PUCCH-F2-maximum-coderate', 'PUCCH-F3-maximum-coderate' and 'PUCCH-F4-maximum-coderate' 
	-- (see 38.213, section 9.2.5)
	-- The field is not applicable for format 1.
	maxCodeRate								PUCCH-MaxCodeRate															OPTIONAL,	-- Need R
	-- Number of slots with the same PUCCH F1, F3 or F4. When the field is absent the UE applies the value n1.
	-- Corresponds to L1 parameter 'PUCCH-F1-number-of-slots', 'PUCCH-F3-number-of-slots' and 'PUCCH-F4-number-of-slots'
	-- (see 38.213, section 9.2.6)
	-- The field is not applicable for format 2.
	nrofSlots								ENUMERATED {n2,n4,n8}													OPTIONAL, 	-- Need S
	-- Enabling pi/2 BPSK for UCI symbols instead of QPSK for PUCCH. 
	-- Corresponds to L1 parameter 'PUCCH-PF3-PF4-pi/2PBSK' (see 38.213, section 9.2.5)
	-- The field is not applicable for format 1 and 2.
	pi2PBSK									ENUMERATED {enabled}														OPTIONAL, 	-- Need R
	-- Enabling simultaneous transmission of CSI and HARQ-ACK feedback with or without SR with PUCCH Format 2, 3 or 4
	-- Corresponds to L1 parameter 'PUCCH-F2-Simultaneous-HARQ-ACK-CSI', 'PUCCH-F3-Simultaneous-HARQ-ACK-CSI' and
	-- 'PUCCH-F4-Simultaneous-HARQ-ACK-CSI' (see 38.213, section 9.2.5)
	-- When the field is absent the UE applies the value OFF
	-- The field is not applicable for format 1.
	simultaneousHARQ-ACK-CSI				ENUMERATED {true}															OPTIONAL	-- Need R
}

PUCCH-MaxCodeRate ::= 						ENUMERATED {zeroDot08, zeroDot15, zeroDot25, zeroDot35, zeroDot45, zeroDot60, zeroDot80}

PUCCH-SpatialRelationInfo ::=				SEQUENCE {
	pucch-SpatialRelationInfoId					PUCCH-SpatialRelationInfoId,
	referenceSignal 							CHOICE {
		ssb-Index									SSB-Index,
		csi-RS-Index								NZP-CSI-RS-ResourceId,
		srs											SRS-ResourceId
	},
	pucch-PathlossReferenceRS-Id 				PUCCH-PathlossReferenceRS-Id,
	p0-PUCCH-Id									P0-PUCCH-Id,
	closedLoopIndex								ENUMERATED { i0, i1 }
}

PUCCH-SpatialRelationInfoId ::= 			INTEGER (1..maxNrofSpatialRelationInfos)

-- A set with one or more PUCCH resources
PUCCH-ResourceSet ::=							SEQUENCE {
	pucch-ResourceSetId								PUCCH-ResourceSetId,

	-- PUCCH resources of format0 and format1 are only allowed in the first PUCCH reosurce set,
	-- i.e., in a PUCCH-ResourceSet with pucch-ResourceSetId = 0. This set may contain between 8 and 32 resources. 
	-- PUCCH resources of format2, format3 and format4 are only allowed  in a PUCCH-ReosurceSet with pucch-ResourceSetId > 0. If present, these sets must contain 8 resources each.
	-- The UE chooses a PUCCH-Resource from this list based on the 3-bit PUCCH resource indicator field in DCI as 
	-- speciied in 38.213, FFS_section.
	-- Note that this list contains only a list of resource IDs. The actual resources are configured in PUCCH-Config.
	resources										SEQUENCE (SIZE (8..maxNrofPUCCH-ResourcesPerSet)) OF PUCCH-ResourceId,

	-- Maximum number of payload bits minus 1 that the UE may transmit using this PUCCH resource set. In a PUCCH occurrence, the UE 
	-- chooses the first of its PUCCH-ResourceSet which supports the number of bits that the UE wants to transmit. 
	-- The field is not present in the first set (Set0) since the maximum Size of Set0 is specified to be 3 bit.
	-- The field is not present in the last configured set since the UE derives its maximum payload size as specified in 38.213.
	-- This field can take integer values that are multiples of 4. Corresponds to L1 parameter 'N_2' or 'N_3' (see 38.213, section 9.2)
	maxPayloadMinus1								INTEGER (4..256)														OPTIONAL	-- Need R
}

PUCCH-ResourceSetId ::=							INTEGER (0..maxNrofPUCCH-ResourceSets-1)

PUCCH-Resource ::= 								SEQUENCE {
	pucch-ResourceId								PUCCH-ResourceId,

	startingPRB										PRB-Id, 
	-- Corresponds to the L1 parameter 'PUCCH-frequency-hopping' (see 38.213, section 9.2)
	intraSlotFrequencyHopping						ENUMERATED { enabled }													OPTIONAL,	-- Need R
	-- Index of starting PRB for second hop of PUCCH in case of FH. This value is appliable for intra-slot frequency hopping.
	-- Corresponds to L1 parameter 'PUCCH-2nd-hop-PRB' (see 38.213, section 9.2)
	secondHopPRB									PRB-Id																	OPTIONAL,	-- Need R

	-- Selection of the PUCCH format and format-specific parameters
	format											CHOICE {
		format0											PUCCH-format0,														-- Cond InFirstSetOnly
		format1											PUCCH-format1,														-- Cond InFirstSetOnly
		format2											PUCCH-format2,														-- Cond NotInFirstSet
		format3											PUCCH-format3,														-- Cond NotInFirstSet
		format4											PUCCH-format4														-- Cond NotInFirstSet
	}
}

PUCCH-ResourceId ::=							INTEGER (0..maxNrofPUCCH-Resources-1)


-- A PUCCH Format 0 resource configuration (see 38.213, section 9.2)
-- Corresponds to L1 parameter 'PUCCH-format0' (see 38.213, section 9.2.1)
PUCCH-format0 ::=								SEQUENCE {
	initialCyclicShift								INTEGER(0..11),
	nrofSymbols										INTEGER (1..2), 
	startingSymbolIndex								INTEGER(0..13) 
}

-- A PUCCH Format 1 resource configuration (see 38.213, section 9.2)
-- Corresponds to L1 parameter 'PUCCH-format1' (see 38.213, section 9.2.1)
PUCCH-format1 ::= 								SEQUENCE {
	initialCyclicShift								INTEGER(0..11), 
	nrofSymbols										INTEGER (4..14), 
	startingSymbolIndex								INTEGER(0..10), 
	timeDomainOCC									INTEGER(0..6)
}

-- A PUCCH Format 2 resource configuration (see 38.213, section 9.2)
-- Corresponds to L1 parameter 'PUCCH-format2onfig' (see 38.213, section 9.2.1)
PUCCH-format2 ::= 								SEQUENCE {
	nrofPRBs										INTEGER (1..16), 
	nrofSymbols										INTEGER (1..2), 
	startingSymbolIndex								INTEGER(0..13) 
}

-- A PUCCH Format 3 resource configuration(see 38.213, section 9.2)
-- Corresponds to L1 parameter 'PUCCH-format3' (see 38.213, section 9.2.1)
PUCCH-format3 ::= 								SEQUENCE {
	-- The supported values are 1,2,3,4,5,6,8,9,10,12,15 and 16
	nrofPRBs										INTEGER (1..16), 
	nrofSymbols										INTEGER (4..14), 
	startingSymbolIndex								INTEGER(0..10) 
}

-- A PUCCH Format 4 resource configuration (see 38.213, section 9.2)
-- Corresponds to L1 parameter 'PUCCH-format4' (see 38.213, section 9.2.1)
PUCCH-format4 ::= 								SEQUENCE {
	nrofSymbols										INTEGER (4..14), 
	occ-Length										ENUMERATED {n2,n4}, 
	occ-Index										ENUMERATED {n0,n1,n2,n3},
	startingSymbolIndex								INTEGER(0..10) 
}

-- TAG-PUCCH-CONFIG-STOP 
-- ASN1STOP


–	PUCCH-ConfigCommon
The PUCCH-ConfigCommon IE is used to configure the cell specific PUCCH parameters.
PUCCH-ConfigCommon information element
-- ASN1START
-- TAG-PUCCH-CONFIGCOMMON-START

PUCCH-ConfigCommon ::=					SEQUENCE {
	-- An entry into a 16-row table where each row configures a set of cell-specific PUCCH resources/parameters. The UE uses 
	-- those PUCCH resources during initial access on the initial uplink BWP. Once the network provides a dedicated PUCCH-Config 
	-- for that bandwidth part the UE applies that one instead of the one provided in this field.   
	-- Corresponds to L1 parameter 'PUCCH-resource-common' (see 38.213, section 9.2)
	pucch-ResourceCommon					BIT STRING (SIZE (4))															OPTIONAL,	-- Need R

	-- Configuration of group- and sequence hopping for all the PUCCH formats 0, 1, 3 and 4. "neither" implies neither group 
	-- or sequence hopping is enabled. "enable" enables group hopping and disables sequence hopping. "disable"” disables group 
	-- hopping and enables sequence hopping. Corresponds to L1 parameter 'PUCCH-GroupHopping' (see 38.211, section 6.4.1.3)
	pucch-GroupHopping						ENUMERATED { neither, enable, disable },
	-- Cell-Specific scrambling ID for group hoppping and sequence hopping if enabled.
	-- Corresponds to L1 parameter 'HoppingID' (see 38.211, section 6.3.2.2)
	hoppingId								BIT STRING (SIZE (10))															OPTIONAL, 	-- Need R

	-- Power control parameter P0 for PUCCH transmissions. Value in dBm. Only even values (step size 2) allowed. 
	-- Corresponds to L1 parameter 'p0-nominal-pucch' (see 38.213, section 7.2)
	p0-nominal								INTEGER (-202..24)																OPTIONAL, 	-- Need R

	...
}

-- TAG-PUCCH-CONFIGCOMMON-STOP
-- ASN1STOP

–	PUCCH-PowerControl
The IE PUCCH-PowerControl is used to configure FFS
PUCCH-PowerControl information element
-- ASN1START
-- TAG-PUCCH-POWERCONTROL-START
PUCCH-PowerControl ::= 				SEQUENCE {

	-- deltaF for PUCCH format 0 with 1dB step size (see 38.213, section 7.2)
	deltaF-PUCCH-f0							INTEGER (-16..15)																	OPTIONAL, 	-- Need R
	-- deltaF for PUCCH format 1 with 1dB step size (see 38.213, section 7.2)
	deltaF-PUCCH-f1							INTEGER (-16..15)																	OPTIONAL, 	-- Need R
	-- deltaF for PUCCH format 2 with 1dB step size (see 38.213, section 7.2)
	deltaF-PUCCH-f2							INTEGER (-16..15)																	OPTIONAL, 	-- Need R
	-- deltaF for PUCCH format 3 with 1dB step size (see 38.213, section 7.2)
	deltaF-PUCCH-f3							INTEGER (-16..15)																	OPTIONAL, 	-- Need R
	-- deltaF for PUCCH format 4 with 1dB step size (see 38.213, section 7.2)
	deltaF-PUCCH-f4							INTEGER (-16..15)																	OPTIONAL, 	-- Need R

	-- A set with dedicated P0 values for PUCCH, i.e.,  {P01, P02,... }. Corresponds to L1 parameter 'p0-pucch-set' (see 38.213, section 7.2)
	p0-Set								SEQUENCE (SIZE (1..maxNrofPUCCH-P0-PerSet)) OF P0-PUCCH									OPTIONAL, -- Need M

	-- A set of Reference Signals (e.g. a CSI-RS config or a SSblock) to be used for PUCCH pathloss estimation. 
	-- Up to maxNrofPUCCH-PathlossReference-RSs may be configured
	-- FFS_CHECK: Is it possible not to configure it at all? What does the UE use then? Any SSB?
	-- Corresponds to L1 parameter 'pucch-pathlossReference-rs-config' (see 38.213, section 7.2)
	pathlossReferenceRSs				SEQUENCE (SIZE (1..maxNrofPUCCH-PathlossReferenceRSs)) OF PUCCH-PathlossReferenceRS	OPTIONAL, -- Need M
	-- Number of PUCCH power control adjustment states maintained by the UE (i.e., g(i)). If the field is present (n2) the UE maintains
	-- two power control states (i.e., g(i,0) and g(i,1)). Otherwise, it applies one (i.e., g(i,0)). 
	-- Corresponds to L1 parameter 'num-pucch-pcadjustment-states' (see 38.213, section 7.2)
	twoPUCCH-PC-AdjustmentStates		ENUMERATED {twoStates}																	OPTIONAL, -- Need R
	...
}

-- P0 value for PUCCH. Corresponds to L1 parameter 'p0-pucch' (see 3,213, section 7.2)
P0-PUCCH ::=							SEQUENCE {
	p0-PUCCH-Id								P0-PUCCH-Id,
	-- P0 value for PUCCH with 1dB step size.
	p0-PUCCH-Value							INTEGER (-16..15)
}

P0-PUCCH-Id ::=							INTEGER (1..8)

-- A reference signal (RS) configured as pathloss reference signal for PUCCH power control
-- Corresponds to L1 parameter 'pucch-pathlossReference-rs' (see 38.213, section 7.2)
PUCCH-PathlossReferenceRS ::=					SEQUENCE {
	pucch-PathlossReferenceRS-Id 				PUCCH-PathlossReferenceRS-Id, 
	referenceSignal								CHOICE {
		ssb-Index									SSB-Index,
		csi-RS-Index								NZP-CSI-RS-ResourceId
	}
}

-- ID for a referemce signal (RS) configured as PUCCH pathloss reference 
-- Corresponds to L1 parameter 'pucch-pathlossreference-index' (see 38.213, section 7.2)
-- FFS_CHECK: Is this ID used anywhere except inside the PUCCH-PathlossReference-RS	itself? If not, remove.
PUCCH-PathlossReferenceRS-Id ::=			INTEGER (0..maxNrofPUCCH-PathlossReferenceRSs-1)

-- TAG-PUCCH-POWERCONTROL-STOP
-- ASN1STOP


–	PUCCH-TPC-CommandConfig
The IE PUCCH-TPC-CommandConfig is used to configure the UE for extracting TPC commands for PUCCH from a group-TPC messages on DCI.
PUCCH-TPC-CommandConfig information element
-- ASN1START
-- TAG-PUCCH-TPC-COMMANDCONFIG-START

PUCCH-TPC-CommandConfig ::=				SEQUENCE {
	-- An index determining the position of the first bit of TPC command (applicable to the SpCell) inside the DCI format 2-2 payload. 
	tpc-IndexPCell							INTEGER (1..15)													OPTIONAL,	-- Cond PUCCH-SCell
	-- An index determining the position of the first bit of TPC command (applicable to the PUCCH-SCell) inside the DCI format 2-2 payload. 
	tpc-IndexPUCCH-SCell					INTEGER (1..15)													OPTIONAL,	-- Cond PUCCH-SCellOnly
    ...
}

-- TAG-PUCCH-TPC-COMMANDCONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationPUCCH-SCellOnlyThe field is optionally present, need R, when the UE is configured with a PUCCH-SCell in this cell group. Otherwise, the field is absent. PUCCH-SCellThe field is mandatory present if the UE is configured without PUCCH-SCell in this cell group. Otherwise, the field is optionally present, Need R.
–	PUSCH-Config
The IE PUSCH-Config is used to configure the UE specific PUSCH parameters applicable to a particular BWP.
PUSCH-Config information element
-- ASN1START
-- TAG-PUSCH-CONFIG-START

PUSCH-Config ::= 						SEQUENCE {
	-- Identifer used to initalite data scrambling (c_init) for both PUSCH.
	-- Corresponds to L1 parameter 'Data-scrambling-Identity' (see 38,214, section FFS_Section)
	dataScramblingIdentityPUSCH			INTEGER (0..1007)															OPTIONAL,	-- Need M
	-- Whether UE uses codebook based or non-codebook based transmission. Corresponds to L1 parameter 'ulTxConfig' (see 38.214, section 6.1.1)
	txConfig								ENUMERATED {codebook, nonCodebook},

	-- DMRS configuration for PUSCH transmissions using PUSCH mapping type A (chosen dynamically via PUSCH-TimeDomainResourceAllocation).
	dmrs-UplinkForPUSCH-MappingTypeA		SetupRelease { DMRS-UplinkConfig }											OPTIONAL,	-- Need M
	-- DMRS configuration for PUSCH transmissions using PUSCH mapping type B (chosen dynamically via PUSCH-TimeDomainResourceAllocation)
	dmrs-UplinkForPUSCH-MappingTypeB		SetupRelease { DMRS-UplinkConfig }									OPTIONAL,	-- Need M

	pusch-PowerControl						PUSCH-PowerControl															OPTIONAL, -- Need M
	-- Configured one of two supported frequency hopping mode. If not configured frequency hopping is not configured
	-- Corresponds to L1 parameter 'Frequency-hopping-PUSCH' (see 38.214, section 6)
	-- When the field is absent the UE applies the value Not configured
	frequencyHopping						ENUMERATED {mode1, mode2}													OPTIONAL,	-- Need S
	-- Set of frequency hopping offsets used when frequency hopping is enabled for granted transmission (not msg3) and type 2
	-- Corresponds to L1 parameter 'Frequency-hopping-offsets-set' (see 38.214, section 6.3)
	frequencyHoppingOffsetLists				SEQUENCE (SIZE (1..4)) OF INTEGER (1.. maxNrofPhysicalResourceBlocks-1)	OPTIONAL,	-- Need M
	-- Configuration of resource allocation type 0 and resource allocation type 1 for non-fallback DCI
	-- Corresponds to L1 parameter 'Resouce-allocation-config' (see 38.214, section 6.1.2)
	resourceAllocation						ENUMERATED { resourceAllocationType0, resourceAllocationType1, dynamicSwitch},

	-- List of time domain allocations for timing of UL assignment to UL data. If configured, the values provided herein 
	-- override the values received in corresponding PUSCH-ConfigCommon.
	pusch-AllocationList					SEQUENCE (SIZE(1..maxNrofUL-Allocations)) OF PUSCH-TimeDomainResourceAllocation	OPTIONAL, 	-- Need R,
	-- Number of repetitions for data. Corresponds to L1 parameter 'aggregation-factor-UL' (see 38.214, section FFS_Section)
	-- When the field is absent the UE applies the value 1.
	pusch-AggregationFactor					ENUMERATED { n2, n4, n8 }													OPTIONAL, 	-- Need S

	-- Indicates which MCS table the UE shall use for PUSCH without transform precoder
	-- Corresponds to L1 parameter 'MCS-Table-PUSCH' (see 38.214, section 6.1.4)
	-- When the field is absent the UE applies the value 64QAM
	mcs-Table								ENUMERATED {qam256}													OPTIONAL,	-- Need S
	-- Indicates which MCS table the UE shall use for PUSCH with transform precoding
	-- Corresponds to L1 parameter 'MCS-Table-PUSCH-transform-precoding' (see 38.214, section 6.1.4)
	-- When the field is absent the UE applies the value 64QAM
	mcs-TableTransformPrecoder				ENUMERATED { qam256}													OPTIONAL,	-- Need S
	-- The UE specific selection of transformer precoder for PUSCH. When the field is absent the UE applies the value msg3-tp.
	-- Corresponds to L1 parameter 'PUSCH-tp' (see 38.211, section 6.3.1.4)
	transformPrecoder						ENUMERATED {enabled, disabled}												OPTIONAL,	-- Need S
	-- Subset of PMIs addressed by TPMI, where PMIs are those supported by UEs with maximum coherence capabilities 
	-- Corresponds to L1 parameter 'ULCodebookSubset' (see 38.211, section 6.3.1.5)
	codebookSubset			ENUMERATED {fullyAndPartialAndNonCoherent, partialAndNonCoherent, nonCoherent},
	-- Subset of PMIs addressed by TRIs from 1 to ULmaxRank. Corresponds to L1 parameter 'ULmaxRank' (see 38.211, section 6.3.1.5)
	maxRank									INTEGER (1..4),

	-- Selection between config 1 and config 2 for RBG size for PUSCH. When the field is absent the UE applies the value config1.
	-- Corresponds to L1 parameter 'RBG-size-PUSCH' (see 38.214, section 6.1.2.2.1)
	rbg-Size								ENUMERATED { config2}												OPTIONAL,	-- Need S

	-- Selection between and configuration of dynamic and semi-static beta-offset.
	-- If the field is absent or released, the UE applies the value 'semiStatic' and the BetaOffsets according to 
	-- FFS [BetaOffsets and/or section 9.x.x).
	-- Corresponds to L1 parameter 'UCI-on-PUSCH' (see 38.213, section 9.3)
	uci-OnPUSCH							SetupRelease { UCI-OnPUSCH}									OPTIONAL, -- Need M
	-- Interleaving unit configurable between 2 and 4 PRBs
	-- Corresponds to L1 parameter 'VRB-to-PRB-interleaver' (see 38.211, section 6.3.1.6)
	vrb-ToPRB-Interleaver					ENUMERATED {n2, n4},
	...
}

UCI-OnPUSCH ::= 						SEQUENCE {
	betaOffsets								CHOICE {
			dynamic									SEQUENCE (SIZE (4)) OF BetaOffsets,
			semiStatic								BetaOffsets
	}																													OPTIONAL, -- Need M
	-- Indicates a scaling factor to limit the number of resource elements assigned to UCI on PUSCH.
	-- Value f0p5 corresponds to 0.5, value f0p65 corresponds to 0.65, and so on. 
	-- Corresponds to L1 parameter 'uci-on-pusch-scaling' (see 38.212, section 6.3)
	scaling						ENUMERATED { f0p5, f0p65, f0p8, f1 }
}

-- TAG-PUSCH-CONFIG-STOP
-- ASN1STOP

–	PUSCH-ConfigCommon
The IE PUSCH-ConfigCommon IE is used to configure the cell specific PUSCH parameters.
PUSCH-Config information element
-- ASN1START
-- TAG-PUSCH-CONFIGCOMMON-START

PUSCH-ConfigCommon ::= 					SEQUENCE {
	-- Sequence-group hopping can be enabled or disabled by means of this cell-specific parameter. 
	-- Corresponds to L1 parameter 'Group-hopping-enabled-Transform-precoding' (see 38.211, section FFS_Section)
	-- This field is Cell specific
	groupHoppingEnabledTransformPrecoding	ENUMERATED {enabled}															OPTIONAL,	-- Need R

	-- List of time domain allocations for timing of UL assignment to UL data
	pusch-AllocationList					SEQUENCE (SIZE(1..maxNrofUL-Allocations)) OF PUSCH-TimeDomainResourceAllocation	OPTIONAL,	-- Need R

	-- ------------------------
	-- Power control parameters

	-- Power offset between msg3 and RACH preamble transmission in steps of 1dB. 
	-- Corresponds to L1 parameter 'Delta-preamble-msg3' (see 38.213, section 7.1)
	msg3-DeltaPreamble							INTEGER (-1..6)															OPTIONAL,	-- Need R

	-- P0 value for PUSCH with grant (except msg3). Value in dBm. Only even values (step size 2) allowed.
	-- Corresponds to L1 parameter 'p0-nominal-pusch-withgrant' (see 38.213, section 7.1)
	-- This field is cell specific
	p0-NominalWithGrant						INTEGER (-202..24)																OPTIONAL,	-- Need R
	...
}

-- TAG-PUSCH-CONFIGCOMMON-STOP
-- ASN1STOP

–	PUSCH-PowerControl
The IE PUSCH-PowerControl is used to configure UE specific power control parameter for PUSCH.
PUSCH-PowerControl information element
-- ASN1START
-- TAG-PUSCH-POWERCONTROL-START

PUSCH-PowerControl ::= 						SEQUENCE {

	-- If enabled, UE applies TPC commands via accumulation. If not enabled, UE applies the TPC command without accumulation. 
	-- If absent, TPC accumulation is enabled. Corresponds to L1 parameter 'Accumulation-enabled' (see 38.213, section 7.1)
	tpc-Accumulation							ENUMERATED { disabled }													OPTIONAL,	-- Need R

	-- Dedicated alpha value for msg3 PUSCH. Corresponds to L1 parameter 'alpha-ue-pusch-msg3' (see 38.213, section 7.1)
	-- When the field is absent the UE applies the value 1.
	msg3-Alpha									Alpha																	OPTIONAL, 	-- Need S

	-- P0 value for UL grant-free/SPS based PUSCH. Value in dBm. Only even values (step size 2) allowed.
	-- Corresponds to L1 parameter 'p0-nominal-pusch-withoutgrant' (see 38.213, section 7.1)
	p0-NominalWithoutGrant						INTEGER (-202..24)														OPTIONAL,	-- Need M,
	-- configuration {p0-pusch,alpha} sets for PUSCH (except msg3), i.e., { {p0,alpha,index1}, {p0,alpha,index2},...}.
	-- Corresponds to L1 parameter 'p0-push-alpha-setconfig' (see 38,213, section 7.1)
	p0-AlphaSets								SEQUENCE (SIZE (1..maxNrofP0-PUSCH-AlphaSets)) OF P0-PUSCH-AlphaSet		OPTIONAL,	-- Need M,

	-- A set of Reference Signals (e.g. a CSI-RS config or a SSblock) to be used for PUSCH path loss estimation. 
	-- Up to maxNrofPUSCH-PathlossReferenceRSs may be configured when 'PUSCH beam indication' is present (FFS: in DCI???). 
	-- Otherwise, there may be only one entry. 
	-- Corresponds to L1 parameter 'pusch-pathlossReference-rs-config' (see 38.213, section 7.1)
	pathlossReferenceRSToAddModList				SEQUENCE (SIZE (1..maxNrofPUSCH-PathlossReferenceRSs)) OF PUSCH-PathlossReferenceRS	
																														OPTIONAL,	-- Need N
	pathlossReferenceRSToReleaseList			SEQUENCE (SIZE (1..maxNrofPUSCH-PathlossReferenceRSs)) OF PUSCH-PathlossReferenceRS-Id	
																														OPTIONAL,	-- Need N

	-- Number of PUSCH power control adjustment states maintained by the UE (i.e., fc(i)). If the field is present (n2) the UE maintains
	-- two power control states (i.e., fc(i,1) and fc(i,2)). Otherwise, it applies one (i.e., fc(i,1)). 
	-- Corresponds to L1 parameter 'num-pusch-pcadjustment-states' (see 38.213, section 7.1)
	twoPUSCH-PC-AdjustmentStates				ENUMERATED {twoStates}													OPTIONAL, -- Need S

	-- Indicates whether to apply dela MCS. When the field is absent, the UE applies Ks = 0 in delta_TFC formula for PUSCH. 
	-- Corresponds to L1 parameter 'deltaMCS-Enabled' (see 38.213, section 7.1)
	deltaMCS									ENUMERATED {enabled}													OPTIONAL, -- Need S

	-- A list of SRI-PUSCH-PowerControl elements among which one is selected by the SRI field in DCI. 
	-- Corresponds to L1 parameter 'SRI-PUSCHPowerControl-mapping' (see 38.213, section 7.1)
	sri-PUSCH-MappingToAddModList			SEQUENCE (SIZE (1..maxNrofSRI-PUSCH-Mappings)) OF SRI-PUSCH-PowerControl		OPTIONAL, -- Need M
	sri-PUSCH-MappingToReleaseList				SEQUENCE (SIZE (1..maxNrofSRI-PUSCH-Mappings)) OF SRI-PUSCH-PowerControlId	OPTIONAL -- Need M 
}

-- A set of p0-pusch and alpha used for PUSCH with grant. 'PUSCH beam indication' (if present) gives the index of the set to 
-- be used for a particular PUSCH transmission.
-- FFS_CHECK: Is the ”PUSCH beam indication” in DCI which schedules the PUSCH? If so, clarify in field description
-- Corresponds to L1 parameter 'p0-pusch-alpha-set' (see 38.213, section 7.1)
P0-PUSCH-AlphaSet ::= 						SEQUENCE {
	p0-PUSCH-AlphaSetId 						P0-PUSCH-AlphaSetId,
	-- P0 value for PUSCH with grant (except msg3) in steps of 1dB. Corresponds to L1 parameter 'p0-pusch' (see 38,213, section 7.1)
	p0											INTEGER (-16..15)															OPTIONAL,
	-- alpha value for PUSCH with grant (except msg3) (see 38.213, section 7.1)
	-- When the field is absent the UE applies the value 1
	alpha 										Alpha																	OPTIONAL	-- Need S
}

-- ID for a P0-PUSCH-AlphaSet. Corresponds to L1 parameter 'p0alphasetindex' (see 38.213, section 7.1)
P0-PUSCH-AlphaSetId ::= 					INTEGER (0..maxNrofP0-PUSCH-AlphaSets-1)

-- A reference signal (RS) configured as pathloss reference signal for PUSCH power control
-- Corresponds to L1 parameter 'pusch-pathlossReference-rs' (see 38.213, section 7.1)
PUSCH-PathlossReferenceRS ::=				SEQUENCE {
	pusch-PathlossReferenceRS-Id 				PUSCH-PathlossReferenceRS-Id, 
	referenceSignal								CHOICE {
		ssb-Index									SSB-Index,
		csi-RS-Index									NZP-CSI-RS-ResourceId
	}
}

-- ID for a referemce signal (RS) configured as PUSCH pathloss reference 
-- Corresponds to L1 parameter 'pathlossreference-index' (see 38.213, section 7.1)
-- FFS_CHECK: Is this ID used anywhere except inside the PUSCH-PathlossReference-RS	itself?
PUSCH-PathlossReferenceRS-Id ::=			INTEGER (0..maxNrofPUSCH-PathlossReferenceRSs-1)


-- A set of PUSCH power control parameters associated with one SRS-ResourceIndex (SRI)
SRI-PUSCH-PowerControl ::=					SEQUENCE {
	-- The ID of this SRI-PUSCH-PowerControl configuration. It is used as the codepoint (payload) in the SRI DCI field.
	sri-PUSCH-PowerControlId					SRI-PUSCH-PowerControlId,
	-- The ID of PUSCH-PathlossReferenceRS as configured in the pathlossReferenceRSToAddModList in PUSCH-PowerControl.
	sri-PUSCH-PathlossReferenceRS-Id 			PUSCH-PathlossReferenceRS-Id,
	-- The ID of a P0-PUSCH-AlphaSet as configured in p0-AlphaSets in PUSCH-PowerControl.
	sri-P0-PUSCH-AlphaSetId 					P0-PUSCH-AlphaSetId,
	-- The index of the closed power control loop associated with this SRI-PUSCH-PowerControl
	sri-PUSCH-ClosedLoopIndex					ENUMERATED { i0, i1 }
}

SRI-PUSCH-PowerControlId ::=				INTEGER (0..maxNrofSRI-PUSCH-Mappings-1)

-- A set of beta-offset values
BetaOffsets ::= 							SEQUENCE {
	-- Up to 2 bits HARQ-ACK. Corresponds to L1 parameter 'betaOffset-ACK-Index-1' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 11
	betaOffsetACK-Index1						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Up to 11 bits HARQ-ACK. Corresponds to L1 parameter 'betaOffset-ACK-Index-2' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 11
	betaOffsetACK-Index2						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Above 11 bits HARQ-ACK. Corresponds to L1 parameter 'betaOffset-ACK-Index-3' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 11
	betaOffsetACK-Index3						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Up to 11 bits of CSI part 1 bits. Corresponds to L1 parameter 'betaOffset-CSI-part-1-Index-1' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 13
	betaOffsetCSI-Part1-Index1						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Above 11 bits of CSI part 1 bits. Corresponds to L1 parameter 'betaOffset-CSI-part-1-Index-2' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 13
	betaOffsetCSI-Part1-Index2						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Up to 11 bits of CSI part 2 bits. Corresponds to L1 parameter 'betaOffset-CSI-part-2-Index-1' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 13
	betaOffsetCSI-Part2-Index1						INTEGER(0..31)															OPTIONAL, -- Need S
	-- Above 11 bits of CSI part 2 bits. Corresponds to L1 parameter 'betaOffset-CSI-part-2-Index-2' (see 38.213, section 9.3)
	-- When the field is absent the UE applies the value 13
	betaOffsetCSI-Part2-Index2						INTEGER(0..31)															OPTIONAL -- Need S
}

-- TAG-PUSCH-POWERCONTROL-STOP
-- ASN1STOP

–	PUSCH-ServingCellConfig
The IE PUSCH-ServingCellConfig is used to configure UE specific PUSCH parameters that are common across the UE's BWPs of one serving cell. 
PUSCH-ServingCellConfig information element
-- ASN1START
-- TAG-PUSCH-SERVINGCELLCONFIG-START

PUSCH-ServingCellConfig ::=				SEQUENCE {
	-- Enables and configures code-block-group (CBG) based transmission (see 38.214, section FFS_Section)
	codeBlockGroupTransmission				SetupRelease { PUSCH-CodeBlockGroupGransmission	}							OPTIONAL,	-- Need M
	-- Enables LBRM (Limited buffer rate-matching). When the field is absent the UE applies FBRM (Full buffer rate-matchingLBRM).
	-- Corresponds to L1 parameter 'LBRM-FBRM-selection' (see 38.212, section 5.4.2)
	rateMatching							ENUMERATED {limitedBufferRM}												OPTIONAL,	-- Need S
	-- Accounts for overhead from CSI-RS, CORESET, etc. If the field is absent, the UE applies the value 'xoh0'.
	-- Corresponds to L1 parameter 'Xoh-PUSCH' (see 38.214, section 5.1.3.2)
	xOverhead								ENUMERATED {xoh6, xoh12, xoh18}												OPTIONAL,	-- Need S
	...
}

PUSCH-CodeBlockGroupGransmission ::=	SEQUENCE {
	-- Maximum number of code-block-groups (CBGs) per TB (see 38.xxx, section x.x.x, FFS_Ref)
	-- For 2 codewords, only the values { n2, n4 } are valid.
	maxCodeBlockGroupsPerTransportBlock		ENUMERATED {n2, n4, n6, n8},
	...
}

-- TAG-PUSCH-SERVINGCELLCONFIG-STOP
-- ASN1STOP

–	PUSCH-TimeDomainResourceAllocation
The IE PUSCH-TimeDomainResourceAllocation is used to configure a time domain relation between PDCCH and PUSCH.
PUSCH-TimeDomainResourceAllocation information element
-- ASN1START
-- TAG-PUSCH-TIMEDOMAINRESOURCEALLOCATION-START

PUSCH-TimeDomainResourceAllocation ::= 	SEQUENCE {
	-- Corresponds to L1 parameter 'K2' (see 38.214, section FFS_Section)
	-- When the field is absent the UE applies the value 01 when PUSCH SCS is 15/30KHz; 2 when PUSCH SCS is 60KHz and 3 when PUSCH SCS is 120KHz.
	k2									INTEGER (0..7)																OPTIONAL,	-- Need S
	-- Mapping type. Corresponds to L1 parameter 'Mapping-type' (see 38.214, section FFS_Section)
	mappingType							ENUMERATED {typeA, typeB},
	-- An index into a table/equation in RAN1 specs capturing valid combinations of start symbol and length (jointly encoded)
	-- Corresponds to L1 parameter 'Index-start-len' (see 38.214, section FFS_Section)
	startSymbolAndLength				BIT STRING (SIZE (7))
}

-- TAG-PUSCH-TIMEDOMAINRESOURCEALLOCATION-STOP
-- ASN1STOP

–	PUSCH-TPC-CommandConfig
The IE PUSCH-TPC-CommandConfig is used to configure the UE for extracting TPC commands for PUSCH from a group-TPC messages on DCI.
PUSCH-TPC-CommandConfig information element
-- ASN1START
-- TAG-PUSCH-TPC-COMMANDCONFIG-START

PUSCH-TPC-CommandConfig ::=			SEQUENCE {
	-- An index determining the position of the first bit of TPC command inside the DCI format 2-2 payload. 
	tpc-Index							INTEGER (1..15)															OPTIONAL,	-- Cond SUL
	-- An index determining the position of the first bit of TPC command inside the DCI format 2-2 payload. 
	tpc-IndexSUL						INTEGER (1..15)															OPTIONAL,	-- Cond SUL-Only
	-- The serving cell to which the acquired power control commands are applicable. If the value is absent, the UE applies the 
	-- TPC commands to the serving cell on which the command has been received. 
	targetCell							ServCellIndex															OPTIONAL,	-- Need S
	...
}

-- TAG-PUSCH-TPC-COMMANDCONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationSUL-OnlyThe field is optionally present, Need R, if this serving cell is configured with a supplementary uplink (SUL). It is absent otherwise.SULThe field is optionally present, Need R, if this serving cell is configured with a supplementary uplink (SUL). It is mandatory present otherwise.
–	Q-OffsetRange
The IE Q-OffsetRange is used to indicate a cell, beam or frequency specific offset to be applied when evaluating candidates for cell re-selection or when evaluating triggering conditions for measurement reporting. The value in dB. Value dB-24 corresponds to -24 dB, dB-22 corresponds to -22 dB and so on.
Q-OffsetRange information element
-- ASN1START

Q-OffsetRange ::=						ENUMERATED {
												dB-24, dB-22, dB-20, dB-18, dB-16, dB-14,
												dB-12, dB-10, dB-8, dB-6, dB-5, dB-4, dB-3,
												dB-2, dB-1, dB0, dB1, dB2, dB3, dB4, dB5,
												dB6, dB8, dB10, dB12, dB14, dB16, dB18,
												dB20, dB22, dB24}

-- ASN1STOP

Editor’s Note: FFS Confirm the exact values that are supported.
–	QuantityConfig
The IE QuantityConfig specifies the measurement quantities and layer 3 filtering coefficients for NR and inter-RAT measurements.
QuantityConfig information element
-- ASN1START
-- TAG-QUANTITY-CONFIG-START

	
QuantityConfig ::=							SEQUENCE {
	quantityConfigNR-List						QuantityConfigNR-List						OPTIONAL,	-- Need M
	...
}

QuantityConfigNR-List::=						SEQUENCE (SIZE (1..maxNrofQuantityConfig)) OF QuantityConfigNR

QuantityConfigNR::=							SEQUENCE {
	quantityConfigCell							QuantityConfigRS,
	quantityConfigRS-Index						QuantityConfigRS								OPTIONAL	-- Need M
}

QuantityConfigRS ::=						SEQUENCE {
	-- SS Block based L3 filter configurations:
	ssb-FilterConfig				FilterConfig,

	-- CSI-RS basedL3 filter configurations:
	cs-RS-FilterConfig				FilterConfig
}

FilterConfig ::=				SEQUENCE {
	filterCoefficientRSRP			FilterCoefficient										DEFAULT fc4,
	filterCoefficientRSRQ			FilterCoefficient										DEFAULT fc4,
	filterCoefficientRS-SINR		FilterCoefficient										DEFAULT fc4
}

-- TAG-QUANTITY-CONFIG-STOP
-- ASN1STOP

QuantityConfig field descriptionsquantityConfigCell
Specifies L3 filter configurations for cell measurement results for the configurable RS Types (e.g. SS/PBCH block and CSI-RS) and the configurable measurement quantities (e.g. RSRP, RSRQ and SINR).quantityConfigNR
Specifies filter configurations for NR measurements.quantityConfig-RSindex
Specifies L3 filter configurations for measurement results per RS index for the configurable RS Types (e.g. SS/PBCH block and CSI-RS) and the configurable measurement quantities (e.g. RSRP, RSRQ and SINR).ssb-FilterConfig
Specifies L3 filter configurations for SS-RSRP, SS-RSRQ and SS-SINR measurement results from the L1 filter(s), as defined in 38.215 [9].csi-rs-FilterConfig
Specifies L3 filter configurations for CSI-RSRP, CSI-RSRQ and CSI-SINR measurement results from the L1 filter(s), as defined in 38.215 [9].
–	RACH-ConfigCommon
The RACH-ConfigCommon IE is used to specify the cell specific random-access parameters.
RACH-ConfigCommon information element
-- ASN1START
-- TAG-RACH-CONFIG-COMMON-START

RACH-ConfigCommon ::= 				SEQUENCE {
	-- Generic RACH parameters 
	rach-ConfigGeneric			RACH-ConfigGeneric,

	-- Total number of preambles used for contention based and contention free random access, excluding	
	-- preambles used for other purposes (e.g. for SI request). If the field is absent, the UE may use all 64 preambles for RA.
	totalNumberOfRA-Preambles			INTEGER (1..63)																		OPTIONAL,	-- Need S

	-- Number of SSBs per RACH occasion (L1 parameter 'SSB-per-rach-occasion') and the number of Contention Based preambles per SSB
	-- (L1 parameter 'CB-preambles-per-SSB'). By multiplying the two values, the UE determines the total number of CB preambles.
	ssb-perRACH-OccasionAndCB-PreamblesPerSSB	CHOICE { 
		oneEighth								ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64}, 
		oneFourth								ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64}, 
		oneHalf									ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64}, 
		one										ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32,n36,n40,n44,n48,n52,n56,n60,n64}, 
		two										ENUMERATED {n4,n8,n12,n16,n20,n24,n28,n32}, 
		four									INTEGER (1..16), 
		eight									INTEGER (1..8), 
		sixteen									INTEGER (1..4)
	}																														OPTIONAL,	-- Need M

	groupBconfigured 					SEQUENCE {
		-- Transport Blocks size threshold in bit below which the UE shall use a contention based RA premable 
		-- of group A. (see 38.321, section 5.1.2)
		ra-Msg3SizeGroupA					ENUMERATED {b56, b144, b208, b256, b282, b480, b640, b800, b1000, spare7, spare6, spare5,
											spare4, spare3, spare2, spare1},
		-- Threshold for preamble selection.  Value in dB.  Value minusinfinity corresponds to –infinity.  
		-- Value dB0 corresponds to 0 dB, dB5 corresponds to 5 dB and so on. (see FFS_Spec, section FFS_Section)
		messagePowerOffsetGroupB			ENUMERATED { minusinfinity, dB0, dB5, dB8, dB10, dB12, dB15, dB18},
		-- The number of CB preambles per SSB in group A. This determines implicitly the number of CB preambles per SSB available in group B.
		-- (see 38.321, section 5.1.1)
		numberOfRA-PreamblesGroupA			INTEGER (1..64)
	}																														OPTIONAL,	-- Need R

	-- The initial value for the contention resolution timer (see 38.321, section 5.1.5)	
	ra-ContentionResolutionTimer			ENUMERATED { sf8, sf16, sf24, sf32, sf40, sf48, sf56, sf64},

	-- UE may select the SS block and corresponding PRACH resource for path-loss estimation and (re)transmission 
	-- based on SS blocks that satisfy the threshold (see 38.213, section REF)
	rsrp-ThresholdSSB						RSRP-Range																		OPTIONAL,	-- Need R
	-- UE may select the SS block and corresponding PRACH resource for path-loss estimation and (re)transmission on the SUL carrier
	-- based on SS blocks that satisfy the threshold
	-- Corresponds to L1 parameter 'SUL-RSRP-Threshold' (see FFS_Spec, section FFS_Section)
	rsrp-ThresholdSSB-SUL					RSRP-Range																		OPTIONAL,	-- Need R

	-- PRACH root sequence index. Corresponds to L1 parameter 'PRACHRootSequenceIndex' (see 38.211, section 6.3.3.1).
	-- The value range depends on whether L=839 or L=139
	prach-RootSequenceIndex					CHOICE {
		l839									INTEGER (0..837),
		l139									INTEGER (0..137)
	},

	-- Subcarrier spacing of PRACH. Only the values 15 or 30 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are applicable.
	-- Corresponds to L1 parameter 'prach-Msg1SubcarrierSpacing' (see 38.211, section FFS_Section)
	msg1-SubcarrierSpacing					SubcarrierSpacing,

	-- Configuration of an unrestricted set or one of two types of restricted sets, see 38.211	6.3.3.1 
	restrictedSetConfig						ENUMERATED {unrestrictedSet, restrictedSetTypeA, restrictedSetTypeB},
	-- Indicates to a UE whether transform precoding is enabled for Msg3 transmission. 
	-- Corresponds to L1 parameter 'msg3-tp' (see 38.213, section 8.1)
	msg3-transformPrecoding					ENUMERATED {enabled}															OPTIONAL,	-- Need R
	...
}

-- TAG-RACH-CONFIG-COMMON-STOP 
-- ASN1STOP

–	RACH-ConfigGeneric
The RACH-ConfigGeneric IE is used to specify the cell specific random-access parameters both for regular random access as well as for beam failure recovery.
RACH-Configeneric information element
-- ASN1START
-- TAG-RACH-CONFIG-GENERIC-START

RACH-ConfigGeneric ::= 			SEQUENCE {
	-- PRACH configuration index. Corresponds to L1 parameter 'PRACHConfigurationIndex' (see 38.211, section 6.3.3.2)
	prach-ConfigurationIndex				INTEGER (0..255),
	-- The number of PRACH transmission occasions FDMed in one time instance. 
	-- Corresponds to L1 parameter 'prach-FDM' (see 38.211, section FFS_Section)
	msg1-FDM								ENUMERATED {one, two, four, eight},
	-- Offset of lowest PRACH transmission occasion in frequency domain with respective to PRB 0.
	-- The value is configured so that the corresponding RACH resource is entirely within the bandwidth of the UL BWP.
	-- Corresponds to L1 parameter 'prach-frequency-start' (see 38,211, section FFS_Section)
	msg1-FrequencyStart						INTEGER (0..maxNrofPhysicalResourceBlocks-1),
	-- N-CS configuration, see Table 6.3.3.1-3 in 38.211
	zeroCorrelationZoneConfig				INTEGER(0..15),
	-- The target power level at the network receiver side (see 38.213, section 7.4, 38.321, section 5.1.2, 5.1.3)
	-- Only multiples of 2 dBm may be chosen (e.g. -200, -198, ...).
	-- FFS-Value: Actual values to be updated based on input from RAN4 (see LS in R2-1800004 and R4-1803466).
	preambleReceivedTargetPower				INTEGER (-200..-74),
	-- Max number of RA preamble transmission perfomed before declaring a failure (see 38.321, section 5.1.4, 5.1.5)
	preambleTransMax 						ENUMERATED {n3, n4, n5, n6, n7,	n8, n10, n20, n50, n100, n200},
	-- Power ramping steps for PRACH (see 38.321,5.1.3)
	powerRampingStep						ENUMERATED {dB0, dB2, dB4, dB6},
	-- Msg2 (RAR) window length in number of slots. The network configures a value lower than or euqal to 10 ms (see 38.321, section 5.1.4)
	ra-ResponseWindow						ENUMERATED {sl1, sl2, sl4, sl8, sl10, sl20, sl40, sl80}
}

-- TAG-RACH-CONFIG-GENERIC-STOP 
-- ASN1STOP

–	RACH-ConfigDedicated
The IE RACH-ConfigDedicated is used to specify the dedicated random access parameters.
RACH-ConfigDedicated information element
-- ASN1START
-- TAG-RACH-CONFIG-DEDICATED-START

-- FFS_Standlone: resources for msg1-based on-demand SI request

RACH-ConfigDedicated ::=		SEQUENCE {
	-- Resources for contention free random access to a given target cell
	cfra-Resources					CFRA-Resources, 
	...
}

CFRA-Resources ::= 				CHOICE {
	ssb								SEQUENCE {
		ssb-ResourceList				SEQUENCE (SIZE(1..maxRA-SSB-Resources)) OF CFRA-SSB-Resource,
		-- Explicitly signalled PRACH Mask Index for RA Resource selection in TS 36.321. The mask is valid for all SSB
		-- resources signalled in ssb-ResourceList
		ra-ssb-OccasionMaskIndex		INTEGER (0..15)
	},
	csirs							SEQUENCE {
		csirs-ResourceList				SEQUENCE (SIZE(1..maxRA-CSIRS-Resources)) OF CFRA-CSIRS-Resource,
		cfra-csirs-DedicatedRACH-Threshold	RSRP-Range
	}
}

CFRA-SSB-Resource ::= 			SEQUENCE {
	-- The ID of an SSB transmitted by this serving cell. 
	ssb								SSB-Index,
	-- The preamble index that the UE shall use when performing CF-RA upon selecting the candidate beams identified by this SSB.
	ra-PreambleIndex				INTEGER (0..63),
	...
}

CFRA-CSIRS-Resource ::= 		SEQUENCE {
	-- The ID of a CSI-RS resource defined in the measurement object associated with this serving cell.
	csi-RS							CSI-RS-Index,
	-- RA occasions that the UE shall use when performing CF-RA upon selecting the candidate beam identified by this CSI-RS.
	ra-OccasionList					SEQUENCE (SIZE(1..maxRA-OccasionsPerCSIRS)) OF INTEGER (0..maxRA-Occasions-1),
	-- The RA preamble index to use in the RA occasions assoicated with this CSI-RS.
	ra-PreambleIndex				INTEGER (0..63),	
	...
}

-- TAG-RACH-CONFIG-DEDICATED-STOP
-- ASN1STOP

–	RadioBearerConfig
The IE RadioBearerConfig is used to add, modify and release signalling and/or data radio bearers. Specifically, this IE carries the parameters for PDCP and, if applicable, SDAP entities for the radio bearers.
RadioBearerConfig information element
-- ASN1START
-- TAG-RADIO-BEARER-CONFIG-START

RadioBearerConfig ::=					SEQUENCE {
	srb-ToAddModList						SRB-ToAddModList										OPTIONAL, -- Need N
	srb3-ToRelease							ENUMERATED{true}										OPTIONAL, -- Need N
	drb-ToAddModList						DRB-ToAddModList										OPTIONAL, -- Need N
	drb-ToReleaseList						DRB-ToReleaseList										OPTIONAL, -- Need N
	securityConfig 							SecurityConfig											OPTIONAL, -- Cond M
	...
}

SRB-ToAddModList ::=					SEQUENCE (SIZE (1..2)) OF SRB-ToAddMod
SRB-ToAddMod ::=						SEQUENCE {
	srb-Identity							SRB-Identity,
	-- may only be set if the cell groups of all linked logical channels are reset or released
	reestablishPDCP							ENUMERATED{true}										OPTIONAL, 		-- Need N
	discardOnPDCP                           ENUMERATED{true}										OPTIONAL,		-- Need N
	pdcp-Config								PDCP-Config												OPTIONAL,		-- Cond PDCP
	...
}


DRB-ToAddModList ::=					SEQUENCE (SIZE (1..maxDRB)) OF DRB-ToAddMod
DRB-ToAddMod ::=						SEQUENCE {
	cnAssociation							CHOICE {
		-- The EPS bearer ID determines the EPS bearer when NR connects to EPC using EN-DC
		eps-BearerIdentity						INTEGER (0..15),												-- EPS-DRB-Setup
		--	The SDAP configuration determines how to map QoS flows to DRBs when NR connects to the 5GC
		sdap-Config								SDAP-Config													-- 5GC
	} 										OPTIONAL, -- Cond DRBSetup
	drb-Identity							DRB-Identity,

	-- may only be set if the cell groups of all linked logical channels are reset or released
	reestablishPDCP						ENUMERATED{true}										OPTIONAL, 		-- Need N
	recoverPDCP							ENUMERATED{true}										OPTIONAL, 		-- Need N
	pdcp-Config							PDCP-Config												OPTIONAL,		-- Cond PDCP
	...
}

DRB-ToReleaseList ::=					SEQUENCE (SIZE (1..maxDRB)) OF DRB-Identity


SecurityConfig ::=						SEQUENCE {	
	securityAlgorithmConfig				SecurityAlgorithmConfig									OPTIONAL,	-- Cond RBTermChange
	keyToUse							ENUMERATED{keNB, s-KgNB}								OPTIONAL,	-- Cond RBTermChange
	...
}

-- TAG-RADIO-BEARER-CONFIG-STOP
-- ASN1STOP

RadioBearerConfig field descriptionsdrb-Identity
In case of DC, the DRB identity is unique within the scope of the UE, i.e. an MCG DRB cannot use the same value as a split DRB. For a split DRB the same identity is used for the MCG and SCG parts of the configuration.cnAssociation
Indicates if the bearer is associated with the eps-bearerIdentity (when connected to EPC) or sdap-Config (when connected to 5GC).keyToUse
Indicates if the bearers configured with the list in this radioBearerConfig is using KeNB or S-KgNB for deriving ciphering and/or integrity protection keys. Network should not configure SRB1 and SRB2 with S-KgNB and SRB3 with KeNB. When the field is not included,  the UE shall continue to use the currently configured keyToUse for the radio bearers reconfigured with the lists in this radioBearerConfig.reestablishPDCP
Indicates that PDCP should be re-established. Network sets this to TRUE whenever the security key used for this radio bearer changes.srb-Identity
Value 1 is applicable for SRB1 only.
Value 2 is applicable for SRB2 only.
Value 3 is applicable for SRB3 only.securityAlgorithmConfig
Indicates the security algorithm for the signalling and data radio bearers configured with the list in this radioBearerConfig. When the field is not included, the UE shall continue to use the currently configured security algorithm for the radio bearers reconfigured with the lists in this radioBearerConfig.securityConfig
Indicates the security algorithm and key to use for the signalling and data radio bearers configured with the list in this radioBearerConfig When the field is not included, the UE shall continue to use the currently configured keyToUse and security algorithm for the radio bearers reconfigured with the lists in this radioBearerConfig.srb3-toRelease
Release SRB3. SRB3 release can only be done at SCG release and reconfiguration with sync.
Conditional PresenceExplanationRBTermChangeThe field is mandatory present in case of set up of signalling and data radio bearer and change of termination point for the radio bearer between MN and SN. It is optionally present otherwise, Need S.PDCPThe field is mandatory present if the corresponding DRB is being setup or corresponding RB is reconfigured with NR PDCP; otherwise the field is optionally present, need M.DRBSetupThe field is mandatory present if the corresponding DRB is being setup; otherwise the field is optionally present, need M.
–	RadioLinkMonitoringConfig
The RadioLinkMonitoringConfig IE is used to configure radio link monitoring for detection of beam- and/or cell radio link failure. See also 38.321, section 5.1.1.
RadioLinkMonitoringConfig information element
-- ASN1START
-- TAG-RADIOLINKMONITORINGCONFIG-START

RadioLinkMonitoringConfig ::=			SEQUENCE {
	-- A list of reference signals for detecting beam failure and/or cell level radio link failure (RLF).
	-- The network configures at most two detectionResources per BWP for the purpose "beamFailure" or "both". 
	-- If no RSs are provided for the purpose of beam failure detection, the UE performs beam monitoring based on the activated TCI-State 
	-- for PDCCH. However, if the activated TCI state refers to an aperiodic or semi-persistent CSI-RS, the gNB configures the failure
	-- detection resources explicitly (FFS_RAN1: TBC by RAN1).
	-- If no RSs are provided in this list at all (neither for Cell- nor for Beam-RLM), the UE performs also Cell-RLM based 
	-- on the activated TCI-State of PDCCH (FFS_RAN1: TBC by RAN1).
	-- When the network reconfigures this field, the UE resets on-going RLF timers and counters.
	failureDetectionResources				SEQUENCE (SIZE(1..maxNrofFailureDetectionResources)) OF RadioLinkMonitoringRS	OPTIONAL, 	-- Need M
	-- This field determines after how many beam failure events the UE triggers beam failure recovery (see 38.321, section 5.17). 
	-- Value n1 corresponds to 1 beam failure instance, n2 corresponds to 2 beam failure instances and so on. 
	-- When the network reconfigures this field, the UE resets on-going RLF timers and counters. 
	-- If the field is absent, the UE does not trigger beam failure recovery.
	beamFailureInstanceMaxCount				ENUMERATED {n1, n2, n3, n4, n5, n6, n8, n10}									OPTIONAL,	-- Need S
	-- Timer for beam failure detection (see 38.321, section FFS_Section). See also the BeamFailureRecoveryConfig IE.
	-- Value in number of "periods of Beam Failure Detection" Reference Signal. Value pbfd1 corresponds to 1 period of Beam Failure 
	-- Detection Reference Signal, value pbfd2 corresponds to 2 periods of Beam Failure Detection Reference Signal and so on.
	-- When the network reconfigures this field, the UE resets on-going RLF timers and counters.
	beamFailureDetectionTimer      			ENUMERATED {pbfd1, pbfd2, pbfd3, pbfd4, pbfd5, pbfd6, pbfd8, pbfd10}			OPTIONAL,	-- Need R
	...
}

RadioLinkMonitoringRS ::=				SEQUENCE {
	-- Determines whether the UE shall monitor the associated reference signal for the purpose of cell- and/or beam failure detection.
	purpose									ENUMERATED {beamFailure, rlf, both},
	-- A reference signal that the UE shall use for radio link monitoring. The network provides an ssb-Index only if
	-- the purpose is set to rlf.
	detectionResource						CHOICE {
		ssb-Index								SSB-Index,
		csi-RS-Index							NZP-CSI-RS-ResourceId
	},
	...
}

-- TAG-RADIOLINKMONITORINGCONFIG-STOP
-- ASN1STOP

–	RateMatchPattern
The IE RateMatchPattern is used to configure one rate matching pattern for PDSCH. Corresponds to L1 IE 'rate-match-PDSCH-resource-set', see 38.214, section FFS_Section.
RateMatchPattern information element
-- ASN1START
-- TAG-RATEMATCHPATTERN-START
RateMatchPattern ::= 						SEQUENCE {
	rateMatchPatternId							RateMatchPatternId,

	patternType									CHOICE {
		bitmaps										SEQUENCE {
			-- A resource block level bitmap in the frequency domain. It indicates the PRBs to which the symbolsInResourceBlock bitmap applies.
			-- Corresponds to L1 parameter 'rate-match-PDSCH-bitmap1' (see 38.214, section FFS_Section)
			-- FFS_ASN1: Consider multiple options with different number of bits (for narrower carriers)
			resourceBlocks								BIT STRING (SIZE (275)),

			-- A symbol level bitmap in time domain. It indicates (FFS: with a bit set to true) the symbols which the UE shall rate match around.
			-- This pattern recurs (in time domain) with the configured periodicityAndOffset. 
			-- Corresponds to L1 parameter 'rate-match-PDSCH-bitmap2' (see 38.214, section FFS_Section)
			-- FFS: Why not split it into two BIT STRINGs of 14 bit each?
			symbolsInResourceBlock						CHOICE {
				oneSlot										BIT STRING (SIZE (14)),
				twoSlots									BIT STRING (SIZE (28))
			},

			-- A time domain repetition pattern. at which the symbolsInResourceBlock 
			-- pattern recurs. This slot pattern repeats itself continuously. Absence of this field indicates the value n1, i.e., the
			-- symbolsInResourceBlock recurs every 14 symbols. 
			-- Corresponds to L1 parameter 'rate-match-PDSCH-bitmap3' (see 38.214, section FFS_Section)
			periodicityAndPattern						CHOICE {
				n2											BIT STRING (SIZE (2)), 
				n4											BIT STRING (SIZE (4)), 
				n5											BIT STRING (SIZE (5)), 
				n8											BIT STRING (SIZE (8)), 
				n10											BIT STRING (SIZE (10)), 
				n20											BIT STRING (SIZE (20)), 
				n40											BIT STRING (SIZE (40))
			}																										OPTIONAL, 	-- Need S
			...
		},
		-- This ControlResourceSet us used as a PDSCH rate matching pattern, i.e., PDSCH reception rate matches around it. 
		controlResourceSet							ControlResourceSetId
	},
	-- The SubcarrierSpacing for this resource pattern. If the field is absent, the UE applies the SCS of the associcated BWP. 
	-- The value kHz15 corresponds to µ=0, kHz30 to µ=1, and so on. Only the values 15 or 30 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are 
	-- applicable. Corresponds to L1 parameter 'resource-pattern-scs' (see 38.214, section FFS_Section)
	subcarrierSpacing							SubcarrierSpacing 													OPTIONAL,	-- Cond CellLevel
	-- FFS_Description, FFS_Section
	mode										ENUMERATED { dynamic, semiStatic },
	...
}

-- TAG-RATEMATCHPATTERN-STOP
-- ASN1STOP

Conditional PresenceExplanationCellLevelThe field is mandatory present if the RateMatchPattern is defined on cell level. The field is absent when the RateMatchPattern is defined on BWP level. If the RateMatchPattern is defined on BWP level, the UE applies the SCS of the BWP.
–	RateMatchPatternId
The IE RateMatchPatternId identifies one RateMatchMattern. Corresponds to L1 parameter 'resource-set-index' (see 38.214, section 5.1.2.2.3)
RateMatchPatternId information element
-- ASN1START
-- TAG-RATEMATCHPATTERNID-START

RateMatchPatternId ::=						INTEGER (0..maxNrofRateMatchPatterns-1)

-- TAG-RATEMATCHPATTERNID-STOP
-- ASN1STOP


–	RateMatchPatternLTE-CRS
The IE RateMatchPatternLTE-CRS is used to configure a pattern to rate match around LTE CRS.
RateMatchPatternLTE-CRS information element
-- ASN1START
-- TAG-RATEMATCHPATTERNLTE-CRS-START

RateMatchPatternLTE-CRS ::=				SEQUENCE {
	-- Center of the LTE carrier. Corresponds to L1 parameter 'center-subcarrier-location' (see 38.214, section 5.1.4)
	carrierFreqDL							INTEGER (0..16383),
	-- BW of the LTE carrier in numbewr of PRBs. Corresponds to L1 parameter 'BW' (see 38.214, section 5.1.4)
	carrierBandwidthDL						ENUMERATED {n6, n15, n25, n50, n75, n100, spare2, spare1},
	-- LTE MBSFN subframe configuration. Corresponds to L1 parameter 'MBSFN-subframconfig' (see 38.214, section 5.1.4)
	-- FFS_ASN1: Import the LTE MBSFN-SubframeConfigList
	mbsfn-SubframeConfigList				EUTRA-MBSFN-SubframeConfigList						OPTIONAL,	-- Need M
	-- Number of LTE CRS antenna port to rate-match around. 
	-- Corresponds to L1 parameter 'rate-match-resources-numb-LTE-CRS-antenna-port' (see 38.214, section 5.1.4)
	nrofCRS-Ports							ENUMERATED {n1, n2, n4},
	-- Shifting value v-shift in LTE to rate match around LTE CRS
	-- Corresponds to L1 parameter 'rate-match-resources-LTE-CRS-v-shift' (see 38.214, section 5.1.4)
	v-Shift									ENUMERATED {n0, n1, n2, n3, n4, n5}			
}

-- TAG-RATEMATCHPATTERNLTE-CRS-STOP
-- ASN1STOP


–	ReportConfigId
The IE ReportConfigId is used to identify a measurement reporting configuration.
ReportConfigId information element
-- ASN1START
-- TAG-REPORT-CONFIG-ID-START

ReportConfigId ::=							INTEGER (1..maxReportConfigId)

-- TAG-REPORT-CONFIG-ID-STOP
-- ASN1STOP

–	ReportConfigNR
The IE ReportConfigNR specifies criteria for triggering of an NR measurement reporting event. Measurement reporting events are based on cell measurement results, which can either be derived based on SS/PBCH block or CSI-RS. These events are labelled AN with N equal to 1, 2 and so on.
Event A1:	Serving becomes better than absolute threshold;
Event A2:	Serving becomes worse than absolute threshold;
Event A3:	Neighbour becomes amount of offset better than PCell/PSCell;
Event A4:	Neighbour becomes better than absolute threshold;
Event A5:	PCell/PSCell becomes worse than absolute threshold1 AND Neighbour becomes better than another absolute threshold2.
Event A6:	Neighbour becomes amount of offset better than SCell.
ReportConfigNR information element
-- ASN1START
-- TAG-REPORT-CONFIG-START

ReportConfigNR ::=							SEQUENCE {
	reportType									CHOICE {
		periodical									PeriodicalReportConfig, 
		eventTriggered								EventTriggerConfig,
-- reportCGI is to be completed before the end of Rel-15.
		reportCGI									ENUMERATED {ffsTypeAndValue},
		...
	}
}

-- FFS / TODO: Consider separating trgger configuration (trigger, periodic, ...) from report configuration.
-- Current structure allows easier definiton of new events and new report types e.g. CGI, etc.
EventTriggerConfig::=						SEQUENCE {
	eventId										CHOICE {
		eventA1										SEQUENCE {
			a1-Threshold								MeasTriggerQuantity,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger
		},
		eventA2										SEQUENCE {
			a2-Threshold								MeasTriggerQuantity,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger
		},
		eventA3										SEQUENCE {
			a3-Offset									MeasTriggerQuantityOffset,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger,
			useWhiteCellList							BOOLEAN														
		},
		eventA4										SEQUENCE {
			a4-Threshold								MeasTriggerQuantity,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger,
			useWhiteCellList							BOOLEAN														
		},
		eventA5										SEQUENCE {
			a5-Threshold1								MeasTriggerQuantity,
			a5-Threshold2								MeasTriggerQuantity,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger,
			useWhiteCellList							BOOLEAN														
		},
		eventA6										SEQUENCE {
			a6-Offset									MeasTriggerQuantityOffset,
			reportOnLeave								BOOLEAN,
			hysteresis									Hysteresis,
			timeToTrigger								TimeToTrigger,
			useWhiteCellList							BOOLEAN														
		},
		...
	},

	rsType										NR-RS-Type,

	-- Common reporting config (at least to periodical and eventTriggered)
	reportInterval								ReportInterval,
	reportAmount								ENUMERATED {r1, r2, r4, r8, r16, r32, r64, infinity},

	-- Cell reporting configuration
	reportQuantityCell							MeasReportQuantity,
	maxReportCells								INTEGER (1..maxCellReport),

	-- RS index reporting configuration
	reportQuantityRsIndexes						MeasReportQuantity													OPTIONAL,	-- Need M
	maxNrofRSIndexesToReport					INTEGER (1..maxNrofIndexesToReport) 								OPTIONAL,	-- Need M
	includeBeamMeasurements						BOOLEAN,
	-- If configured the UE includes the best neighbour cells per serving frequency
	reportAddNeighMeas							ENUMERATED {setup}									OPTIONAL,		-- Need R
	...

}

PeriodicalReportConfig ::=					SEQUENCE {
	rsType										NR-RS-Type,

	-- Common reporting config (at least to periodical and eventTriggered)
	reportInterval								ReportInterval,
	reportAmount								ENUMERATED {r1, r2, r4, r8, r16, r32, r64, infinity},

	-- Cell reporting configuration
	reportQuantityCell							MeasReportQuantity,
	maxReportCells								INTEGER (1..maxCellReport),

	-- RS index reporting configuration
	reportQuantityRsIndexes						MeasReportQuantity													OPTIONAL,	-- Need R
	maxNrofRsIndexesToReport					INTEGER (1..maxNrofIndexesToReport) 									OPTIONAL,	-- Need R
	includeBeamMeasurements						BOOLEAN,
	useWhiteCellList							BOOLEAN,
	...

}

NR-RS-Type ::= ENUMERATED {ssb, csi-rs}

MeasTriggerQuantity ::=						CHOICE {
	rsrp										RSRP-Range,
	rsrq										RSRQ-Range,
	sinr										SINR-Range
}

MeasTriggerQuantityOffset ::=				CHOICE {
	rsrp										INTEGER (-30..30),														
	rsrq										INTEGER (-30..30),														
	sinr										INTEGER (-30..30)														
}

			
MeasReportQuantity ::=						SEQUENCE {
	rsrp										BOOLEAN,
	rsrq										BOOLEAN,
	sinr										BOOLEAN
}


-- TAG-REPORT-CONFIG-START
-- ASN1STOP

ReportConfigNR field descriptionsa3-Offset/a6-Offset
Offset value(s) to be used in NR measurement report triggering condition for event a3/a6.The actual value is field value * 0.5 dB.aN-ThresholdM
Threshold value associated to the selected trigger quantity (e.g. RSRP, RSRQ, SINR) per RS Type (e.g. SS/PBCH block, CSI-RS) to be used in NR measurement report triggering condition for event number aN. If multiple thresholds are defined for event number aN, the thresholds are differentiated by M. The network configures aN-Threshold1 only for events A1, A2, A4, A5 and a5-Threshold2 only for event A5.eventId
Choice of NR event triggered reporting criteria.maxReportCells
Max number of non-serving cells to include in the measurement report.maxNrofRsIndexesToReport
Max number of measurement information per RS index to include in the measurement report for A1-A6 events.reportAmount
Number of measurement reports applicable for eventTriggered as well as for periodical report typesreportOnLeave
Indicates whether or not the UE shall initiate the measurement reporting procedure when the leaving condition is met for a cell in cellsTriggeredList, as specified in 5.5.4.1.reportQuantityCell
The cell measurement quantities to be included in the measurement report.reportQuantityRsIndexes
Indicates which measurement information per RS index the UE shall include in the measurement report.reportAddNeighMeas
Indicates that the UE shall includes the best neighbour cells per serving frequency.timeToTrigger
Time during which specific criteria for the event needs to be met in order to trigger a measurement report.useWhiteCellList
Indicates whether only the cells included in the white-list of the associated measObject are applicable as specified in 5.5.4.1.
–	ReportConfigToAddModList
The IE ReportConfigToAddModList concerns a list of reporting configurations to add or modify.
ReportConfigToAddModList information element
-- ASN1START
-- TAG-REPORT-CONFIG-TO-ADD-MOD-LIST-START

ReportConfigToAddModList ::=		SEQUENCE (SIZE (1..maxReportConfigId)) OF ReportConfigToAddMod

ReportConfigToAddMod ::=	SEQUENCE {
	reportConfigId						ReportConfigId,
	reportConfig						CHOICE {
		reportConfigNR						ReportConfigNR,
		...
	}
}

-- TAG- REPORT-CONFIG-TO-ADD-MOD-LIST-STOP
-- ASN1STOP

–	ReportInterval
The ReportInterval indicates the interval between periodical reports. The ReportInterval is applicable if the UE performs periodical reporting (i.e. when reportAmount exceeds 1), for triggerTypeevent as well as for triggerTypeperiodical. Value ms120 corresponds to 120 ms, ms240 corresponds to 240 ms and so on, while value min1 corresponds to 1 min, min6 corresponds to 6 min and so on.
ReportInterval information element
-- ASN1START

ReportInterval ::=					ENUMERATED {ms120, ms240, ms480, ms640, ms1024, ms2048, ms5120, ms10240, ms20480, ms40960, min1,
													min6, min12, min30 }

-- ASN1STOP

–	RLC-Config
The IE RLC-Config is used to specify the RLC configuration of SRBs and DRBs.
RLC-Config information element
-- ASN1START
-- TAG-RLC-CONFIG-START

RLC-Config ::=						CHOICE {
	am									SEQUENCE {
		ul-AM-RLC							UL-AM-RLC,
		dl-AM-RLC							DL-AM-RLC
	},
	um-Bi-Directional					SEQUENCE {
		ul-UM-RLC							UL-UM-RLC,
		dl-UM-RLC							DL-UM-RLC
	},
	um-Uni-Directional-UL				SEQUENCE {
		ul-UM-RLC							UL-UM-RLC
	},
	um-Uni-Directional-DL				SEQUENCE {
		dl-UM-RLC							DL-UM-RLC
	},
	...
}

UL-AM-RLC ::=						SEQUENCE {
	sn-FieldLength						SN-FieldLengthAM,
	t-PollRetransmit					T-PollRetransmit,
	pollPDU								PollPDU,
	pollByte							PollByte,
	maxRetxThreshold					ENUMERATED { t1, t2, t3, t4, t6, t8, t16, t32 }
}

DL-AM-RLC ::=						SEQUENCE {
	sn-FieldLength						SN-FieldLengthAM,
	t-Reassembly						T-Reassembly,
	t-StatusProhibit					T-StatusProhibit
}

UL-UM-RLC ::=						SEQUENCE {
	sn-FieldLength						SN-FieldLengthUM
}

DL-UM-RLC ::=						SEQUENCE {
	sn-FieldLength						SN-FieldLengthUM,
	t-Reassembly						T-Reassembly
}

T-PollRetransmit ::=				ENUMERATED {
										ms5, ms10, ms15, ms20, ms25, ms30, ms35,
										ms40, ms45, ms50, ms55, ms60, ms65, ms70,
										ms75, ms80, ms85, ms90, ms95, ms100, ms105,
										ms110, ms115, ms120, ms125, ms130, ms135,
										ms140, ms145, ms150, ms155, ms160, ms165,
										ms170, ms175, ms180, ms185, ms190, ms195,
										ms200, ms205, ms210, ms215, ms220, ms225,
										ms230, ms235, ms240, ms245, ms250, ms300,
										ms350, ms400, ms450, ms500, ms800, ms1000,
										ms2000, ms4000, spare5, spare4, spare3,
										spare2, spare1}


PollPDU ::=							ENUMERATED {
										p4, p8, p16, p32, p64, p128, p256, p512, p1024, p2048, p4096, p6144, p8192, p12288, p16384, p20480,
										p24576, p28672, p32768, p40960, p49152, p57344, p65536, infinity, spare8, spare7, spare6, spare5, spare4,
										spare3, spare2, spare1}

PollByte ::=						ENUMERATED {
										kB1, kB2, kB5, kB8, kB10, kB15, kB25, kB50, kB75,
										kB100, kB125, kB250, kB375, kB500, kB750, kB1000,
										kB1250, kB1500, kB2000, kB3000, kB4000, kB4500,
										kB5000, kB5500, kB6000, kB6500, kB7000, kB7500,
										mB8, mB9, mB10, mB11, mB12, mB13, mB14, mB15,
										mB16, mB17, mB18, mB20, mB25, mB30, mB40, infinity,
										spare20, spare19, spare18, spare17, spare16,
										spare15, spare14, spare13, spare12, spare11,
										spare10, spare9, spare8, spare7, spare6, spare5,
										spare4, spare3, spare2, spare1}

T-Reassembly ::=					ENUMERATED {
										ms0, ms5, ms10, ms15, ms20, ms25, ms30, ms35,
										ms40, ms45, ms50, ms55, ms60, ms65, ms70,
										ms75, ms80, ms85, ms90, ms95, ms100, ms110,
										ms120, ms130, ms140, ms150, ms160, ms170,
										ms180, ms190, ms200, spare1}

T-StatusProhibit ::=				ENUMERATED {
										ms0, ms5, ms10, ms15, ms20, ms25, ms30, ms35,
										ms40, ms45, ms50, ms55, ms60, ms65, ms70,
										ms75, ms80, ms85, ms90, ms95, ms100, ms105,
										ms110, ms115, ms120, ms125, ms130, ms135,
										ms140, ms145, ms150, ms155, ms160, ms165,
										ms170, ms175, ms180, ms185, ms190, ms195,
										ms200, ms205, ms210, ms215, ms220, ms225,
										ms230, ms235, ms240, ms245, ms250, ms300,
										ms350, ms400, ms450, ms500, ms800, ms1000,
										ms1200, ms1600, ms2000, ms2400, spare2, spare1}

SN-FieldLengthUM ::=				ENUMERATED {size6, size12}
SN-FieldLengthAM ::=				ENUMERATED {size12, size18}

-- TAG-RLC-CONFIG-STOP
-- ASN1STOP

RLC-Configfield descriptionsmaxRetxThreshold
Parameter for RLC AM in TS 38.322 [4]. Value t1 corresponds to 1 retransmission, t2 to 2 retransmissions and so on.pollByte
Parameter for RLC AM in TS 38.322 [4]. Value kB25 corresponds to 25 kBytes, kB50 to 50 kBytes and so on. infinity corresponds to an infinite amount of kBytes.pollPDU
Parameter for RLC AM in TS 38.322 [4]. Value p4 corresponds to 4 PDUs, p8 to 8 PDUs and so on. infinity corresponds to an infinite number of PDUs.sn-FieldLength
Indicates the RLC SN field size, see TS 38.322 [4], in bits. Value size6 means 6 bits, size12 means 12 bits, size18 means 18 bits. The value of sn-FieldLength for a DRB shall be changed only using reconfiguration with sync.t-PollRetransmit
Timer for RLC AM inTS 38.322 [4], in milliseconds. Value ms5 means 5ms, ms10 means 10ms and so on.t-Reassembly
Timer for reassembly in TS 38.322 [4], in milliseconds. Value ms0 means 0ms, ms5 means 5ms and so on. t-StatusProhibit
Timer for status reporting in TS 38.322 [4], in milliseconds. Value ms0 means 0ms, ms5 means 5ms and so on.
–	RLF-TimersAndConstants
Editor’s Note: FFS / TODO: Insert the RLF timers and related functionality. Check what is needed for EN-DC.
The RLF-TimersAndConstants IE is used to configure UE specific timers and constants.
RLF-TimersAndConstants information element
-- ASN1START
-- TAG-RLF-TIMERS-AND-CONSTANTS-START

RLF-TimersAndConstants ::= 			SEQUENCE {
	t310								ENUMERATED {ms0, ms50, ms100, ms200, ms500, ms1000, ms2000, ms4000, ms6000},
	n310								ENUMERATED {n1, n2, n3, n4, n6, n8, n10, n20},
	n311								ENUMERATED {n1, n2, n3, n4, n5, n6, n8, n10},
	...
}

-- TAG-RLF-TIMERS-AND-CONSTANTS-STOP
-- ASN1STOP

RLF-TimersAndConstants field descriptionsn3xy
Constants are described in section 7.4. n1 corresponds with 1, n2 corresponds to 2 and so on.t3xy
Timers are described in section 7.3. Value ms0 corresponds with 0 ms, ms50 corresponds to 50 ms and so on.
–	RNTI-Value
The RNTI-Value IE represents a Radio Network Temporary Identity.
RNTI-Value information element
-- ASN1START
-- TAG-RNTI-VALUE-START

RNTI-Value ::=						INTEGER (0..65535)

-- TAG-RNTI-VALUE-STOP
-- ASN1STOP

–	RSRP-Range
The IE RSRP-Range specifies the value range used in RSRP measurements and thresholds. Integer value for RSRP measurements according to mapping table in TS 38.133 [14].
RSRP-Range information element
-- ASN1START
-- TAG-RSRP-RANGE-START

RSRP-Range ::=						INTEGER(0..124)

-- TAG-RSRP-RANGE-STOP
-- ASN1STOP

–	RSRQ-Range
The IE RSRQ-Range specifies the value range used in RSRQ measurements and thresholds. Integer value for RSRQ measurements is according to mapping table in TS 38.133 [14].
RSRQ-Range information element
-- ASN1START
-- TAG-RSRQ-RANGE-START

RSRQ-Range ::=						INTEGER(0..127)

-- TAG-RSRQ-RANGE-STOP
-- ASN1STOP

–	SCellIndex
The IE SCellIndex concerns a short identity, used to identify an SCell.
SCellIndex information element
-- ASN1START
-- TAG-SCELL-INDEX-START

-- The value range is shared across the Cell Groups 
SCellIndex ::=						INTEGER (1..31)

-- TAG-SCELL-INDEX-STOP
-- ASN1STOP

–	SchedulingRequestConfig
The IE SchedulingRequestConfig is used to configure the parameters, for the dedicated scheduling request (SR) resources.
SchedulingRequestConfig information element
-- ASN1START 
-- TAG-SCHEDULING-REQUEST-CONFIG-START

SchedulingRequestConfig ::= 		SEQUENCE {
	schedulingRequestToAddModList		SEQUENCE (SIZE (1..maxNrofSR-ConfigPerCellGroup)) OF SchedulingRequestToAddMod			OPTIONAL, -- Need N
	schedulingRequestToReleaseList		SEQUENCE (SIZE (1..maxNrofSR-ConfigPerCellGroup)) OF SchedulingRequestId				OPTIONAL  -- Need N
}

SchedulingRequestToAddMod ::=		SEQUENCE {
	sr-ConfigIndex		SchedulingRequestId,

	sr-ProhibitTimer					ENUMERATED {ms1, ms2, ms4, ms8, ms16, ms32, ms64, ms128}					OPTIONAL,	-- Need S
	sr-TransMax							ENUMERATED { n4, n8, n16, n32, n64, spare3, spare2, spare1}
}

SchedulingRequestId ::=	INTEGER (0..7)

-- FFS_TODO: provide resources for each SchedulingRequestID in ServingCellConfig (TBD whether directly, in PUCCH-Config, in each BWP)

-- TAG-SCHEDULING-REQUEST-CONFIG-STOP
-- ASN1STOP

SchedulingRequestConfig field descriptionsschedulingRequestToAddModList 
List of Scheduling Request configurations to add or modify.schedulingRequestToReleaseList
List of Scheduling Request configurations to releasesr-ConfigIndex
Used to modify a SR configuration and to indicate, in LogicalChannelConfig, the SR configuration to which a logical channel is mapped.sr-ProhibitTimer
Timer for SR transmission on PUCCH in TS 38.321 [3]. Value in ms. ms1 corresponds to 1ms, ms2 corresponds to 2ms, and so on.  When the field is absent, the UE applies the value 0.sr-TransMax
Maximum number of SR transmissions as described in 38.321 [3]. n4 corresponds to 4, n8 corresponds to 8, and so on. 
–	SchedulingRequestResourceConfig
The IE SchedulingRequestResourceConfig determines physical layer resources on PUCCH where the UE may send the dedicated scheduling request (D-SR) (see 38.213, section 9.2.2). 
SchedulingRequestResourceConfig information element
-- ASN1START 
-- TAG-SCHEDULING-REQUEST-RESOURCE-CONFIG-START

SchedulingRequestResourceConfig ::=			SEQUENCE {
	schedulingRequestResourceId						SchedulingRequestResourceId,
	-- The ID of the SchedulingRequestConfig that uses this scheduling request resource.
	schedulingRequestID								SchedulingRequestId,
	-- SR periodicity and offset in number of slots. Corresponds to L1 parameter 'SR-periodicity' and 'SR-offset' (see 38.213, section 9.2.2)	
	-- The following periodicities may be configured depending on the chosen subcarrier spacing:
	-- SCS =  15 kHz: 2sym, 7sym, 1sl, 2sl, 4sl, 5sl, 8sl, 10sl, 16sl, 20sl, 40sl, 80sl
	-- SCS =  30 kHz: 2sym, 7sym, 1sl, 2sl, 4sl, 8sl, 10sl, 16sl, 20sl, 40sl, 80sl, 160sl
	-- SCS =  60 kHz: 2sym, 7sym/6sym, 1sl, 2sl, 4sl, 8sl, 16sl, 20sl, 40sl, 80sl, 160sl, 320sl
	-- SCS = 120 kHz: 2sym, 7sym, 1sl, 2sl, 4sl, 8sl, 16sl, 40sl, 80sl, 160sl, 320sl, sl640
	-- sym6or7 corresponds to 6 symbols if extended cyclic prefix and a SCS of 60 kHz are configured, otherwise it corresponds to 7 symbols.
	-- For periodicities sym2, sym7 and sl1 the UE assumes an offset of 0 slots.
	periodicityAndOffset							CHOICE {
		sym2											NULL,						
		sym6or7											NULL,						
		sl1												NULL,						-- Recurs in every slot
		sl2												INTEGER (0..1),
		sl4												INTEGER (0..3),
		sl5												INTEGER (0..4),
		sl8												INTEGER (0..7),
		sl10											INTEGER (0..9),
		sl16											INTEGER (0..15),
		sl20											INTEGER (0..19),
		sl40											INTEGER (0..39),
		sl80											INTEGER (0..79),
		sl160											INTEGER (0..159),
		sl320											INTEGER (0..319),
		sl640											INTEGER (0..639)
	}																														OPTIONAL,	-- Need M
	-- ID of the PUCCH resource in which the UE shall send the scheduling request. The 
	-- actual PUCCH-Resource is configured in PUCCH-Config of the same UL BWP and serving cell as this SchedulingRequestResourceConfig. 
	-- The network configures a PUCCH-Resource of PUCCH-format0 or PUCCH-format1 
	-- (other formats not supported). Corresponds to L1 parameter 'SR-resource' (see 38.213, section 9.2.2)
	resource										PUCCH-ResourceId														OPTIONAL	-- Need M
}

-- TAG-SCHEDULING-REQUEST-RESOURCE-CONFIG-STOP
-- ASN1STOP

–	SchedulingRequestResourceId
The IE SchedulingRequestResourceId is used to identify scheduling request resources on PUCCH.
SchedulingRequestResourceId information element
-- ASN1START
-- TAG-SCHEDULINGREQUESTRESOURCEID-START

SchedulingRequestResourceId ::=					INTEGER (1..maxNrofSR-Resources)

-- TAG-SCHEDULINGREQUESTRESOURCEID-STOP
-- ASN1STOP

–	ScramblingId
The IE ScramblingID is used for scrambling channels and reference signals.
-- ASN1START 
-- TAG-SCRAMBLING-ID-START

ScramblingId ::=					INTEGER (0..1023)

-- TAG-SCRAMBLING-ID-STOP
-- ASN1STOP 

–	SCS-SpecificCarrier
The IE SCS-SpecificCarrier provides parameters determining the location and width of the actual carrier. It is defined specifically for a numerology (subcarrier spacing (SCS)) and in relation (frequency offset) to Point A.
-- ASN1START
-- TAG-SCS-SPECIFIC-CARRIER-START

SCS-SpecificCarrier ::=			SEQUENCE {
	-- Offset in frequency domain between Point A (lowest subcarrier of common RB 0) and the lowest usable subcarrier on this carrier
	-- in number of PRBs (using the subcarrierSpacing defined for this carrier). The maximum value corresponds to 275*8-1. 
	-- Corresponds to L1 parameter 'offset-pointA-low-scs' (see 38.211, section FFS_Section)
	offsetToCarrier				INTEGER (0..2199),
	-- Subcarrier spacing of this carrier. It is used to convert the offsetToCarrier into an actual frequency. 
	-- Only the values 15 or 30 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are applicable.
	-- Corresponds to L1 parameter 'ref-scs' (see 38.211, section FFS_Section)
	subcarrierSpacing					SubcarrierSpacing,
	-- Corresponds to L1 parameter k0 (see 38.211, section 5.3.1). n-6 corresponds to value -6, n0 corresponds to value 0 and n6 corresponds
	-- to value +6.
	k0									ENUMERATED {n-6, n0, n6}, 
	-- Width of this carrier in number of PRBs (using the subcarrierSpacing defined for this carrier)
	-- Corresponds to L1 parameter 'BW' (see 38.211, section FFS_Section)
	carrierBandwidth					INTEGER (1..maxNrofPhysicalResourceBlocks),
	...
}

-- TAG-SCS-SPECIFIC-CARRIER-STOP 
-- ASN1STOP

Conditional PresenceExplanationOnePerServCellThis field must be present for exactly one SCS-SpecificCarrier of a serving cell. 
–	SDAP-Config
The IE SDAP-Config is used to set the configurable SDAP parameters for a data radio bearer. All configured instances of SDAP-Config with the same value of pdu-Session correspond to the same SDAP entity as specified in TS 37.324 [FFS_Ref].
SDAP-Config information element
-- ASN1START 
-- TAG-SDAP-CONFIG-START

SDAP-Config ::=						SEQUENCE {
	pdu-Session							PDU-SessionID,

	-- FFS: separate configuration for UL and DL
	sdap-HeaderDL 						ENUMERATED {present, absent},
	sdap-HeaderUL 						ENUMERATED {present, absent},
	defaultDRB							BOOLEAN,

	-- A list of QoS-Flow-IDs that the UE shall map to the DRB of this SDAP-Config.
	mappedQoS-FlowsToAdd				SEQUENCE (SIZE (1..maxNrofQFIs)) OF QFI 									OPTIONAL, -- Need N
	-- A list of QoS-Flow-IDs that the UE shall no longer map to the DRB of this SDAP-Config.
	mappedQoS-FlowsToRelease			SEQUENCE (SIZE (1..maxNrofQFIs)) OF QFI 									OPTIONAL, -- Need N
	...
}

QFI ::= 							INTEGER (0..maxQFI)

PDU-SessionID ::= INTEGER (0..255)

-- TAG-SDAP-CONFIG-STOP
-- ASN1STOP

SDAP-Configfield descriptionsdefaultDRB
Indicates whether or not this is the default DRB for this PDU session. Among all configured instances of SDAP-Config with the same value of pdu-Session, this field shall be set to TRUE in at most one instance of SDAP-Config and to FALSE in all other instances.mappedQoS-FlowsToAdd
Indicates the list of QFIs of QoS flows of the PDU session to be additionally mapped to this DRB. A QFI value can be included at most once in all configured instances of SDAP-Config with the same value of pdu-Session.mappedQoS-FlowsToRelease
Indicates the list of QFIs of QoS flows of the PDU session to be released from existing QoS flow to DRB mapping of this DRB. pdu-Session
Identity of the PDU session whose QoS flows are mapped to the DRBreflectiveQoS
Indicates whether or not reflective QoS is active for QoS flows transmitted via this DRB.sdap-HeaderUL
Indicates whether or not a SDAP header is present for UL data on this DRB.sdap-HeaderDL
Indicates whether or not a SDAP header is present for DL data on this DRB.
–	SearchSpace
The IE SearchSpace defines how/where to search for PDCCH candidates. Each search space is associated with one ControlResourceSet.
SearchSpace information element
-- ASN1START
-- TAG-SEARCHSPACE-START

SearchSpace ::= 						SEQUENCE {
	-- Identity of the search space. SearchSpaceId = 0 identifies the SearchSpace configured via PBCH (MIB) or ServingCellConfigCommon.
	-- The searchSpaceId is unique among the BWPs of a Serving Cell. 
	searchSpaceId							SearchSpaceId,

	-- The CORESET applicable for this SearchSpace. 
	-- Value 0 identifies the common CORESET configured in MIB and in ServingCellConfigCommon
	-- Values 1..maxNrofControlResourceSets-1 identify CORESETs configured by dedicated signalling
	controlResourceSetId					ControlResourceSetId														OPTIONAL, 	-- Cond SetupOnly

	-- Slots for PDCCH Monitoring configured as periodicity and offset. Corresponds to L1 parameters 'Montoring-periodicity-PDCCH-slot' and 
	-- 'Montoring-offset-PDCCH-slot' (see 38.213, section 10)
	monitoringSlotPeriodicityAndOffset		CHOICE {
		sl1										NULL, 
		sl2										INTEGER (0..1), 
		sl4										INTEGER (0..3), 
		sl5 									INTEGER (0..4),
		sl8										INTEGER (0..7), 
		sl10 									INTEGER (0..9),
		sl16 									INTEGER (0..15),
		sl20 									INTEGER (0..19)
	}																													OPTIONAL,	-- Cond Setup

	-- Symbols for PDCCH monitoring in the slots configured for PDCCH monitoring (see monitoringSlotPeriodicityAndOffset).
	-- The most significant (left) bit represents the first OFDM in a slot. The least significant (right) bit represents the last symbol. 
	-- Corresponds to L1 parameter 'Montoring-symbols-PDCCH-within-slot' (see 38.213, section 10)
	monitoringSymbolsWithinSlot					BIT STRING (SIZE (14))													OPTIONAL, 	-- Cond Setup

	-- Number of PDCCH candidates per aggregation level. Corresponds to L1 parameter 'Aggregation-level-1' to 'Aggregation-level-8'.
	-- The number of candidates and aggregation levels configured here applies to all formats unless a particular value is specified or
	-- a format-specific value is provided (see inside searchSpaceType). 
	-- (see 38.213, section 10)
	nrofCandidates							SEQUENCE {
		aggregationLevel1						ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8},
		aggregationLevel2						ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8},
		aggregationLevel4						ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8},
		aggregationLevel8						ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8},
		aggregationLevel16						ENUMERATED {n0, n1, n2, n3, n4, n5, n6, n8}
	}																													OPTIONAL,	-- Cond Setup

	-- Indicates whether this is a common search space (present) or a UE specific search space as well as DCI formats to monitor for.
	searchSpaceType							CHOICE {
		-- Configures this search space as common search space (CSS) and DCI formats to monitor.
		common									SEQUENCE {
			-- If configured, the UE monitors the DCI formats 0_0 and 1_0 with CRC scrambled by C-RNTI, CS-RNTI (if configured), 
			-- SP-CSI-RNTI (if configured), RA-RNTI, TC-RNTI, P-RNTI, SI-RNTI
			dci-Format0-0-AndFormat1-0					SEQUENCE {
				...
			}																											OPTIONAL,	-- Need R
			-- If configured, UE monitors the DCI format format 2_0 with CRC scrambled by SFI-RNTI
			dci-Format2-0								SEQUENCE {
				-- The number of PDCCH candidates specifically for format 2-0 for the configured aggregation level.
				-- If an aggregation level is absent, the UE does not search for any candidates with that aggregation level.
				-- Corresponds to L1 parameters 'SFI-Num-PDCCH-cand' and 'SFI-Aggregation-Level' (see 38.213, section 11.1.1).
				nrofCandidates-SFI							SEQUENCE {
					aggregationLevel1							ENUMERATED {n1, n2}										OPTIONAL,	-- Need R
					aggregationLevel2							ENUMERATED {n1, n2}										OPTIONAL,	-- Need R
					aggregationLevel4							ENUMERATED {n1, n2}										OPTIONAL,	-- Need R
					aggregationLevel8							ENUMERATED {n1, n2}										OPTIONAL,	-- Need R
					aggregationLevel16							ENUMERATED {n1, n2}										OPTIONAL	-- Need R
				},
				...
			}																											OPTIONAL,	-- Need R
			-- If configured, UE monitors the DCI format format 2_1 with CRC scrambled by INT-RNTI
			dci-Format2-1								SEQUENCE {
				...
			}																											OPTIONAL,	-- Need R
			-- If configured, UE monitors the DCI format 2_2 with CRC scrambled by TPC-PUSCH-RNTI or TPC-PUCCH-RNTI
			dci-Format2-2								SEQUENCE {
				...
			}																											OPTIONAL,	-- Need R
			-- If configured, UE monitors the DCI format 2_3 with CRC scrambled by TPC-SRS-RNTI
			dci-Format2-3								SEQUENCE {
				-- Monitoring periodicity of SRS PDCCH in number of slots for DCI format 2-3. 
				-- Corresponds to L1 parameter 'SRS-monitoring-periodicity' (see 38.212, 38.213, section 7.3.1, 11.3)
				monitoringPeriodicity				ENUMERATED {n1, n2, n4, n5, n8, n10, n16, n20 }						OPTIONAL, 	-- Cond Setup

				-- The number of PDCCH candidates for DCI format 2-3 for the configured aggregation level.
				-- Corresponds to L1 parameter 'SRS-Num-PDCCH-cand' (see 38.212, 38.213, section 7.3.1, 11.3)
				nrofPDCCH-Candidates				ENUMERATED {n1, n2},
				...
			}																											OPTIONAL	-- Need R
		},
		-- Configures this search space as UE specific search space (USS). The UE monitors the DCI format with CRC scrambled 
		-- by C-RNTI, CS-RNTI (if configured), TC-RNTI (if a certain condition is met), and SP-CSI-RNTI (if configured)
		ue-Specific								SEQUENCE {
			-- Indicates whether the UE monitors in this USS for DCI formats 0-0 and 1-0 or for formats 0-1 and 1-1.
			dci-Formats									ENUMERATED {formats0-0-And-1-0, formats0-1-And-1-1},
			... 
		}
	}																													OPTIONAL	-- Cond Setup
}
-- TAG-SEARCHSPACE-STOP
-- ASN1STOP

Conditional PresenceExplanationSetupThis field is mandatory present upon creation of a new SearchSpace. It is optionally present, Need M, otherwise.SetupOnlyThis field is mandatory present upon creation of a new SearchSpace. It is absent otherwise.
–	SearchSpaceId
The IE SearchSpaceId is used to identify Search Spaces. The search space with the SearchSpaceId = 0 identifies the search space configured via PBCH (MIB) and in ServingCellConfigCommon. The number of Search Spaces per BWP is limited to 10 including the initial Search Space.
SearchSpaceId information element
-- ASN1START
-- TAG-SEARCHSPACEID-START

SearchSpaceId ::= 							INTEGER (0..maxNrofSearchSpaces-1)

-- TAG-SEARCHSPACEID-STOP
-- ASN1STOP

–	SecurityAlgorithmConfig
The IE SecurityAlgorithmConfig is used to configure AS integrity protection algorithm (SRBs) and AS ciphering algorithm (SRBs and DRBs).
SecurityAlgorithmConfig information element
-- ASN1START
-- TAG-SECURITY-ALGORITHM-CONFIG-START

SecurityAlgorithmConfig ::=			SEQUENCE {
	cipheringAlgorithm					CipheringAlgorithm,
	integrityProtAlgorithm				IntegrityProtAlgorithm			OPTIONAL,	-- Need R	
	...
}

IntegrityProtAlgorithm ::=			ENUMERATED {
											nia0, nia1, nia2, nia3, spare4, spare3,
											spare2, spare1, ...}

CipheringAlgorithm ::=				ENUMERATED {
											nea0, nea1, nea2, nea3, spare4, spare3,
											spare2, spare1, ...}

-- TAG-SECURITY-ALGORITHM-CONFIG-STOP
-- ASN1STOP

SecurityAlgorithmConfig field descriptionscipheringAlgorithm
Indicates the ciphering algorithm to be used for SRBs and DRBs, as specified in TS 33.501 [11]. The algorithms nea0-nea3 are identical to the LTE algorithms eea0-3. For EN-DC, the algorithms configured for bearers using KeNB shall be the same as for all bearers using KeNB and the algorithms configured for bearers using KgNB shall be the same as for all bearers using KgNB.integrityProtAlgorithm
For EN-DC, this IE indicates the integrity protection algorithm to be used for SRBs, as specified in TS 33.501 [11]. The algorithms nia0-nia3 is identical to the LTE algorithms eia0-3. For EN-DC, the algorithms configured for SRBs using KeNB shall be the same as for all SRBs using KeNB and the algorithms configured for bearers using KgNB shall be the same as for all bearers using KgNB.
–	ServCellIndex
The IE ServCellIndex concerns a short identity, used to identify a serving cell (i.e. the PCell or an SCell). Value 0 applies for the PCell, while the SCellIndex that has previously been assigned applies for SCells.
ServCellIndex information element
-- ASN1START
-- TAG-SERV-CELL-INDEX-START

ServCellIndex ::=					INTEGER (0..maxNrofServingCells-1)

-- TAG-SERV-CELL-INDEX-STOP
-- ASN1STOP

–	ServingCellConfig
The ServingCellConfig IE is used to configure (add or modify) the UE with a serving cell, which may be the SpCell or an SCell of an MCG or SCG. The parameters herein are mostly UE specific but partly also cell specific (e.g. in additionally configured bandwidth parts).
ServingCellConfig information element
-- ASN1START
-- TAG-SERVING-CELL-CONFIG-START

ServingCellConfig ::=		SEQUENCE {
	-- L1 parameters:

	tdd-UL-DL-ConfigurationDedicated	TDD-UL-DL-ConfigDedicated												OPTIONAL, -- Cond TDD

	-- The dedicated (UE-specific) configuration for the initial downlink bandwidth-part.
	initialDownlinkBWP					BWP-DownlinkDedicated													OPTIONAL,	-- Cond ServCellAdd

	-- List of additional downlink bandwidth parts to be released. (see 38.211, 38.213, section 12). 
	downlinkBWP-ToReleaseList			SEQUENCE (SIZE (1..maxNrofBWPs)) OF BWP-Id								OPTIONAL,	-- Need N
	-- List of additional downlink bandwidth parts to be added or modified. (see 38.211, 38.213, section 12). 
	downlinkBWP-ToAddModList			SEQUENCE (SIZE (1..maxNrofBWPs)) OF BWP-Downlink						OPTIONAL, 	-- Need N

	-- If configured for an SpCell, this field contains the ID of the DL BWP to be activated upon performing the reconfiguration 
	-- in which it is received. If the field is absent, the RRC reconfiguration does not impose a BWP switch (corresponds to L1 
	-- parameter 'active-BWP-DL-Pcell'). 
	-- If configured for an SCell, this field contains the ID of the downlink bandwidth part to be used upon MAC-activation of an  SCell. 
	-- If not provided, the UE uses the default BWP.
	-- The initial bandwidth part is referred to by BWP-Id = 0.
	firstActiveDownlinkBWP-Id			BWP-Id																	OPTIONAL,	-- Need R

	-- The duration in ms after which the UE falls back to the default Bandwidth Part. (see 38.321, section 5.15) 
	-- The value 0.5 ms is only applicable for carriers >6 GHz. 
	-- When the network releases the timer configuration, the UE stops the timer without swithching to the default BWP.
	bwp-InactivityTimer					ENUMERATED {ms2, ms3, ms4, ms5, ms6, ms8, ms10, ms20, ms30, ms40,ms50, ms60, ms80,
													ms100, ms200, ms300, ms500, ms750, ms1280, ms1920, ms2560, spare10, spare9, 
													spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1 } OPTIONAL,	--	Need R	

	-- Corresponds to L1 parameter 'default-DL-BWP'. The initial bandwidth part is referred to by BWP-Id = 0.
	-- ID of the downlink bandwidth part to be used upon expiry of txxx.
	-- This field is UE specific. When the field is absent the UE uses the the initial BWP as default BWP.
	-- (see 38.211, 38.213, section 12 and 38.321, section 5.15)
	defaultDownlinkBWP-Id				BWP-Id																	OPTIONAL, 	-- Need M

	uplinkConfig						UplinkConfig															OPTIONAL,	-- Cond ServCellAdd-UL
	supplementaryUplink					UplinkConfig 															OPTIONAL, 	-- Cond ServCellAdd-SUL


	-- PDSCH releated parameters that are not BWP-specific.
	pdsch-ServingCellConfig				SetupRelease { PDSCH-ServingCellConfig }								OPTIONAL,	-- Need M
	csi-MeasConfig						SetupRelease { CSI-MeasConfig }											OPTIONAL,	-- Need M
	
	-- Includes parameters for configuration of carrier based SRS switching
	-- Corresponds to L1 parameter 'SRS-CarrierSwitching' (see 38,214, section FFS_Section)
	carrierSwitching					SetupRelease { SRS-CarrierSwitching	}									OPTIONAL,	-- Need M
	-- MAC parameters:
	sCellDeactivationTimer				ENUMERATED {ms20, ms40, ms80, ms160, ms200, ms240, ms320, ms400, ms480, ms520, ms640, 
												ms720, ms840, ms1280, spare2,spare1}				OPTIONAL,	-- Cond ServingCellWithoutPUCCH

	-- Indicates whether this SCell is cross-carrier scheduled by another serving cell.
	crossCarrierSchedulingConfig		CrossCarrierSchedulingConfig											OPTIONAL,	-- Need M

	-- Timing Advance Group ID, as specified in TS 38.321 [3],  which this cell belongs to. 
	tag-Id								TAG-Id,
	-- Enables the "UE beam lock function (UBF)", which disable changes to the UE beamforming configuration when in NR_RRC_CONNECTED.
	-- FFS: Parameter added preliminary based on RAN4 LS in R4-1711823. Decide where to place it (maybe ServingCellConfigCommon or 
	-- in a BeamManagement IE??)
	ue-BeamLockFunction					ENUMERATED {enabled}													OPTIONAL,	-- Need R

	-- Indicates whether UE shall apply as pathloss reference either the downlink of PCell or of SCell that corresponds with this uplink
	-- (see 38.213, section 7)
	pathlossReferenceLinking			ENUMERATED {pCell, sCell}												OPTIONAL		-- Cond SCellOnly
}

UplinkConfig ::=					SEQUENCE {
	-- Configuration of UL BWPs (including BWP-specific parameters:

	-- The dedicated (UE-specific) configuration for the initial uplink bandwidth-part.
	initialUplinkBWP					BWP-UplinkDedicated														OPTIONAL, 	-- Cond ServCellAdd

	-- The additional bandwidth parts for uplink. In case of TDD uplink- and downlink BWP with the same bandwidthPartId are considered 
	-- as a BWP pair and must have the same center frequency. 
	uplinkBWP-ToReleaseList				SEQUENCE (SIZE (1..maxNrofBWPs)) OF BWP-Id								OPTIONAL,	-- Need N
	uplinkBWP-ToAddModList				SEQUENCE (SIZE (1..maxNrofBWPs)) OF BWP-Uplink							OPTIONAL, 	-- Need N

	-- If configured for an SpCell, this field contains the ID of the DL BWP to be activated upon performing the reconfiguration 
	-- in which it is received. If the field is absent, the RRC reconfiguration does not impose a BWP switch (corresponds to 
	-- L1 parameter 'active-BWP-UL-Pcell').
	-- If configured for an SCell, this field contains the ID of the uplink bandwidth part to be used upon MAC-activation of an  SCell. 
	-- If not provided, the UE uses the FFS: default BWP.
	-- The initial bandwidth part is referred to by BandiwdthPartId = 0.
	firstActiveUplinkBWP-Id				BWP-Id																	OPTIONAL,	-- Need R

	-- Configuration that is common across the UL BWPs:

	-- PUSCH related parameters that are not BWP-specific.
	pusch-ServingCellConfig				SetupRelease { PUSCH-ServingCellConfig }								OPTIONAL,	-- Need M
	...
}

-- TAG-SERVING-CELL-CONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationSCellOnlyThis field is optionally present, Need R, for SCells. It is absent otherwise. ServCellAddThis field is mandatory present upon serving cell addition (for PSCell and SCell). It is optionally present, Need M otherwise.ServCellAdd-ULThis field is mandatory present upon serving cell addition (for PSCell and SCell) provided that the serving cell is configured with uplink. It is optionally present, Need M otherwise.ServCellAdd-SULThis field is mandatory present upon serving cell addition (for PSCell and SCell) provided that the serving cell is configured with a supplementary uplink. It is optionally present, Need M otherwise.
–	ServingCellConfigCommon
The ServingCellConfigCommon IE is used to configure cell specific parameters of a UE’s serving cell. The IE contains parameters which a UE would typically acquire from SSB, MIB or SIBs when accessing the cell from IDLE. With this IE, the network provides this information in dedicated signalling when configuring a UE with a SCells or with an additional cell group (SCG). It also provides it for SpCells (MCG and SCG) upon reconfiguration with sync.
ServingCellConfigCommon information element
-- ASN1START
-- TAG-SERVING-CELL-CONFIG-COMMON-START

ServingCellConfigCommon ::=		SEQUENCE {
	physCellId							PhysCellId													OPTIONAL, -- Cond HOAndServCellAdd,
	frequencyInfoDL						FrequencyInfoDL												OPTIONAL, -- Cond InterFreqHOAndServCellAdd
	-- The initial downlink BWP configuration for a SpCell (PCell of MCG or SCG). 
	initialDownlinkBWP					BWP-DownlinkCommon											OPTIONAL,	-- Cond ServCellAdd

	uplinkConfigCommon					UplinkConfigCommon											OPTIONAL, -- Cond ServCellAdd-UL 
	supplementaryUplinkConfig					UplinkConfigCommon									OPTIONAL, -- Cond ServCellAdd-SUL


	-- Indicates the time domain positions of the transmitted SS-blocks in an SS-burst. The first/ leftmost bit corresponds to SS/PBCH 
	-- block index 0, the second bit corresponds to SS/PBCH block index 1, and so on. Value 0 in the bitmap indicates that the 
	-- corresponding SS/PBCH block is not transmitted while value 1 indicates that the corresponding SS/PBCH block is transmitted.
	-- Corresponds to L1 parameter 'SSB-Transmitted' (see 38.213, section 4.1)
	ssb-PositionsInBurst				CHOICE {
		-- bitmap for sub 3 GHz
		shortBitmap							BIT STRING (SIZE (4)),
		-- bitmap for 3-6 GHz
		mediumBitmap						BIT STRING (SIZE (8)),
		-- bitmap for above 6 GHz
		longBitmap							BIT STRING (SIZE (64))
	}																								OPTIONAL, -- Need R,
	-- The SSB periodicity in msec for the rate matching purpose. If the field is absent, the UE applies the value ms5.
	-- (see 38.211, section [7.4.3.1])
	ssb-periodicityServingCell			ENUMERATED { ms5, ms10, ms20, ms40, ms80, ms160, spare2, spare1 }			OPTIONAL,	-- Need S
	-- Position of (first) DL DM-RS (see 38.211, section 7.4.1.1.1)
	dmrs-TypeA-Position					ENUMERATED {pos2, pos3},

	-- Parameters to determine an LTE CRS pattern that the UE shall rate match around.
	lte-CRS-ToMatchAround					SetupRelease { RateMatchPatternLTE-CRS } 				OPTIONAL,	-- Need M

	-- Resources patterns which the UE should rate match PDSCH around. The UE rate matches around the union of all resources 
	-- indicated in the nested bitmaps. Rate match patterns defined here on cell level apply only to PDSCH of the same numerology.
	-- Corresponds to L1 parameter 'Resource-set-cekk' (see 38.214, section 5.1.2.2.3)
	rateMatchPatternToAddModList			SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPattern		OPTIONAL, -- Need N
	rateMatchPatternToReleaseList			SEQUENCE (SIZE (1..maxNrofRateMatchPatterns)) OF RateMatchPatternId		OPTIONAL, -- Need N

	-- Subcarrier spacing of SSB. Used only for non-initial access (e.g. SCells, PCell of SCG).
	-- If the field is absent the UE shall assume the default value of the band. 
	-- Only the values 15 or 30 kHz (<6GHz), 120 or 240 kHz (>6GHz) are applicable.
	subcarrierSpacing				SubcarrierSpacing												OPTIONAL, -- Need S
	-- A cell-specific TDD UL/DL configuration. Corresponds to L1 parameter 'UL-DL-configuration-common' (see 38.213, section 11.1)
	tdd-UL-DL-ConfigurationCommon		TDD-UL-DL-ConfigCommon										OPTIONAL, -- Cond TDD
	-- A second cell-specific TDD UL/DL configuration. When tdd-UL-DL-ConfigurationCommon2 is configured, the cell specific DL/UL 
	-- pattern is a concatenation of the pattern specified in tdd-UL-DL-ConfigurationCommon and the pattern specified in 
	-- tdd-UL-DL-ConfigurationCommon2. Corresponds to L1 parameter 'UL-DL-configuration-common-Set2' (see 38.211, section 11.1)
	tdd-UL-DL-ConfigurationCommon2		TDD-UL-DL-ConfigCommon										OPTIONAL, -- Cond TDD
	-- TX power that the NW used for SSB transmission. The UE uses it to estimate the RA preamble TX power. 
	-- (see 38.213, section 7.4)
	ss-PBCH-BlockPower					INTEGER (-60..50),
	...
}

UplinkConfigCommon ::=				SEQUENCE {
	-- Absolute uplink frequency configuration and subcarrier specific virtual carriers.
	frequencyInfoUL						FrequencyInfoUL												OPTIONAL, -- Cond InterFreqHOAndServCellAdd
	-- The initial uplink BWP configuration for a SpCell (PCell of MCG or SCG). Corresponds to L1 parameter 'initial-UL-BWP'. 
	-- (see 38.331, section FFS_Section).
	initialUplinkBWP			BWP-UplinkCommon													OPTIONAL	-- Cond ServCellAdd
}

-- TAG-SERVING-CELL-CONFIG-COMMON-STOP 
-- ASN1STOP

Conditional PresenceExplanationHOAndServCellAddThis field is mandatory present for inter-cell handover and upon serving cell (PSCell/SCell) addition. Otherwise, the field is absent, Need M. InterFreqHOAndServCellAddThis field is mandatory present for inter-frequency handover and upon serving cell (PSCell/SCell) addition. Otherwise, the field isoptionally present, Need M.ServCellAddThis field is mandatory present upon serving cell addition (for PSCell and SCell). It is optionally present, Need M otherwise.ServCellAdd-ULThis field is mandatory present upon serving cell addition (for PSCell and SCell) provided that the serving cell is configured with uplink. It is optionally present, Need M otherwise.ServCellAdd-SULThis field is mandatory present upon serving cell addition (for PSCell and SCell) provided that the serving cell is configured with a supplementary uplink. It is optionally present, Need M otherwise.
–	SINR-Range
The IE SINR-Range specifies the value range used in SINR measurements and thresholds. Integer value for SINR measurements is according to mapping table in TS 38.133 [14].
SINR-Range information element
-- ASN1START
-- TAG-SINR-RANGE-START

SINR-Range ::=						INTEGER(0..127)

-- TAG-SINR-RANGE-STOP
-- ASN1STOP

–	SlotFormatCombinationsPerCell
The IE SlotFormatCombinationsPerCell is used to configure FFS
SlotFormatCombinationsPerCell information element
-- ASN1START
-- TAG-SLOTFORMATCOMBINATIONSPERCELL-START

-- The SlotFormatCombinations applicable for one serving cell. Corresponds to L1 parameter 'cell-to-SFI' (see 38.213, section 11.1.1)
SlotFormatCombinationsPerCell ::=								SEQUENCE {
	-- The ID of the serving cell for which the slotFormatCombinations are applicable
	servingCellId								ServCellIndex,

	-- Reference subcarrier spacing for this Slot Format Combination. Corresponds to L1 parameter 'SFI-scs' (see 38.213, section FFS_Section)
	subcarrierSpacing							SubcarrierSpacing,
	-- Reference subcarrier spacing for a Slot Format Combination on an FDD or SUL cell. 
	-- Corresponds to L1 parameter 'SFI-scs2' (see 38.213, section FFS_Section).
	-- For FDD, subcarrierSpacing (SFI-scs) is the reference SCS for DL BWP and subcarrierSpacing2 (SFI-scs2) is the reference SCS for UL BWP.
	-- For SUL, subcarrierSpacing (SFI-scs) is the reference SCS for non-SUL carrier and subcarrierSpacing2 (SFI-scs2) is the reference 
	-- SCS for SUL carrier. 
	subcarrierSpacing2							SubcarrierSpacing															OPTIONAL,	-- Need R

	-- A list with SlotFormatCombinations. Each SlotFormatCombination comprises of one or more SlotFormats (see 38.211, section 4.3.2)
	-- FFS_CHECK: RAN1 indicates that the combinations could be of two different types... but they don't specify the second
	slotFormatCombinations						SEQUENCE (SIZE (1..maxNrofSlotFormatCombinationsPerSet)) OF SlotFormatCombination	OPTIONAL,

	-- The (starting) position (bit) of the slotFormatCombinationId (SFI-Index) for this serving cell (servingCellId) within the DCI payload. 
	-- Corresponds to L1 parameter 'SFI-values' (see 38.213, section FFS_Section)
	positionInDCI							INTEGER(0..maxSFI-DCI-PayloadSize-1)													OPTIONAL,
	...
}

SlotFormatCombination ::= 					SEQUENCE {
	-- This ID is used in the DCI payload to dynamically select this SlotFormatCombination.
	-- Corresponds to L1 parameter 'SFI-index' (see 38.213, section FFS_Section)
	slotFormatCombinationId						SlotFormatCombinationId,
	-- Slot formats that occur in consecutive slots in time domain order as listed here. The the slot formats are 
	-- defined in 38.211, table 4.3.2-3 and numbered with 0..255.
	slotFormats									SEQUENCE (SIZE (1..maxNrofSlotFormatsPerCombination)) OF INTEGER (0..255)
}

-- SFI index that is assoicated with a certian slot-format-combination
-- Corresponds to L1 parameter 'SFI-index' (see 38.213, section FFS_Section)
SlotFormatCombinationId	::=					INTEGER (0..maxNrofSlotFormatCombinationsPerSet-1)

-- TAG-SLOTFORMATCOMBINATIONSPERCELL-STOP
-- ASN1STOP

–	SlotFormatIndicator
The IE SlotFormatIndicator is used to configure monitoring a Group-Common-PDCCH for Slot-Format-Indicators (SFI).
SlotFormatIndicator information element
-- ASN1START
-- TAG-SLOTFORMATINDICATOR-START

SlotFormatIndicator ::= 		SEQUENCE {
	-- RNTI used for SFI on the given cell
	-- Corresponds to L1 parameter 'SFI-RNTI' (see 38.213, section 11.1.1)
	sfi-RNTI						RNTI-Value,

	-- Total length of the DCI payload scrambled with SFI-RNTI. 
	-- Corresponds to L1 parameter 'SFI-DCI-payload-length' (see 38.213, section 11.1.1)
	dci-PayloadSize					INTEGER (1..maxSFI-DCI-PayloadSize),

	-- A list of SlotFormatCombinations for the UE's serving cells.
	-- Corresponds to L1 parameter 'SFI-cell-to-SFI' (see 38.213, section 11.1.1)
	slotFormatCombToAddModList		SEQUENCE (SIZE(1..maxNrofAggregatedCellsPerCellGroup)) OF SlotFormatCombinationsPerCell	OPTIONAL,	-- Need N
	slotFormatCombToReleaseList		SEQUENCE (SIZE(1..maxNrofAggregatedCellsPerCellGroup)) OF ServCellIndex					OPTIONAL,	-- Need N
	...
}

-- TAG-SLOTFORMATINDICATOR-STOP
-- ASN1STOP

–	SPS-Config
Editor’s Note: FFS: RAN1 indicated in the L1 table: "Note: Multiple configurations is possible, how many needs to be determined". RAN2 agreed that SPS can be used on Pcell and SCell... But each UE can use it on at most one serving cell of a cell group at a time. Are the ”multiple configuration” meant for one carrier? Does the UE then use several SPS-RNTIs?
The SPS-Config IE is used to configure downlink semi-persistent transmission.
SPS-Config information element
-- ASN1START
-- TAG-SPS-CONFIG-START

-- Downlink SPS may be configured on the PCell as well as on SCells. But it shall not be configured for more than
-- one serving cell of a cell group at once.
SPS-Config ::= 							SEQUENCE {
	-- Periodicity for DL SPS
	-- Corresponds to L1 parameter 'semiPersistSchedIntervalDL' (see 38.214 and 38.321, section FFS_Section)
	-- FFS-Value: Support also shorter periodicities for DL?
	periodicity								ENUMERATED {ms10, ms20, ms32, ms40, ms64, ms80, ms128, ms160, ms320, ms640,
														spare6, spare5, spare4, spare3, spare2, spare1},
	-- Number of configured HARQ processes for SPS DL. Corresponds to L1 parameter 'numberOfConfSPS-Processes' (see 38.214, section FFS_Section)
	nrofHARQ-Processes						INTEGER (1..8),
	-- HARQ resource for PUCCH for DL SPS. The network configures the resource either as format0 or format1. (see 38.214, section FFS_Section)
	n1PUCCH-AN									PUCCH-Resource																OPTIONAL	-- Need M
}

-- TAG-SPS-CONFIG-STOP
-- ASN1STOP

SPS-Configfield descriptionsn1PUCCH-AN
HARQ resource for PUCCH for DL SPS. The network configures the resource either as format0 or format1.nrofHARQ-Processes
Number of configured HARQ processes for SPS DL. Corresponds to L1 parameter 'numberOfConfSPS-Processes'periodicity
Periodicity for DL SPS, corresponding to L1 parameter ‘semiPersistSchedIntervalDL’.
–	SRB-Identity
The IE SRB-Identity is used to identify a Signalling Radio Bearer (SRB) used by a UE.
-- ASN1START
-- TAG-SRB-IDENTITY-START

SRB-Identity ::=					INTEGER (1..3)

-- TAG-SRB-IDENTITY-STOP
-- ASN1STOP


–	SRS-Config
The SRS-Config IE is used to configure sounding reference signal transmissions. The configuration defines a list of SRS-Resources and a list of SRS-ResourceSets. Each resource set defines a set of SRS-Resources. The network triggers the transmission of the set of SRS-Resources using a configured aperiodicSRS-ResourceTrigger (L1 DCI).
SRS-Config information element
-- ASN1START
-- TAG-SRS-CONFIG-START

SRS-Config ::= 							SEQUENCE {
	srs-ResourceSetToReleaseList 			SEQUENCE (SIZE(0..maxNrofSRS-ResourceSets)) OF SRS-ResourceSetId			OPTIONAL, 	-- Need N
	srs-ResourceSetToAddModList 			SEQUENCE (SIZE(0..maxNrofSRS-ResourceSets)) OF SRS-ResourceSet				OPTIONAL, 	-- Need N

	srs-ResourceToReleaseList 	 			SEQUENCE (SIZE(1..maxNrofSRS-Resources)) OF SRS-ResourceId					OPTIONAL,	-- Need N
	srs-ResourceToAddModList 	 			SEQUENCE (SIZE(1..maxNrofSRS-Resources)) OF SRS-Resource					OPTIONAL, 	-- Need N


	-- If absent, UE applies TPC commands via accumulation. If disabled, UE applies the TPC command without accumulation 
	-- (this applies to SRS when a separate closed loop is configured for SRS)
	-- Corresponds to L1 parameter 'Accumulation-enabled-srs' (see 38,213, section 7.3)
	tpc-Accumulation							ENUMERATED {disabled}													OPTIONAL,	-- Need S
	...
}

SRS-ResourceSet ::= 					SEQUENCE {
	-- The ID of this resource set. It is unique in the context of the BWP in which the parent SRS-Config is defined.
	srs-ResourceSetId						SRS-ResourceSetId,
	-- The IDs of the SRS-Reosurces used in this SRS-ResourceSet
	srs-ResourceIdList						SEQUENCE (SIZE(1..maxNrofSRS-ResourcesPerSet)) OF SRS-ResourceId		OPTIONAL,	-- Cond Setup

	resourceType							CHOICE {
		aperiodic								SEQUENCE {
			-- The DCI "code point" upon which the UE shall transmit SRS according to this SRS resource set configuration.
			-- Corresponds to L1 parameter 'AperiodicSRS-ResourceTrigger' (see 38.214, section 6.1.1.2)
			aperiodicSRS-ResourceTrigger			INTEGER (0..maxNrofSRS-TriggerStates-1),
			-- ID of CSI-RS resource associated with this SRS resource set. (see 38.214, section 6.1.1.2)
			csi-RS									NZP-CSI-RS-ResourceId,
			-- An offset in number of slots between the triggering DCI and the actual transmission of this SRS-ResourceSet.
			-- If the field is absent the UE applies no offset (value 0)
			slotOffset								INTEGER (1..8)													OPTIONAL,	-- Need S
			...
		},
		semi-persistent							SEQUENCE {
			-- ID of CSI-RS resource associated with this SRS resource set in non-codebook based operation.
			-- Corresponds to L1 parameter 'SRS-AssocCSIRS' (see 38.214, section 6.2.1)
			associatedCSI-RS		NZP-CSI-RS-ResourceId															OPTIONAL, -- Cond nonCodebook
			...
		},
		periodic								SEQUENCE {
			-- ID of CSI-RS resource associated with this SRS resource set in non-codebook based operation.
			-- Corresponds to L1 parameter 'SRS-AssocCSIRS' (see 38.214, section 6.2.1)
			associatedCSI-RS		NZP-CSI-RS-ResourceId															OPTIONAL, -- Cond nonCodebook
			...
		}
	},
	-- Indicates if the SRS resource set is used for beam management vs. used for either codebook based or non-codebook based transmission.
	-- Corresponds to L1 parameter 'SRS-SetUse' (see 38.214, section 6.2.1)
	-- FFS_CHECK: Isn't codebook/noncodebook already known from the ulTxConfig in the SRS-Config? If so, isn't the only distinction 
	-- in the set between BeamManagement, AtennaSwitching and "Other”? Or what happens if SRS-Config=Codebook but a Set=NonCodebook?
	usage									ENUMERATED {beamManagement, codebook, nonCodebook, antennaSwitching},

	-- alpha value for SRS power control. Corresponds to L1 parameter 'alpha-srs' (see 38.213, section 7.3)
	-- When the field is absent the UE applies the value 1
	alpha									Alpha																		OPTIONAL, -- Need S
	-- P0 value for SRS power control. The value is in dBm. Only even values (step size 2) are allowed.
	-- Corresponds to L1 parameter 'p0-srs' (see 38.213, section 7.3)
	p0										INTEGER (-202..24)															OPTIONAL, -- Cond Setup
	-- A reference signal (e.g. a CSI-RS config or a SSblock) to be used for SRS path loss estimation. 
	-- Corresponds to L1 parameter 'srs-pathlossReference-rs-config' (see 38.213, section 7.3)
	pathlossReferenceRS						CHOICE {
		ssb-Index								SSB-Index,
		csi-RS-Index							NZP-CSI-RS-ResourceId
	}																													OPTIONAL, -- Need M
	-- Indicates whether hsrs,c(i) = fc(i,1) or hsrs,c(i) = fc(i,2) (if twoPUSCH-PC-AdjustmentStates are configured) 
	-- or serarate close loop is configured for SRS. This parameter is applicable only for Uls on which UE also transmits PUSCH.
	-- If absent or release, the UE applies the value sameAs-Fci1
	-- Corresponds to L1 parameter 'srs-pcadjustment-state-config' (see 38.213, section 7.3)
	srs-PowerControlAdjustmentStates		ENUMERATED { sameAsFci2, separateClosedLoop}					OPTIONAL, -- Need S
	...
}

SRS-ResourceSetId ::= 					INTEGER (0..maxNrofSRS-ResourceSets-1)

SRS-Resource ::= 						SEQUENCE {
	srs-ResourceId							SRS-ResourceId,
	nrofSRS-Ports							ENUMERATED {port1, ports2, ports4},
	-- The PTRS port index for this SRS resource for non-codebook based UL MIMO. This is only applicable when the corresponding 
	-- PTRS-UplinkConfig is set to CP-OFDM. The ptrs-PortIndex configured here must be smaller than or equal to the maxNnrofPorts  
	-- configured in the PTRS-UplinkConfig.
	-- Corresponds to L1 parameter 'UL-PTRS-SRS-mapping-non-CB' (see 38.214, section 6.1)
	ptrs-PortIndex							ENUMERATED {n0, n1 }														OPTIONAL,	-- Need R  
	-- Comb value (2 or 4) and comb offset (0..combValue-1). Corresponds to L1 parameter 'SRS-TransmissionComb' (see 38.214, section 6.2.1)
	transmissionComb						CHOICE {
		n2										SEQUENCE {
			combOffset-n2							INTEGER (0..1),
			-- Cyclic shift configuration. Corresponds to L1 parameter 'SRS-CyclicShiftConfig' (see 38.214, section 6.2.1)
			cyclicShift-n2							INTEGER (0..7)
		}, 
		n4										SEQUENCE {
			combOffset-n4							INTEGER (0..3),
			-- Cyclic shift configuration. Corresponds to L1 parameter 'SRS-CyclicShiftConfig' (see 38.214, section 6.2.1)
			cyclicShift-n4							INTEGER (0..11)
		}
	},
	-- OFDM symbol location of the SRS resource within a slot including number of OFDM symbols (N = 1, 2 or 4 per SRS resource),
	-- startPosition (SRSSymbolStartPosition = 0..5; "0" refers to the last symbol, "1" refers to the second last symbol) and 
	-- RepetitionFactor (r = 1, 2 or 4).	
	-- Corresponds to L1 parameter 'SRS-ResourceMapping' (see 38.214, section 6.2.1 and 38.211, section 6.4.1.4). 
	-- FFS: Apparently, RAN1 considers replacing these three fields by a table in RAN1 specs and a corresponding index in ASN.1?!
	resourceMapping							SEQUENCE {
		startPosition							INTEGER (0..5),
		nrofSymbols								ENUMERATED {n1, n2, n4},
		repetitionFactor						ENUMERATED {n1, n2, n4}
	},
	-- Parameter(s) defining frequency domain position and configurable shift to align SRS allocation to 4 PRB grid.
	-- Corresponds to L1 parameter 'SRS-FreqDomainPosition' (see 38.214, section 6.2.1)
	freqDomainPosition						INTEGER (0..67),
	freqDomainShift							INTEGER (0..268), 
	-- Includes  parameters capturing SRS frequency hopping 
	-- Corresponds to L1 parameter 'SRS-FreqHopping' (see 38.214, section 6.2.1)
	freqHopping								SEQUENCE {
		c-SRS									INTEGER (0..63),
		b-SRS									INTEGER (0..3), 
		b-hop									INTEGER (0..3)
	},
	-- Parameter(s) for configuring group or sequence hopping
	-- Corresponds to L1 parameter 'SRS-GroupSequenceHopping' (see 38.211, section FFS_Section)
	groupOrSequenceHopping					ENUMERATED { neither, groupHopping, sequenceHopping },
	-- Time domain behavior of SRS resource configuration.  
	-- Corresponds to L1 parameter 'SRS-ResourceConfigType' (see 38.214, section 6.2.1).
	-- For codebook based uplink transmission, the network configures SRS resources in the same resource set with the same 
	-- time domain behavior on periodic, aperiodic and semi-persistent SRS.
	-- FFS: Add configuration parameters for the different SRS resource types?
	resourceType							CHOICE {
		aperiodic								SEQUENCE {
			...
		}, 
		semi-persistent							SEQUENCE {
			-- Periodicity and slot offset for for this SRS resource. All values in "number of slots".
			-- sl1 corresponds to a periodicity of 1 slot, value sl2 corresponds to a periodicity of 2 slots, and so on. 
			-- For each periodicity the corresponding offset is given in number of slots. For periodicity sl1 the offset is 0 slots.   
			-- Corresponds to L1 parameter 'SRS-SlotConfig' (see 38.214, section 6.2.1)
			periodicityAndOffset-sp						SRS-PeriodicityAndOffset,
			...
		},
		periodic								SEQUENCE {
			-- Periodicity and slot offset for for this SRS resource. All values in "number of slots" 
			-- sl1 corresponds to a periodicity of 1 slot, value sl2 corresponds to a periodicity of 2 slots, and so on. 
			-- For each periodicity the corresponding offset is given in number of slots. For periodicity sl1 the offset is 0 slots.   
			-- Corresponds to L1 parameter 'SRS-SlotConfig' (see 38.214, section 6.2.1)
			periodicityAndOffset-p						SRS-PeriodicityAndOffset,
			...
		}
	},
	-- Sequence ID used to initialize psedo random group and sequence hopping. 
	-- Corresponds to L1 parameter 'SRS-SequenceId' (see 38.214, section 6.2.1)
	sequenceId								BIT STRING (SIZE (10)),

	-- Configuration of the spatial relation between a reference RS and the target SRS. Reference RS can be SSB/CSI-RS/SRS
	-- Corresponds to L1 parameter 'SRS-SpatialRelationInfo' (see 38.214, section 6.2.1)
	spatialRelationInfo						CHOICE {
		ssb-Index								SSB-Index,
		csi-RS-Index									NZP-CSI-RS-ResourceId,
		srs										SRS-ResourceId
	}																													OPTIONAL,	-- Need R
	...
}

SRS-ResourceId ::= 						INTEGER (0..maxNrofSRS-Resources-1)

SRS-PeriodicityAndOffset ::=			CHOICE {
	sl1										NULL, 
	sl2										INTEGER(0..1), 
	sl4										INTEGER(0..3), 
	sl5										INTEGER(0..4), 
	sl8										INTEGER(0..7), 
	sl10									INTEGER(0..9), 
	sl16									INTEGER(0..15), 
	sl20									INTEGER(0..19), 
	sl32									INTEGER(0..31), 
	sl40									INTEGER(0..39), 
	sl64									INTEGER(0..63), 
	sl80									INTEGER(0..79), 
	sl160									INTEGER(0..159), 
	sl320									INTEGER(0..319),
	sl640									INTEGER(0..639),
	sl1280									INTEGER(0..1279),
	sl2560									INTEGER(0..2559)
}

-- TAG-SRS-CONFIG-STOP
-- ASN1STOP

Conditional PresenceExplanationSetupThis field is mandatory present upon configuration of SRS-ResourceSet or SRS-Resource and optional (Need M) otherwise
–	SRS-CarrierSwitching
The IE SRS-CarrierSwitching is used to configure FFS
SRS-CarrierSwitching information element
-- ASN1START
-- TAG-SRS-CARRIERSWITCHING-START
SRS-CarrierSwitching ::=				SEQUENCE {

	-- Indicates the serving cell whose UL transmission may be interrupted during SRS transmission on a PUSCH-less cell. 
	-- During SRS transmission on a PUSCH-less cell, the UE may temporarily suspend the UL transmission on a serving cell with PUSCH 
	-- in the same CG to allow the PUSCH-less cell to transmit SRS. (see 38.214, section 6.2.1.3)
	srs-SwitchFromServCellIndex				INTEGER (0..31)																OPTIONAL,	-- Cond Setup

	-- Network configures the UE with either typeA-SRS-TPC-PDCCH-Group or typeB-SRS-TPC-PDCCH-Group, if any.
	srs-TPC-PDCCH-Group					CHOICE {
		-- Type A trigger configuration for SRS transmission on a PUSCH-less SCell. 
		-- Corresponds to L1 parameter 'typeA-SRS-TPC-PDCCH-Group' (see 38.212, 38.213, section 7.3.1, 11.3)
		typeA								SEQUENCE (SIZE (1..32)) OF SRS-TPC-PDCCH-Config,
		-- Type B trigger configuration for SRS transmission on a PUSCH-less SCell. 
		-- Corresponds to L1 parameter 'typeB-SRS-TPC-PDCCH-Config' (see 38.212, 38.213, section 7.3.1, 11.3)
		typeB								SRS-TPC-PDCCH-Config
	}																													OPTIONAL, 	-- Cond Setup

	-- Maps a specific cell to a given SFI value within the DCI message
	-- Corresponds to L1 parameter 'SRS-cell-to-SFI' (see 38.212, 38.213, section 7.3.1, 11.3)
	srs-CellToSFI						SEQUENCE (SIZE (1..maxNrofServingCells)) OF SlotFormatCombinationsPerCell			OPTIONAL, 	-- Cond Setup
	
	-- A set of serving cells for monitoring PDCCH conveying SRS DCI format with CRC scrambled by TPC-SRS-RNTI
	-- Corresponds to L1 parameter 'SRS-monitoring-cells' (see 38.212, 38.213, section 7.3.1, 11.3)
	monitoringCells		SEQUENCE (SIZE (1..maxNrofServingCells)) OF ServCellIndex						OPTIONAL,	-- Cond Setup
	...
}

-- One trigger configuration for SRS-Carrier Switching. (see 38.212, 38.213, section 7.3.1, 11.3)
SRS-TPC-PDCCH-Config ::=				SEQUENCE {
	-- The starting bit position of a block within the group DCI with SRS request fields (optional) and TPC commands 
	-- for a PUSCH-less SCell. (see 38.212, 38.213, section 7.3.1, 11.3)
	startingBitOfFormat2-3					INTEGER (1..31)																OPTIONAL, 	-- Cond Setup
	-- The type of a field within the group DCI with SRS request fields (optional) for a PUSCH-less SCell, 
	-- which indicates how many bits in the field are for SRS request (0 or 1/2). 
	-- Note that for Type A, there is a common SRS request field for all SCells in the set, but each SCell has its 
	-- own TPC command bits. See TS 38.212. Network configures this field with the same value for all PUSCH-less SCells.
	-- (see 38.212, 38.213, section 7.3.1, 11.3)
	fieldTypeFormat2-3						INTEGER (0..1)																OPTIONAL, 	-- Cond Setup
	-- A list of paris of [cc-SetIndex; cc-IndexInOneCC-Set] (see 38.212, 38.213, section 7.3.1, 11.3)
	-- FFS: Improve description. What is a "CC"? Where is a CC-Set defined? ...
	srs-CC-SetIndexlist						SEQUENCE (SIZE(1..4)) OF SRS-CC-SetIndex 									OPTIONAL	-- Cond Setup
}

SRS-CC-SetIndex ::=						SEQUENCE {
	-- Indicates the CC set index for Type A associated (see 38.212, 38.213, section 7.3.1, 11.3)
	cc-SetIndex								INTEGER (0..3)															OPTIONAL, 	-- Cond Setup
	-- Indicates the CC index in one CC set for Type A (see 38.212, 38.213, section 7.3.1, 11.3)
	cc-IndexInOneCC-Set						INTEGER (0..7)															OPTIONAL		-- Cond Setup
}

-- TAG-SRS-CARRIERSWITCHING-STOP
-- ASN1STOP

Conditional PresenceExplanationSetupThis field is mandatory present upon configuration of SRS-CarrierSwitching or SRS-TPC-PDCCH-Config and optional (Need M) otherwise
–	SSB-Index
The IE SSB-Index identifies an SS-Block within an SS-Burst. See FFS_Ref, section FFS_Section.
SSB-Index information element
-- ASN1START
-- TAG-SSB-INDEX-START

SSB-Index ::=								INTEGER (0..63)

-- TAG-SSB-INDEX-STOP
-- ASN1STOP

–	SubcarrierSpacing
The SubcarrierSpacing IE determines the subcarrier spacing.
SubcarrierSpacing information element
-- ASN1START
-- TAG-SUBCARRIER-SPACING-START

-- The subcarrier spacing supported in NR. Restrictions applicable for certain frequencies, channels or signals are clarified 
-- in the fields that use this IE.
SubcarrierSpacing ::= 					ENUMERATED {kHz15, kHz30, kHz60, kHz120, kHz240, spare3, spare2, spare1}


-- TAG-SUBCARRIER-SPACING-STOP
-- ASN1STOP


–	TCI-State	
The TCI-State IE associates one or two DL reference signals with a corresponding quasi-colocation (QCL) type.
TCI-State information element
-- ASN1START
-- TAG-TCI-STATE-START

TCI-State ::= 				SEQUENCE {
	tci-StateId					TCI-StateId,
	qcl-Type1					QCL-Info,
	qcl-Type2					QCL-Info																					OPTIONAL,	-- Need R
	nrofPTRS-Ports				ENUMERATED {n1, n2}																			OPTIONAL,	-- Need R
	...
}

QCL-Info ::=				SEQUENCE {

	-- The carrier which the RS is located in. If the field is absent, it applies to the serving cell in which the TCI-State is configured
	cell						ServCellIndex																				OPTIONAL,	-- Need R

	-- The DL BWP which the RS is located in. 
	bwp-Id						BWP-Id			OPTIONAL, -- Cond CSI-RS-Indicated
	-- Cond NZP-CSI-RS-Indicated: mandatory if csi-rs or csi-RS-for-tracking is included, absent otherwise
	referenceSignal				CHOICE {
		csi-rs						NZP-CSI-RS-ResourceId,
		ssb							SSB-Index,
		-- A set of CSI-RS resources for tracking
		csi-RS-for-tracking			NZP-CSI-RS-ResourceSetId
	},
	qcl-Type					ENUMERATED {typeA, typeB, typeC, typeD},
	...
}

-- TAG-TCI-STATE-STOP
-- ASN1STOP

–	TCI-StateId
The IE TCI-StateId is used to identify one TCI-State configuration.
TCI-StateId information element
-- ASN1START
-- TAG-TCI-STATEID-START

TCI-StateId ::=				INTEGER (0..maxNrofTCI-States-1)

-- TAG-TCI-STATEID-STOP
-- ASN1STOP

–	TDD-UL-DL-Config
The TDD-UL-DL-Config IEs determines the Uplink/Downlink TDD configuration. There are both, UE- and cell specific IEs.
TDD-UL-DL-Config information element
-- ASN1START
-- TAG-TDD-UL-DL-CONFIG-START

TDD-UL-DL-ConfigCommon ::=			SEQUENCE {
	-- Reference SCS used to determine the time domain boundaries in the UL-DL pattern which must be common across all subcarrier specific
	-- virtual carriers, i.e., independent of the actual subcarrier spacing using for data transmission. 
	-- Only the values 15 or 30 kHz  (<6GHz), 60 or 120 kHz (>6GHz) are applicable.
	-- Corresponds to L1 parameter 'reference-SCS' (see 38.211, section FFS_Section)
	referenceSubcarrierSpacing			SubcarrierSpacing																	OPTIONAL,
	-- Periodicity of the DL-UL pattern. Corresponds to L1 parameter 'DL-UL-transmission-periodicity' (see 38.211, section FFS_Section)
	dl-UL-TransmissionPeriodicity		ENUMERATED {ms0p5, ms0p625, ms1, ms1p25, ms2, ms2p5, ms5, ms10}						OPTIONAL,

	-- Number of consecutive full DL slots at the beginning of each DL-UL pattern. 
	-- Corresponds to L1 parameter 'number-of-DL-slots' (see 38.211, Table 4.3.2-1)
	nrofDownlinkSlots					INTEGER (0..maxNrofSlots)																	OPTIONAL,

	-- Number of consecutive DL symbols in the beginning of the slot following the last full DL slot (as derived from nrofDownlinkSlots). 
	-- If the field is absent or released, there is no partial-downlink slot.
	-- Corresponds to L1 parameter 'number-of-DL-symbols-common' (see 38.211, section FFS_Section).
	nrofDownlinkSymbols					INTEGER (0..maxNrofSymbols-1)															OPTIONAL,	-- Need R
	
	-- Number of consecutive full UL slots at the end of each DL-UL pattern. 
	-- Corresponds to L1 parameter 'number-of-UL-slots' (see 38.211, Table 4.3.2-1)
	nrofUplinkSlots						INTEGER (0..maxNrofSlots)																	OPTIONAL,
	
	-- Number of consecutive UL symbols in the end of the slot preceding the first full UL slot (as derived from nrofUplinkSlots).
	-- If the field is absent or released, there is no partial-uplink slot.
	-- Corresponds to L1 parameter 'number-of-UL-symbols-common' (see 38.211, section FFS_Section)
	nrofUplinkSymbols					INTEGER (0..maxNrofSymbols-1)															OPTIONAL	-- Need R
}

TDD-UL-DL-ConfigDedicated ::=		SEQUENCE {
	-- The slotSpecificConfiguration allows overriding UL/DL allocations provided in tdd-UL-DL-configurationCommon. 
	-- FFS_ASN1: Consider making this an AddMod/Release list
	-- FFS_ASN1: Replace absolute numbers by variables... once RAN1 confirms. 
	-- FFS_CHECK: This list will grow very large if used for many slots.
	slotSpecificConfigurationsToAddModList		SEQUENCE (SIZE (1..maxNrofSlots)) OF TDD-UL-DL-SlotConfig							OPTIONAL, -- Need N
	slotSpecificConfigurationsToreleaseList		SEQUENCE (SIZE (1..maxNrofSlots)) OF TDD-UL-DL-SlotIndex						OPTIONAL -- Need N
}

TDD-UL-DL-SlotConfig ::=			SEQUENCE {
	-- Identifies a slot within a dl-UL-TransmissionPeriodicity (given in tdd-UL-DL-configurationCommon)
	slotIndex							TDD-UL-DL-SlotIndex,
		
	-- The direction (downlink or uplink) for the symbols in this slot. "allDownlink" indicates that all symbols in this slot are used
	-- for downlink; "allUplink" indicates that all symbols in this slot are used for uplink; "explicit" indicates explicitly how many symbols 
	-- in the beginning and end of this slot are allocated to downlink and uplink, respectively.
	symbols								CHOICE {
		allDownlink							NULL,
		allUplink							NULL,
		explicit							SEQUENCE {
			-- Number of consecutive DL symbols in the beginning of the slot identified by slotIndex.
			-- If the field is absent the UE assumes that there are no leading DL symbols.
			-- Corresponds to L1 parameter 'number-of-DL-symbols-dedicated' (see 38.211, section FFS_Section)
			nrofDownlinkSymbols					INTEGER (1..maxNrofSymbols-1)												OPTIONAL,	-- Need S
			
			-- Number of consecutive UL symbols in the end of the slot identified by slotIndex.
			-- If the field is absent the UE assumes that there are no trailing UL symbols.
			-- Corresponds to L1 parameter 'number-of-UL-symbols-dedicated' (see 38.211, section FFS_Section)
			nrofUplinkSymbols					INTEGER (1..maxNrofSymbols-1)												OPTIONAL	-- Need S
		}
	}
}

TDD-UL-DL-SlotIndex ::=				INTEGER (0..maxNrofSlots-1)

-- TAG-TDD-UL-DL-CONFIG-STOP
-- ASN1STOP

–	TimeToTrigger
The IE TimeToTrigger specifies the value range used for time to trigger parameter, which concerns the time during which specific criteria for the event needs to be met in order to trigger a measurement report. Value ms0 corresponds to 0 ms and behaviour as specified in 7.1.2 applies, ms40 corresponds to 40 ms, and so on.
TimeToTrigger information element
-- ASN1START

TimeToTrigger ::=					ENUMERATED {
										ms0, ms40, ms64, ms80, ms100, ms128, ms160, ms256,
										ms320, ms480, ms512, ms640, ms1024, ms1280, ms2560,
										ms5120}

-- ASN1STOP
Editor's Note:: Values should be checked.

–	ZP-CSI-RS-Resource
The IE ZP-CSI-RS-Resource is used to configure a Zero-Power (ZP) CSI-RS resource. Corresponds to L1 parameter 'ZP-CSI-RS-ResourceConfig' (see 38.214, section 5.1.4.2).
ZP-CSI-RS-Resource information element
-- ASN1START
-- TAG-ZP-CSI-RS-RESOURCE-START

ZP-CSI-RS-Resource ::=						SEQUENCE {
	-- ZP CSI-RS resource configuration ID
	-- Corresponds to L1 parameter 'ZP-CSI-RS-ResourceConfigId' (see 38.214, section 5.1.4.2)
	zp-CSI-RS-ResourceId						ZP-CSI-RS-ResourceId,
	-- OFDM symbol and subcarrier occupancy of the ZP-CSI-RS resource within a slot
	resourceMapping								CSI-RS-ResourceMapping,
	-- Periodicity and slot offset for periodic/semi-persistent ZP-CSI-RS
	-- Corresponds to L1 parameter 'ZP-CSI-RS-timeConfig' (see 38.214, section 5.1.4.2)
	periodicityAndOffset						CSI-ResourcePeriodicityAndOffset							OPTIONAL, --Cond PeriodicOrSemiPersistent

	...
}

ZP-CSI-RS-ResourceId ::=							INTEGER (0..maxNrofZP-CSI-RS-Resources-1)

-- TAG-ZP-CSI-RS-RESOURCE-STOP
-- ASN1STOP

–	ZP-CSI-RS-ResourceSet
The IE ZP-CSI-RS-ResourceSet refers to a set of ZP-CSI-RS-Resources using their ZP-CSI-RS-ResourceIds. It corresponds to the L1 parameter 'ZP-CSI-RS-ResourceSetConfigList'.
ZP-CSI-RS-ResourceSet information element
-- ASN1START
-- TAG-ZP-CSI-RS-RESOURCESET-START

ZP-CSI-RS-ResourceSet ::= 						SEQUENCE {
	zp-CSI-RS-ResourceSetId							ZP-CSI-RS-ResourceSetId,
	-- The list of ZP-CSI-RS-ResourceId identifying the ZP-CSI-RS-Resource elements belonging to this set. 
	zp-CSI-RS-ResourceIdList							SEQUENCE (SIZE(1..maxNrofZP-CSI-RS-ResourcesPerSet)) OF ZP-CSI-RS-ResourceId,
	-- Time domain behavior of ZP-CSI-RS resource configuration. 
	-- Corresponds to L1 parameter 'ZP-CSI-RS-ResourceConfigType' (see 38.214, section 5.1.4.2)
	resourceType									ENUMERATED {aperiodic, semiPersistent, periodic},
	...
}

-- TAG-ZP-CSI-RS-RESOURCESET-STOP
-- ASN1STOP 

–	ZP-CSI-RS-ResourceSetId
The IE ZP-CSI-RS-ResourceSetId identifies a ZP-CSI-RS-ResourceSet.
ZP-CSI-RS-ResourceSetId information element
-- ASN1START
-- TAG-ZP-CSI-RS-RESOURCESETID-START

ZP-CSI-RS-ResourceSetId ::= 					INTEGER (0..maxNrofZP-CSI-RS-ResourceSets-1)

-- TAG-ZP-CSI-RS-RESOURCESETID-STOP
-- ASN1STOP 

6.3.3	UE capability information elements
–	BandCombinationList
The IE BandCombinationList contains a list of NR CA and/or MR-DC band combinations (also including DL only or UL only band).
BandCombinationList information element
-- ASN1START
-- TAG-BANDCOMBINATIONLIST-START

BandCombinationList ::=	SEQUENCE (SIZE (1..maxBandComb)) OF BandCombination

BandCombination ::= SEQUENCE {
	bandAndDL-ParametersList			BandAndDL-ParametersList,
	bandCombinationsUL					BIT STRING (SIZE (1.. maxBandComb)),
	bandCombinationParametersList		SEQUENCE (SIZE (1..maxBandComb)) OF BandCombinationParameters 	OPTIONAL
}

BandAndDL-ParametersList ::= SEQUENCE (SIZE (1..maxSimultaneousBands)) OF BandAndDL-Parameters

BandAndDL-Parameters ::= CHOICE {
	bandAndDL-ParametersEUTRA	BandAndDL-ParametersEUTRA,
	bandAndDL-ParametersNR		BandAndDL-ParametersNR
}
BandCombinationParameters ::= SEQUENCE {
	ca-ParametersNR					CA-ParametersNR			OPTIONAL,
	mrdc-Parameters					MRDC-Parameters			OPTIONAL
}

CA-ParametersNR ::=	SEQUENCE {
	multipleTimingAdvances		ENUMERATED {supported}				OPTIONAL,
-- R4 2-5: Simultaneous reception and transmission for inter band CA (TDD-TDD or TDD-FDD)
	simultaneousRxTxInterBandCA			ENUMERATED {supported}		OPTIONAL,
-- BCS related to R4 2-1 and Updated CA BW class in R4-1803374
	supportedBandwidthCombinationSet	BIT STRING (SIZE (1..32))	OPTIONAL
}

MRDC-Parameters ::=	SEQUENCE {
	singleUL-Transmission		ENUMERATED {supported}		OPTIONAL,
-- R4 1-10: Support of EN-DC with LTE-NR coexistence in UL sharing from UE perspective
	ul-SharingEUTRA-NR					ENUMERATED {supported}		OPTIONAL,
-- R4 1-11: Switching time between LTE UL and NR UL for EN-DC with LTE-NR coexistence in UL sharing from UE perspective
	ul-SwitchingTimeEUTRA-NR			ENUMERATED {type1, type2}	OPTIONAL,
-- R4 2-4: Simultaneous reception and transmission for inter-band EN-DC (TDD-TDD or TDD-FDD)
	simultaneousRxTxInterBandENDC		ENUMERATED {supported}		OPTIONAL,
-- R4 2-6: Asynchronous FDD-FDD intra-band EN-DC
	asyncIntraBandENDC					ENUMERATED {supported}		OPTIONAL,
	basebandProcesingCombinationMRDC 	BasebandProcessingCombinationMRDC
}

BandAndDL-ParametersEUTRA ::= SEQUENCE {
	bandEUTRA					FreqBandIndicatorEUTRA,
	ca-BandwidthClassDL-EUTRA	CA-BandwidthClassEUTRA		OPTIONAL,
	intraBandContiguousCC-InfoDL-EUTRA-List		SEQUENCE (SIZE (1.. maxNrofServingCellsEUTRA)) OF IntraBandContiguousCC-InfoDL-EUTRA		OPTIONAL
}

BandAndDL-ParametersNR ::= SEQUENCE {
	bandNR						FreqBandIndicatorNR,
	ca-BandwidthClassDL			CA-BandwidthClassNR			OPTIONAL,
-- R4 2-3: Non-contiguous intra-band CA frequency separation class for FR2 as in the RAN4 LS R4-1803363
	intraBandFreqSeparationDL	FreqSeparationClass					OPTIONAL,
	intraBandContiguousCC-InfoDL-List		SEQUENCE (SIZE (1.. maxNrofServingCells)) OF IntraBandContiguousCC-InfoDL		OPTIONAL
}

IntraBandContiguousCC-InfoDL ::=	SEQUENCE {
-- Related to RAN4 LS R2-1804078
	maxNumberMIMO-LayersPDSCH			MIMO-LayersDL					OPTIONAL
}

IntraBandContiguousCC-InfoDL-EUTRA ::=	SEQUENCE {
-- Related to RAN4 LS R2-1804078
	mimo-CapabilityDL					ENUMERATED {twoLayers, fourLayers, eightLayers}					OPTIONAL
}

-- TAG-BANDCOMBINATIONLIST-STOP
-- ASN1STOP

–	BandCombinationParametersUL-List
The IE BandCombinationParametersUL-List is used to contain list of NR and/or E-UTRA frequency UL band parameters combination for the supported NR CA and/or MR-DC band combinations included in supportedBandCombination in RF-Parameters and/or RF-Parameters-MRDC. 
-- ASN1START
-- TAG-BANDCOMBINATIONPARAMETERSULLIST-START

BandCombinationParametersUL-List ::= SEQUENCE (SIZE (1..maxBandComb)) OF BandCombinationParametersUL

BandCombinationParametersUL ::= SEQUENCE (SIZE (1.. maxSimultaneousBands)) OF BandParametersUL

BandParametersUL ::= CHOICE {
	bandParametersUL-EUTRA		BandParametersUL-EUTRA,
	bandParametersUL-NR			BandParametersUL-NR
}

BandParametersUL-EUTRA ::= SEQUENCE {
	ca-BandwidthClassUL-EUTRA	CA-BandwidthClassEUTRA		OPTIONAL,
	intraBandContiguousCC-InfoUL-EUTRA-List		SEQUENCE (SIZE (1.. maxNrofServingCellsEUTRA)) OF IntraBandContiguousCC-InfoUL-EUTRA		OPTIONAL
}

BandParametersUL-NR ::= SEQUENCE {
	ca-BandwidthClassUL			CA-BandwidthClassNR 				OPTIONAL,
-- R4 2-3: Non-contiguous intra-band CA frequency separation class for FR2 as in the RAN4 LS R4-1803363
	intraBandFreqSeparationUL	FreqSeparationClass					OPTIONAL,
	intraBandContiguousCC-InfoUL-List		SEQUENCE (SIZE (1.. maxNrofServingCells)) OF IntraBandContiguousCC-InfoUL			OPTIONAL
}

IntraBandContiguousCC-InfoUL ::=	SEQUENCE {
-- Related to RAN4 LS R2-1804078
	maxNumberMIMO-LayersCB-PUSCH		MIMO-LayersUL					OPTIONAL,
	maxNumberMIMO-LayersNonCB-PUSCH		MIMO-LayersUL					OPTIONAL
}

IntraBandContiguousCC-InfoUL-EUTRA ::=	SEQUENCE {
-- Related to RAN4 LS R2-1804078
	mimo-CapabilityUL						ENUMERATED {twoLayers, fourLayers}					OPTIONAL
}

-- TAG-BANDCOMBINATIONPARAMETERSULLIST-STOP
-- ASN1STOP

–	BasebandCombinationParametersUL-List
-- ASN1START
-- TAG-BASEBANDCOMBINATIONPARAMETERSULLIST-START

BasebandCombinationParametersUL-List ::= SEQUENCE (SIZE (1..maxBasebandProcComb)) OF BasebandCombinationParametersUL

BasebandCombinationParametersUL ::= SEQUENCE (SIZE (1..maxSimultaneousBands)) OF BasebandParametersPerBandUL

BasebandParametersPerBandUL ::= SEQUENCE {
	ca-BandwidthClassUL				CA-BandwidthClassNR,
	freqRange						ENUMERATED {fr1, fr2},
	basebandParametersPerCC-UL		SEQUENCE (SIZE (1.. maxNrofServingCells)) OF BasebandParametersPerCC-UL
}

BasebandParametersPerCC-UL ::= SEQUENCE {
-- R4 2-2: Simultaneous reception or transmission with same or  different numerologies in CA
-- It is expressed by the combination of SCS whether simultaneous RxTx is supported or not.
	supportedSubcarrierSpacingUL				SubcarrierSpacing,
-- Accoding to the RAN4 LS R4-1803563, maximum Bandwidth supported per CC is added in BPC
-- FFS how to work together with BCS and max BW for each CC to be defined for each CA band combination in the RAN4 spec.
	supportedBandwidthUL		CHOICE {
		fr1							ENUMERATED {mhz5, mhz10, mhz15, mhz20, mhz25, mhz30, mhz40, mhz50, mhz60, mhz80, mhz100},
		fr2							ENUMERATED {mhz50, mhz100, mhz200, mhz400}
	},
	-- R2-1800012. To be confirmed by RAN1
	scalingFactor0dot75				ENUMERATED {supported}		OPTIONAL,
-- R1 2-14: Codebook based PUSCH MIMO transmission. Absence of this field implies that CB-based PUSCH is not supported.
	maxNumberMIMO-LayersCB-PUSCH		MIMO-LayersUL					OPTIONAL,
-- R1 2-15: Non-codebook based PUSCH MIMO transmission. Absence of this field implies that Non-CB-based PUSCH is not supported.
	maxNumberMIMO-LayersNonCB-PUSCH		MIMO-LayersUL					OPTIONAL,
-- Accoding to the RAN4 LS R4-1803563, modulation order is added per CC granularity in BPC
-- FFS whether all of modulation order specified in the spec need to be signalled.
-- FFS how to address the requirements agreed by RAN4, e.g. mandaotry w/o capabiltiy for 64QAM. mandaotry with capabiltiy for DL 256QAM in FR1.
	supportedModulationOrderUL					ModulationOrder					OPTIONAL,
-- R1 2-53: SRS resources
	supportedSRS-Resources			SRS-Resources								OPTIONAL,
-- R1 2-55: SRS Tx switch
	srs-TxSwitch					SRS-TxSwitch								OPTIONAL,
-- R1 2-57: Support low latency CSI feedback
	lowLatencyCSI-Feedback				ENUMERATED {supported}					OPTIONAL,
-- R1 5-12 & 5-12a: Up to 2/7 PUSCHs per slot for different TBs
	pusch-DifferentTB-PerSlot		SEQUENCE {
		scs-15kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-30kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-60kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-120kHz						ENUMERATED {upto2, upto7}					OPTIONAL
	}																			OPTIONAL,
-- R1 6-7: Two PUCCH group
	twoPUCCH-Group					ENUMERATED {supported}						OPTIONAL,
-- R1 6-8: Different numerology across PUCCH groups
	diffNumerologyAcrossPUCCH-Group	ENUMERATED {supported}						OPTIONAL,
-- R1 6-9: Different numerologies across carriers within the same PUCCH group
	diffNumerologyWithinPUCCH-Group	ENUMERATED {supported}						OPTIONAL,
-- R1 6-10: Cross carrier scheduling
	crossCarrierScheduling			ENUMERATED {supported}						OPTIONAL,
-- R1 6-11: Number of supported TAGs
	supportedNumberTAG				ENUMERATED {n2, n3, n4}						OPTIONAL,
-- R1 6-18: Supplemental uplink with dynamic switch
	dynamicSwitchSUL				ENUMERATED {supported}						OPTIONAL,
-- R1 6-19: Simultaneous transmission of SRS on an SUL/non-SUL carrier and PUSCH/PUCCH/SRS/PRACH on the other UL carrier in the same cell
-- Details on the channel/signal combination are to be described in TS 38.306
	simultaneousTxSUL-NonSUL		ENUMERATED {supported}						OPTIONAL,
-- R1 6-22: UL search space sharing for CA
	searchSpaceSharingCA-UL			ENUMERATED {supported}						OPTIONAL
}

-- TAG-BASEBANDCOMBINATIONPARAMETERSULLIST-STOP
-- ASN1STOP

–	BasebandProcessingCombinationMRDC
-- ASN1START
-- TAG-BASEBANDPROCESSINGCOMBINATIONMRDC-START

BasebandProcessingCombinationMRDC ::= SEQUENCE (SIZE (1..maxBasebandProcComb)) OF BasebandProcessingCombinationLink

BasebandProcessingCombinationLink ::= SEQUENCE {
	basebandProcessingCombinationIndexMN		BasebandProcessingCombinationIndex, 
	basebandProcessingCombinationLinkedIndexSN	SEQUENCE (SIZE (1..maxBasebandProcComb)) OF BasebandProcessingCombinationIndex
}

BasebandProcessingCombinationIndex ::= INTEGER (1..maxBasebandProcComb)

-- TAG-BASEBANDPROCESSINGCOMBINATIONMRDC-STOP
-- ASN1STOP

–	CA-BandwidthClassNR
-- ASN1START
-- TAG-CA-BANDWIDTHCLASSNR-START

-- Updated based on R4-1803374
CA-BandwidthClassNR ::= ENUMERATED {a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, ...}

-- TAG-CA-BANDWIDTHCLASSNR-STOP
-- ASN1STOP

–	CA-BandwidthClassEUTRA
-- ASN1START
-- TAG-CA-BANDWIDTHCLASSEUTRA-START

CA-BandwidthClassEUTRA ::=	ENUMERATED {a, b, c, d, e, f, ...}

-- TAG-CA-BANDWIDTHCLASSEUTRA-STOP
-- ASN1STOP

–	FreqBandIndicatorEUTRA
-- ASN1START
-- TAG-FREQ-BAND-INDICATOR-EUTRA-START

FreqBandIndicatorEUTRA ::=	INTEGER (1..maxBandsEUTRA)

-- TAG-FREQ-BAND-INDICATOR-EUTRA-STOP
-- ASN1STOP

–	FreqBandList
The IE FreqBandList is used to contain list of NR and/or E-UTRA frequency bands for which the UE is requested to provide its supported NR CA and/or MR-DC band combinations (i.e. within the UE capability containers for NR and MR-DC, as requested by E-UTRA). 
FreqBandList information element
-- ASN1START
-- TAG-FREQBANDLIST-START

FreqBandList ::=	SEQUENCE (SIZE (1..maxBandsMRDC)) OF FreqBandInformation

FreqBandInformation ::= CHOICE {
	bandEUTRA				FreqBandIndicatorEUTRA,
	bandNR					FreqBandIndicatorNR
}

-- TAG-FREQBANDLIST-STOP
-- ASN1STOP

–	FreqSeparationClass
The IE FreqSeparationClass is used for an intra-band non-contiguous CA band combination to indicate frequency separation between lower edge of lowest CC and upper edge of highest CC in a frequency band.
FreqSeparationClass information element
-- ASN1START
-- TAG-FREQSEPARATIONCLASS-START

FreqSeparationClass ::=	ENUMERATED {c1, c2, c3, ...}

-- TAG-FREQSEPARATIONCLASS-STOP
-- ASN1STOP

–	MIMO-Layers
-- ASN1START
-- TAG-MIMO-LAYERS-START

MIMO-LayersDL ::=	ENUMERATED {twoLayers, fourLayers, eightLayers}

MIMO-LayersUL ::=	ENUMERATED {oneLayer, twoLayers, fourLayers}

-- TAG-MIMO-LAYERS-STOP
-- ASN1STOP

–	ModulationOrder
-- ASN1START
-- TAG-MODULATION-ORDER-START

ModulationOrder ::=	ENUMERATED {bpsk-halfpi, bpsk, qpsk, qam16, qam64, qam256}

-- TAG-MODULATION-ORDER-STOP
-- ASN1STOP

–	RAT-Type
The IE RAT-Type is used to indicate the radio access technology (RAT), including NR, of the requested/transferred UE capabilities.
RAT-Type information element
-- ASN1START
-- TAG-RAT-TYPE-START

RAT-Type ::= ENUMERATED {nr, eutra-nr, spare2, spare1, ...}

-- TAG-RAT-TYPE-STOP
-- ASN1STOP

–	SupportedBasebandProcessingCombination
-- ASN1START
-- TAG-SUPPORTEDBASEBANDPROCESSINGCOMBINATION-START

SupportedBasebandProcessingCombination ::= SEQUENCE (SIZE (1..maxBasebandProcComb)) OF BasebandProcessingCombination

BasebandProcessingCombination ::= SEQUENCE {
	basebandParametersDL			SEQUENCE (SIZE (1..maxSimultaneousBands)) OF BasebandParametersPerBandDL,
	basebandParametersUL				BIT STRING (SIZE (1..maxBasebandProcComb))}

BasebandParametersPerBandDL ::= SEQUENCE {
	ca-BandwidthClassDL			CA-BandwidthClassNR,
	freqRange					ENUMERATED {fr1, fr2},
	basebandParametersPerCC-DL		SEQUENCE (SIZE (1.. maxNrofServingCells)) OF BasebandParametersPerCC-DL
}

BasebandParametersPerCC-DL ::= SEQUENCE {
-- R4 2-2: Simultaneous reception or transmission with same or  different numerologies in CA
-- It is expressed by the combination of SCS whether simultaneous RxTx is supported or not.
	supportedSubcarrierSpacingDL				SubcarrierSpacing,
-- Accoding to the RAN4 LS R4-1803563, maximum Bandwidth supported per CC is added in BPC
-- FFS how to work together with BCS and max BW for each CC to be defined for each CA band combination in the RAN4 spec.
	supportedBandwidthDL		CHOICE {
		fr1							ENUMERATED {mhz5, mhz10, mhz15, mhz20, mhz25, mhz30, mhz40, mhz50, mhz60, mhz80, mhz100},
		fr2							ENUMERATED {mhz50, mhz100, mhz200, mhz400}
	},
-- R2-1800012. To be confirmed by RAN1
	scalingFactor0dot75			ENUMERATED {supported}		OPTIONAL,
-- R1 2-2: PDSCH beam switching
	timeDurationForQCL					SEQUENCE {
		scs-60kHz							ENUMERATED {s7, s14, s28}				OPTIONAL,
		sch-120kHz							ENUMERATED {s14, s28}					OPTIONAL
	}																			OPTIONAL,
-- R1 1-10: Support of SCell without SS/PBCH block
	scellWithoutSSB					ENUMERATED {supported}						OPTIONAL,
-- R1 1-11: Support of CSI-RS RRM measurement for SCell without SS/PBCH block
	csi-RS-MeasSCellWithoutSSB		ENUMERATED {supported}						OPTIONAL,
-- R1 2-3: PDSCH MIMO layers. Absence of this field implies support of one layer.
	maxNumberMIMO-LayersPDSCH			MIMO-LayersDL							OPTIONAL,
-- Accoding to the RAN4 LS R4-1803563, modulation order is added per CC granularity in BPC
-- FFS whether all of modulation order specified in the spec need to be signalled.
-- FFS how to address the requirements agreed by RAN4, e.g. mandaotry w/o capabiltiy for 64QAM. mandaotry with capabiltiy for DL 256QAM in FR1.
	supportedModulationOrderDL					ModulationOrder					OPTIONAL,
-- R1 2-15a: Association between CSI-RS and SRS
	srs-AssocCSI-RS					ENUMERATED {supported}						OPTIONAL,
-- R1 3-1a: For type 1 CSS with dedicated RRC configuration and for type 3 CSS, UE specific SS, CORESET resource allocation of 6RB bit-map and duration 3 OFDM symbols for FR2
	type1-3-CSS						ENUMERATED {supported}						OPTIONAL,
-- R1 3-5 & 3-5a: For type 1 with dedicated RRC configuration, type 3, and UE-SS,, monitoring occasion can be any OFDM symbol(s) of a slot for Case 2 (with a DCI gap)
	pdcchMonitoringAnyOccasions		ENUMERATED {withoutDCI-gap, withDCI-gap}	OPTIONAL,
-- R1 5-1a: UE specific RRC configure UL/DL assignment
	ue-SpecificUL-DL-Assignment		ENUMERATED {supported}						OPTIONAL,
-- R1 5-11 & 5-11a: Up to 2/7 unicast PDSCHs per slot for different TBs
	pdsch-DifferentTB-PerSlot		SEQUENCE {
		scs-15kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-30kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-60kHz						ENUMERATED {upto2, upto7}					OPTIONAL,
		scs-120kHz						ENUMERATED {upto2, upto7}					OPTIONAL
	}																			OPTIONAL,
-- R1 6-10: Cross carrier scheduling
	crossCarrierScheduling			ENUMERATED {supported}						OPTIONAL,
-- R1 6-21: DL search space sharing for CA
	searchSpaceSharingCA-DL			ENUMERATED {supported}						OPTIONAL
}

-- TAG-SUPPORTEDBASEBANDPROCESSINGCOMBINATION-STOP
-- ASN1STOP

–	UE-CapabilityRAT-ContainerList
The IE UE-CapabilityRAT-ContainerList contains a list of containers, one for each RAT for which UE capabilities are transferred, if any.
UE-CapabilityRAT-ContainerList information element
-- ASN1START
-- TAG-UE-CAPABILITY-RAT-CONTAINER-LIST-START

UE-CapabilityRAT-ContainerList ::=SEQUENCE (SIZE (0.. maxRAT-CapabilityContainers)) OF UE-CapabilityRAT-Container

UE-CapabilityRAT-Container ::= SEQUENCE {
	rat-Type							RAT-Type,
	ue-CapabilityRAT-Container			OCTET STRING
}

-- TAG-UE-CAPABILITY-RAT-CONTAINER-LIST-STOP
-- ASN1STOP

UE-CapabilityRAT-ContainerList field descriptionsue-CapabilityRAT-Container
Container for the UE capabilities of the indicated RAT. The encoding is defined in the specification of each RAT:
For NR: the encoding of UE capabilities is defined in UE-NR-Capability.
For EUTRA-NR: the encoding of UE capabilities is defined in UE-MRDC-Capability
–	UE-MRDC-Capability
The IE UE-MRDC-Capability is used to convey the UE Radio Access Capability Parameters for MR-DC, see TS 38.306 [yy].
UE-MRDC-Capability information element
-- ASN1START
-- TAG-UE-MRDC-CAPABILITY-START

UE-MRDC-Capability ::=	SEQUENCE {
	measParametersMRDC					MeasParametersMRDC					OPTIONAL,
	rf-ParametersMRDC					RF-ParametersMRDC,
	phy-ParametersMRDC					Phy-ParametersMRDC					OPTIONAL,
	generalParametersMRDC				GeneralParametersMRDC-XDD-Diff		OPTIONAL,
	fdd-Add-UE-MRDC-Capabilities		UE-MRDC-CapabilityAddXDD-Mode		OPTIONAL,
	tdd-Add-UE-MRDC-Capabilities		UE-MRDC-CapabilityAddXDD-Mode		OPTIONAL,
	fr1-Add-UE-MRDC-Capabilities		UE-MRDC-CapabilityAddFRX-Mode		OPTIONAL,
	fr2-Add-UE-MRDC-Capabilities		UE-MRDC-CapabilityAddFRX-Mode		OPTIONAL,
	lateNonCriticalExtension			OCTET STRING						OPTIONAL,
	nonCriticalExtension				SEQUENCE {}							OPTIONAL
}

UE-MRDC-CapabilityAddXDD-Mode ::=	SEQUENCE {
	phy-ParametersMRDC-XDD-Diff		Phy-ParametersMRDC-XDD-Diff		OPTIONAL,
	measParametersMRDC-XDD-Diff		MeasParametersMRDC-XDD-Diff		OPTIONAL,
	generalParametersMRDC-XDD-Diff		GeneralParametersMRDC-XDD-Diff		OPTIONAL
}

UE-MRDC-CapabilityAddFRX-Mode ::=	SEQUENCE {
	phy-ParametersMRDC-FRX-Diff		Phy-ParametersMRDC-FRX-Diff		OPTIONAL,
	measParametersMRDC-FRX-Diff		MeasParametersMRDC-FRX-Diff
}

RF-ParametersMRDC ::= SEQUENCE {
	supportedBandCombination	BandCombinationList,
	bandCombinationParametersUL-List	BandCombinationParametersUL-List
}

Phy-ParametersMRDC ::= SEQUENCE {
	phy-ParametersMRDC-XDD-Diff		Phy-ParametersMRDC-XDD-Diff		OPTIONAL,
	phy-ParametersMRDC-FRX-Diff		Phy-ParametersMRDC-FRX-Diff		OPTIONAL
}

Phy-ParametersMRDC-XDD-Diff ::=	SEQUENCE {
-- R1 8-1: Dynamic power sharing for LTE-NR DC
	dynamicPowerSharing					ENUMERATED {supported}				OPTIONAL,
-- R1 6-13 & 8-2: Case 1 Single Tx UL LTE-NR DC
	tdm-Pattern							ENUMERATED {supported}				OPTIONAL
}
Phy-ParametersMRDC-FRX-Diff ::=	SEQUENCE {
-- R1 8-1: Dynamic power sharing for LTE-NR DC
	dynamicPowerSharing					ENUMERATED {supported}				OPTIONAL,
-- R1 6-13 & 8-2: Case 1 Single Tx UL LTE-NR DC
	tdm-Pattern							ENUMERATED {supported}				OPTIONAL
}

MeasParametersMRDC ::= SEQUENCE {
	measParametersMRDC-Common		MeasParametersMRDC-Common,
	measParametersMRDC-XDD-Diff		MeasParametersMRDC-XDD-Diff				OPTIONAL,
	measParametersMRDC-FRX-Diff		MeasParametersMRDC-FRX-Diff
}

MeasParametersMRDC-Common ::=	SEQUENCE {
-- R4 3-1: Independent measurement gap configurations for FR1 and FR2
	independentGapConfig			ENUMERATED {supported}	OPTIONAL 
}

MeasParametersMRDC-XDD-Diff ::=	SEQUENCE {
	sftd-MeasPSCell							ENUMERATED {supported}		OPTIONAL,
	sftd-MeasNR-Cell						ENUMERATED {supported}		OPTIONAL
}

MeasParametersMRDC-FRX-Diff ::=	SEQUENCE {
-- R4 3-2: Simultaneous reception of data and SS block with different numerologies when UE conducts the serving cell measurement or intra-frequency measurement
	simultaneousRxDataSSB-DiffNumerology	ENUMERATED {supported}		OPTIONAL
}

GeneralParametersMRDC-XDD-Diff ::= SEQUENCE {
	splitSRB-WithOneUL-Path				ENUMERATED {supported}		OPTIONAL,
	splitDRB-withUL-Both-MCG-SCG		ENUMERATED {supported}		OPTIONAL,
	srb3									ENUMERATED {supported}		OPTIONAL
}

-- TAG-UE-MRDC-CAPABILITY-STOP
-- ASN1STOP

–	UE-NR-Capability
The IE UE-NR-Capability is used to convey the NR UE Radio Access Capability Parameters, see TS 38.306 [yy].
UE-NR-Capability information element
-- ASN1START
-- TAG-UE-NR-CAPABILITY-START

UE-NR-Capability ::= SEQUENCE {
	pdcp-Parameters					PDCP-Parameters, 
	rlc-Parameters					RLC-Parameters						OPTIONAL,						
	mac-Parameters					MAC-Parameters						OPTIONAL,						 
	phy-Parameters					Phy-Parameters,
	rf-Parameters					RF-Parameters,
	measParameters					MeasParameters						OPTIONAL,
	fdd-Add-UE-NR-Capabilities		UE-NR-CapabilityAddXDD-Mode			OPTIONAL,
	tdd-Add-UE-NR-Capabilities		UE-NR-CapabilityAddXDD-Mode			OPTIONAL,
	fr1-Add-UE-NR-Capabilities		UE-NR-CapabilityAddFRX-Mode			OPTIONAL,
	fr2-Add-UE-NR-Capabilities		UE-NR-CapabilityAddFRX-Mode			OPTIONAL,
	lateNonCriticalExtension		OCTET STRING						OPTIONAL,
	nonCriticalExtension			SEQUENCE {}							OPTIONAL
}

UE-NR-CapabilityAddXDD-Mode ::=	SEQUENCE {
	phy-ParametersXDD-Diff			Phy-ParametersXDD-Diff			OPTIONAL,
	mac-ParametersXDD-Diff			MAC-ParametersXDD-Diff			OPTIONAL,
	measParametersXDD-Diff			MeasParametersXDD-Diff			OPTIONAL
}

UE-NR-CapabilityAddFRX-Mode ::=	SEQUENCE {
	phy-ParametersFRX-Diff			Phy-ParametersFRX-Diff			OPTIONAL,
	measParametersFRX-Diff			MeasParametersFRX-Diff			OPTIONAL
}

Phy-Parameters ::=	SEQUENCE {
	phy-ParametersCommon			Phy-ParametersCommon				OPTIONAL,
	phy-ParametersXDD-Diff			Phy-ParametersXDD-Diff				OPTIONAL,
	phy-ParametersFRX-Diff			Phy-ParametersFRX-Diff				OPTIONAL,
	phy-ParametersFR1				Phy-ParametersFR1					OPTIONAL,
	phy-ParametersFR2				Phy-ParametersFR2					OPTIONAL,
	supportedBasebandProcessingCombination		SupportedBasebandProcessingCombination,
	basebandCombinationParametersUL-List		BasebandCombinationParametersUL-List
}

Phy-ParametersCommon ::=	SEQUENCE {
-- R1 1-9: CSI-RS based CFRA for HO
	csi-RS-CFRA-ForHO					ENUMERATED {supported}						OPTIONAL,
-- R1 2-11: Downlink dynamic PRB bundling (DL)
	dynamicPRB-BundlingDL				ENUMERATED {supported}						OPTIONAL,
-- R1 2-32a: Semi-persistent CSI report on PUCCH
	sp-CSI-ReportPUCCH					ENUMERATED {supported}						OPTIONAL,
-- R1 2-32b: Semi-persistent CSI report on PUSCH
	sp-CSI-ReportPUSCH					ENUMERATED {supported}						OPTIONAL,
-- R1 2-34: NZP-CSI-RS  based interference measurement
	nzp-CSI-RS-IntefMgmt				ENUMERATED {supported}						OPTIONAL,
-- R1 2-42: Support Type II SP-CSI feedback on long PUCCH
	type2-SP-CSI-Feedback-LongPUCCH		ENUMERATED {supported}						OPTIONAL,
-- R1 3-3: More than one CORESET per BWP (in addition to CORESET #0)
	multipleCORESET						ENUMERATED {supported}						OPTIONAL,
-- R1 3-6: Dynamic SFI monitoring and dynamic UL/DL determination
	dynamicSFI							ENUMERATED {supported}						OPTIONAL,
-- R1 3-7: Precoder-granularity of CORESET size
	precoderGranularityCORESET			ENUMERATED {supported}						OPTIONAL,
-- R1 4-10: Dynamic HARQ-ACK codebook
	dynamicHARQ-ACK-Codebook			ENUMERATED {supported}						OPTIONAL,
-- R1 4-11: Semi-static HARQ-ACK codebook
	semiStaticHARQ-ACK-Codebook			ENUMERATED {supported}						OPTIONAL,
-- R1 4-12: HARQ-ACK spatial bundling for PUCCH or PUSCH per PUCCH group
	spatialBundlingHARQ-ACK				ENUMERATED {supported}						OPTIONAL,
-- R1 4-21: Dynamic beta-offset configuration and indication for HARQ-ACK and/or CSI
	dynamicBetaOffsetInd-HARQ-ACK-CSI	ENUMERATED {supported}						OPTIONAL,
-- R1 4-23: Repetitions for PUCCH format 1, 3,and 4 over multiple slots with K = 1, 2, 4, 8
	pucch-Repetition-F1-3-4				ENUMERATED {supported}						OPTIONAL,
-- R1 5-2: RA type 0 for PUSCH
	ra-Type0-PUSCH						ENUMERATED {supported}						OPTIONAL,
-- R1 5-3: Dynamic switching between RA type 0 and RA type 1 for PDSCH
	dynamicSwitchRA-Type0-1-PDSCH		ENUMERATED {supported}						OPTIONAL,
-- R1 5-4: Dynamic switching between RA type 0 andRA type 1 for PUSCH
	dynamicSwitchRA-Type0-1-PUSCH		ENUMERATED {supported}						OPTIONAL,
-- R1 5-6: PDSCH mapping type A with less than 7 OFDM symbols
	pdsch-MappingTypeA					ENUMERATED {supported}						OPTIONAL,
-- R1 5-6a: PDSCH mapping type B
	pdsch-MappingTypeB					ENUMERATED {supported}						OPTIONAL,
-- R1 5-7: Interleaving for VRB-to-PRB mapping for PDSCH
	interleavingVRB-ToPRB-PDSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 5-8: Interleaving for VRB-to-PRB mapping for PUSCH
	interleavingVRB-ToPRB-PUSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 5-10: Inter-slot frequency hopping for PUSCH
	interSlotFreqHopping-PUSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 5-13: Type 1 configured PUSCH repetitions within a slot
	type1-PUSCH-RepetitionOneSlot		ENUMERATED {supported}						OPTIONAL,
-- R1 5-14: Type 1 configured PUSCH repetitions over multiple slots
	type1-PUSCH-RepetitionMultiSlots	ENUMERATED {supported}						OPTIONAL,
-- R1 5-15: Type 2 configured PUSCH repetitions within a slot
	type2-PUSCH-RepetitionOneSlot		ENUMERATED {supported}						OPTIONAL,
-- R1 5-16: Type 2 configured PUSCH repetitions over multiple slots
	type2-PUSCH-RepetitionMultiSlots	ENUMERATED {supported}						OPTIONAL,
-- R1 5-17: PUSCH repetitions over multiple slots
	pusch-RepetitionMultiSlots			ENUMERATED {supported}						OPTIONAL,
-- R1 5-17a: PDSCH repetitions over multiple slots
	pdsch-RepetitionMultiSlots			ENUMERATED {supported}						OPTIONAL,
-- R1 5-18: DL SPS
	downlinkSPS							ENUMERATED {supported}						OPTIONAL,
-- R1 5-19: Type 1 Configured UL grant
	configuredUL-GrantType1				ENUMERATED {supported}						OPTIONAL,
-- R1 5-20: Type 2 Configured UL grant
	configuredUL-GrantType2				ENUMERATED {supported}						OPTIONAL,
-- R1 5-21: Pre-emption indication for DL
	pre-EmptIndication-DL				ENUMERATED {supported}						OPTIONAL,
-- R1 5-22 & 5-25: CBG-based re-transmission for DL/UL using CBGTI
	cbg-TransIndication					BIT STRING (SIZE (2))						OPTIONAL,
-- R1 5-23: CBGFI for CBG-based re-transmission for DL
	cbg-FlushIndication-DL				ENUMERATED {supported}						OPTIONAL,
-- R1 5-24: Dynamic HARQ-ACK codebook using sub-codebooks for CBG-based re-transmission for DL
	dynamicHARQ-ACK-CodeB-CBG-Retx-DL	ENUMERATED {supported}						OPTIONAL,
-- R1 5-26: Semi-static rate-matching resource set configuration for DL
	rateMatchingResrcSetSemi-Static		ENUMERATED {supported}						OPTIONAL,
-- R1 5-27: Dynamic rate-matching resource set configuration for DL
	rateMatchingResrcSetDynamic			ENUMERATED {supported}						OPTIONAL,
-- R1 5-28: Rate-matching around LTE CRS
	rateMatchingLTE-CRS					ENUMERATED {supported}						OPTIONAL,
-- R4 1-8: BWP switching delay
	bwp-SwitchingDelay					ENUMERATED {type1, type2}					OPTIONAL
}

Phy-ParametersXDD-Diff ::=	SEQUENCE {
-- R1 4-2: 2 PUCCH of format 0 or 2 in consecutive symbols
	twoPUCCH-F0-2-ConsecSymbols			ENUMERATED {supported}						OPTIONAL,
-- R1 8-7: UL power control with 2 PUSCH closed loops
	twoDifferentTPC-Loop-PUSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 8-8: UL power control with 2 PUCCH closed loops
	twoDifferentTPC-Loop-PUCCH			ENUMERATED {supported}						OPTIONAL
}

Phy-ParametersFRX-Diff ::=	SEQUENCE {
-- R1 2-6 & 2-16b: Support 1+2 DMRS (DL/UL)
	oneFL-DMRS-TwoAdditionalDMRS		BIT STRING (SIZE (2))						OPTIONAL,
-- R1 2-7 & 2-18: Supported 2 symbols front-loaded DMRS(DL/UL)
	twoFL-DMRS							BIT STRING (SIZE (2))						OPTIONAL,
-- R1 2-8 & 2-18a: Supported 2 symbols front-loaded +2 symbols additional DMRS(DL/UL)
	twoFL-DMRS-TwoAdditionalDMRS		BIT STRING (SIZE (2))						OPTIONAL,
-- R1 2-9 & 2-19: Support 1+3 DMRS (DL/UL)
	oneFL-DMRS-ThreeAdditionalDMRS		BIT STRING (SIZE (2))						OPTIONAL,
-- R1 2-10: Support DMRS type (DL)
	supportedDMRS-TypeDL				ENUMERATED {type1, type2}					OPTIONAL,
-- R1 2-17: Support DMRS type (UL)
	supportedDMRS-TypeUL				ENUMERATED {type1, type2}					OPTIONAL,
-- R1 2-37: Support Semi-open loop CSI
	semiOpenLoopCSI						ENUMERATED {supported}						OPTIONAL,
-- R1 2-38: CSI report without PMI
	csi-ReportWithoutPMI				ENUMERATED {supported}						OPTIONAL,
-- R1 2-39: CSI report with CRI
	csi-ReportWithCRI					ENUMERATED {supported}						OPTIONAL,
-- R1 2-39a: CSI report without CQI
	csi-ReportWithoutCQI				ENUMERATED {supported}						OPTIONAL,
-- R1 2-44 & 2-47: 1 port of DL/UL PTRS
	onePortsPTRS						BIT STRING (SIZE (2))						OPTIONAL,
-- R1 4-2: 2 PUCCH of format 0 or 2 in consecutive symbols
	twoPUCCH-F0-2-ConsecSymbols			ENUMERATED {supported}						OPTIONAL,
-- R1 4-3: PUCCH format 2 over 1 – 2 OFDM symbols once per slot with FH
	pucch-F2-WithFH						ENUMERATED {supported}						OPTIONAL,
-- R1 4-4: PUCCH format 3 over 4 – 14 OFDM symbols once per slot with FH
	pucch-F3-WithFH						ENUMERATED {supported}						OPTIONAL,
-- R1 4-5: PUCCH format 4 over 4 – 14 OFDM symbols once per slot with FH
	pucch-F4-WithFH						ENUMERATED {supported}						OPTIONAL,
-- R1 4-6: Non-frequency hopping for PUCCH formats 0 and 2
	freqHoppingPUCCH-F0-2				ENUMERATED {notSupported}					OPTIONAL,
-- R1 4-7: Non-frequency hopping for PUCCH format 1, 3, and 4
	freqHoppingPUCCH-F1-3-4				ENUMERATED {notSupported}					OPTIONAL,
-- R1 4-19: SR/HARQ-ACK/CSI multiplexing once per slot using a PUCCH (or piggybacked on a PUSCH)
	mux-SR-HARQ-ACK-CSI-PUCCH			ENUMERATED {supported}						OPTIONAL,
-- R1 4-20: UCI code-block segmentation 
	uci-CodeBlockSegmentation			ENUMERATED {supported}						OPTIONAL,
-- R1 4-22: 1 long PUCCH format and 1 short PUCCH format in the same slot
	onePUCCH-LongAndShortFormat			ENUMERATED {supported}						OPTIONAL,
-- R1 4-22a: 2 PUCCH transmissions in the same slot which are not covered by 4-22 and 4-2
	twoPUCCH-AnyOthersInSlot			ENUMERATED {supported}						OPTIONAL,
-- R1 5-9: Intra-slot frequency-hopping for PUSCH except for PUSCH scheduled by Type 1 before RRC connection
	intraSlotFreqHopping-PUSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 5-29: LBRM for PUSCH
	pusch-LBRM							ENUMERATED {supported}						OPTIONAL,
-- R1 6-5a: PDCCH blind detection capability for CA
	pdcch-BlindDetectionCA				ENUMERATED {supported}						OPTIONAL,
-- R1 8-3: TPC-PUSCH-RNTI
	tpc-PUSCH-RNTI						ENUMERATED {supported}						OPTIONAL,
-- R1 8-4: TPC-PUCCH-RNTI
	tpc-PUCCH-RNTI						ENUMERATED {supported}						OPTIONAL,
-- R1 8-5: TPC-SRS-RNTI
	tpc-SRS-RNTI						ENUMERATED {supported}						OPTIONAL,
-- R1 8-6: Absolute TPC command mode
	absoluteTPC-Command					ENUMERATED {supported}						OPTIONAL,
-- R1 8-7: UL power control with 2 PUSCH closed loops
	twoDifferentTPC-Loop-PUSCH			ENUMERATED {supported}						OPTIONAL,
-- R1 8-8: UL power control with 2 PUCCH closed loops
	twoDifferentTPC-Loop-PUCCH			ENUMERATED {supported}						OPTIONAL,
-- R4 1-6: pi/2-BPSK for PUSCH
	pusch-HalfPi-BPSK					ENUMERATED {supported}						OPTIONAL,
-- R4 1-7: pi/2-BPSK for PUCCH format 3/4
	pucch-F3-4-HalfPi-BPSK				ENUMERATED {supported}						OPTIONAL,
-- R4 1-9: 1-symbol GP in unpaired spectrum
	oneSymbolGP-TDD						ENUMERATED {supported}						OPTIONAL,
-- R4 2-7: Almost contiguous UL CP-OFDM
	almostContiguousCP-OFDM-UL			ENUMERATED {supported}						OPTIONAL
}

Phy-ParametersFR1 ::=	SEQUENCE {
-- R1 3-2: Unicast PDCCH monitoring following Case 1-2
	pdcchMonitoringSingleOccasion		ENUMERATED {supported}						OPTIONAL,
-- R4 1-1: 60kHz of subcarrier spacing for FR1
	scs-60kHz							ENUMERATED {supported}						OPTIONAL,
-- R4 1-4: 256QAM for PDSCH in FR1
	pdsch-256QAM-FR1					ENUMERATED {supported}						OPTIONAL
}

Phy-ParametersFR2 ::=	SEQUENCE {
-- R4 2-8: PA calibration gap
	calibrationGapPA					ENUMERATED {supported}						OPTIONAL
}

RF-Parameters ::= SEQUENCE {
	supportedBandListNR					SupportedBandListNR,
	supportedBandCombination			BandCombinationList,
	bandCombinationParametersUL-List	BandCombinationParametersUL-List
}

SupportedBandListNR ::=	SEQUENCE (SIZE (1..maxBands)) OF BandNR

BandNR ::=	SEQUENCE {
	bandNR							FreqBandIndicatorNR,
-- Modified MPR behaviour as in RAN4 LS R2-1804077, which is needed for NSA as well as SA
	modifiedMPR-Behaviour			BIT STRING (SIZE (8))						OPTIONAL,
-- R4 2-1: Maximum channel bandwidth supported in each band for DL and UL separately and for each SCS that UE supports within a single CC
-- RAN4 agreed that 400 MHz is optional for FR2. The other values defined for FR1/fR2 in TS 38.101 are mandatory w/o capability bit.
	maxChannelBW-PerCC				ENUMERATED {mhz400}							OPTIONAL,
	mimo-ParametersPerBand			MIMO-ParametersPerBand						OPTIONAL,
-- R1 0-10: Extended CP
	extendedCP						ENUMERATED {supported}						OPTIONAL,
-- R1 0-13: Phase coherence across non-contiguous UL symbols in slot in the transmission of one channel
	phaseCoherenceUL				ENUMERATED {supported}						OPTIONAL,
-- R1 1-10: Support of SCell without SS/PBCH block
	scellWithoutSSB					ENUMERATED {supported}						OPTIONAL,
-- R1 1-11: Support of CSI-RS RRM measurement for SCell without SS/PBCH block
	csi-RS-MeasSCellWithoutSSB		ENUMERATED {supported}						OPTIONAL,
-- R1 2-15a: Association between CSI-RS and SRS
	srs-AssocCSI-RS					ENUMERATED {supported}						OPTIONAL,
-- R1 3-1a: For type 1 CSS with dedicated RRC configuration and for type 3 CSS, UE specific SS, CORESET resource allocation of 6RB bit-map and duration 3 OFDM symbols for FR2
	type1-3-CSS						ENUMERATED {supported}						OPTIONAL,
-- R1 3-4: More than one TCI state configurations per CORESET
	multipleTCI						ENUMERATED {supported}						OPTIONAL,
-- R1 3-5 & 3-5a: For type 1 with dedicated RRC configuration, type 3, and UE-SS,, monitoring occasion can be any OFDM symbol(s) of a slot for Case 2 (with a DCI gap)
	pdcchMonitoringAnyOccasions		ENUMERATED {withoutDCI-gap, withDCI-gap}	OPTIONAL,
-- R1 5-1a: UE specific RRC configure UL/DL assignment
	ue-SpecificUL-DL-Assignment		ENUMERATED {supported}						OPTIONAL,
-- R1 5-11 & 5-11a: Up to 2/7 unicast PDSCHs per slot for different TBs
	pdsch-DifferentTB-PerSlot		SEQUENCE {
		scs-15kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-30kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-60kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-120kHz						ENUMERATED {upto2, upto7}				OPTIONAL
	}																			OPTIONAL,
-- R1 5-12 & 5-12a: Up to 2/7 PUSCHs per slot for different TBs
	pusch-DifferentTB-PerSlot		SEQUENCE {
		scs-15kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-30kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-60kHz						ENUMERATED {upto2, upto7}				OPTIONAL,
		scs-120kHz						ENUMERATED {upto2, upto7}				OPTIONAL
	}																			OPTIONAL,
-- R1 6-2 & 6-3: Type A/B BWP adaptation (up to 2/4 BWPs) with same numerology
	bwp-SameNumerology					ENUMERATED {upto2, upto4}				OPTIONAL,
-- R1 6-4: BWP adaptation (up to 4 BWPs) with different numerologies
	bwp-DiffNumerology					ENUMERATED {upto4}						OPTIONAL,
-- R1 6-7: Two PUCCH group
	twoPUCCH-Group					ENUMERATED {supported}						OPTIONAL,
-- R1 6-8: Different numerology across PUCCH groups
	diffNumerologyAcrossPUCCH-Group	ENUMERATED {supported}						OPTIONAL,
-- R1 6-9: Different numerologies across carriers within the same PUCCH group
	diffNumerologyWithinPUCCH-Group	ENUMERATED {supported}						OPTIONAL,
-- R1 6-10: Cross carrier scheduling
	crossCarrierScheduling			ENUMERATED {supported}						OPTIONAL,
-- R1 6-11: Number of supported TAGs
	supportedNumberTAG				ENUMERATED {n2, n3, n4}						OPTIONAL,
-- R1 6-19: Simultaneous transmission of SRS on an SUL/non-SUL carrier and PUSCH/PUCCH/SRS/PRACH on the other UL carrier in the same cell
-- Details on the channel/signal combination are to be described in TS 38.306
	simultaneousTxSUL-NonSUL		ENUMERATED {supported}						OPTIONAL,
-- R1 6-21: DL search space sharing for CA
	searchSpaceSharingCA-DL			ENUMERATED {supported}						OPTIONAL,
-- R1 6-22: UL search space sharing for CA
	searchSpaceSharingCA-UL			ENUMERATED {supported}						OPTIONAL,
-- R4 1-4: 256QAM for PDSCH in FR2
	pdsch-256QAM-FR2				ENUMERATED {supported}						OPTIONAL,
-- R4 1-5: 256QAM for PUSCH
	pusch-256QAM					ENUMERATED {supported}						OPTIONAL
}

MIMO-ParametersPerBand ::= SEQUENCE {
-- R1 2-2: PDSCH beam switching
	timeDurationForQCL					SEQUENCE {
		scs-60kHz							ENUMERATED {s7, s14, s28}									OPTIONAL,
		sch-120kHz							ENUMERATED {s14, s28}										OPTIONAL
	}																									OPTIONAL,
-- R1 2-3: PDSCH MIMO layers. Absence of this field implies support of one layer.
	maxNumberMIMO-LayersPDSCH			MIMO-LayersDL													OPTIONAL,
-- R1 2-14: Codebook based PUSCH MIMO transmission. Absence of this field implies that CB-based PUSCH is not supported.
	maxNumberMIMO-LayersCB-PUSCH		MIMO-LayersUL													OPTIONAL,
-- R1 2-15: Non-codebook based PUSCH MIMO transmission. Absence of this field implies that Non-CB-based PUSCH is not supported.
	maxNumberMIMO-LayersNonCB-PUSCH		MIMO-LayersUL													OPTIONAL,
-- R1 2-4: TCI states for PDSCH
	maxNumberConfiguredTCIstates		ENUMERATED {n4, n8, n16, n32, n64}								OPTIONAL,
	maxNumberActiveTCI-PerCC			ENUMERATED {n1, n2, n4, n8}										OPTIONAL,
-- R1 2-13: PUSCH transmission coherence
	pusch-TransCoherence				ENUMERATED {nonCoherent, partialNonCoherent, fullCoherent}	OPTIONAL,
-- R1 2-20: Beam correspondence
	beamCorrespondence					ENUMERATED {supported}											OPTIONAL,
-- R1 2-21: Periodic beam report on PUCCH
	periodicBeamReport					ENUMERATED {supported}											OPTIONAL,
-- R1 2-22: Aperiodic beam report on PUSCH
	aperiodicBeamReport					ENUMERATED {supported}											OPTIONAL,
-- R1 2-23: Semi-persistent beam report on PUCCH
	sp-BeamReportPUCCH					ENUMERATED {supported}											OPTIONAL,
-- R1 2-23a: Semi-persistent beam report on PUSCH
	sp-BeamReportPUSCH					ENUMERATED {supported}											OPTIONAL,
-- R1 2-24: SSB/CSI-RS for beam management
	beamManagementSSB-CSI-RS			BeamManagementSSB-CSI-RS										OPTIONAL,
-- R1 2-26: Receiving beam selection using CSI-RS resource repetition "ON"
	maxNumberRxBeam						INTEGER (2..8)													OPTIONAL,
-- R1 2-27: Beam switching (including SSB and CSI-RS)
	maxNumberRxTxBeamSwitchDL			SEQUENCE {
		scs-15kHz							ENUMERATED {n4, n7, n14}									OPTIONAL,
		scs-30kHz							ENUMERATED {n4, n7, n14}									OPTIONAL,
		scs-60kHz							ENUMERATED {n4, n7, n14}									OPTIONAL,
		scs-120kHz							ENUMERATED {n4, n7, n14}									OPTIONAL,
		scs-240kHz							ENUMERATED {n4, n7, n14}									OPTIONAL
	}																									OPTIONAL,
-- R1 2-29: Non-group based beam reporting
	maxNumberNonGroupBeamReporting		ENUMERATED {n1, n2, n4}											OPTIONAL,
-- R1 2-29a: Group based beam reporting
	groupBeamReporting					ENUMERATED {supported}											OPTIONAL,
-- R1 2-30: UL beam management
	uplinkBeamManagement				SEQUENCE {
		maxNumberSRS-ResourcePerSet			ENUMERATED {n8, n16, n32},
		maxNumberSRS-ResourceSet			INTEGER (1..8)
	}																									OPTIONAL,
-- R1 2-31: Beam failure recovery
	maxNumberCSI-RS-BFR					INTEGER (1..64)													OPTIONAL,
	maxNumberSSB-BFR					INTEGER (1..64)													OPTIONAL,
	maxNumberCSI-RS-SSB-BFR				INTEGER (1..256)												OPTIONAL,
-- R1 2-45 & 2-48: 2 ports of DL/UL PTRS
	twoPortsPTRS						BIT STRING (SIZE (2))											OPTIONAL,
-- R1 2-53: SRS resources
	supportedSRS-Resources			SRS-Resources														OPTIONAL,
-- R1 2-55: SRS Tx switch
	srs-TxSwitch					SRS-TxSwitch														OPTIONAL,
-- R1 2-54a: Simultaneous SRS Tx
	maxNumberSimultaneousSRS-PerCC		INTEGER (1..4)													OPTIONAL,
-- R1 2-57: Support low latency CSI feedback
	lowLatencyCSI-Feedback				ENUMERATED {supported}											OPTIONAL
}

-- R1 2-24: SSB/CSI-RS for beam management
BeamManagementSSB-CSI-RS ::=	SEQUENCE {
	maxNumberSSB-CSI-RS-ResourceOneTx	ENUMERATED {n8, n16, n32, n64},
	maxNumberSSB-CSI-RS-ResourceTwoTx	ENUMERATED {n0, n4, n8, n16, n32, n64},
	supportedCSI-RS-Density				ENUMERATED {one, three, oneAndThree}
}

-- R1 2-53: SRS resources
SRS-Resources ::=	SEQUENCE {
	maxNumberAperiodicSRS-PerBWP					ENUMERATED {n1, n2, n4, n8, n16},
	maxNumberAperiodicSRS-PerBWP-PerSlot			INTEGER (1..6),
	maxNumberPeriodicSRS-PerBWP						ENUMERATED {n1, n2, n4, n8, n16},
	maxNumberPeriodicSRS-PerBWP-PerSlot				INTEGER (1..6),
	maxNumberSemiPersitentSRS-PerBWP				ENUMERATED {n0, n1, n2, n4, n8, n16},
	maxNumberSP-SRS-PerBWP-PerSlot					INTEGER (0..6),
	maxNumberSRS-Ports-PerResource					ENUMERATED {n1, n2, n4}
}
-- R1 2-55: SRS Tx switch
SRS-TxSwitch ::=	SEQUENCE {
	supportedSRS-TxPortSwitch			ENUMERATED {t1r2, t1r4, t2r4, t1r4-t2r4},
	txSwitchImpactToRx					ENUMERATED {true}								OPTIONAL
}

PDCP-Parameters ::= SEQUENCE {
	supportedROHC-Profiles	SEQUENCE {
		profile0x0000		BOOLEAN, 
		profile0x0001		BOOLEAN, 
		profile0x0002		BOOLEAN,
		profile0x0003		BOOLEAN, 
		profile0x0004		BOOLEAN, 
		profile0x0006		BOOLEAN, 
		profile0x0101		BOOLEAN, 
		profile0x0102		BOOLEAN, 
		profile0x0103		BOOLEAN, 
		profile0x0104		BOOLEAN
	}, 
	maxNumberROHC-ContextSessions	ENUMERATED {cs2, cs4, cs8, cs12, cs16, cs24, cs32, cs48, cs64, cs128, cs256, cs512, cs1024, cs16384, spare2, spare1},	
	uplinkOnlyROHC-Profiles			ENUMERATED {supported}	OPTIONAL, 
	continueROHC-Context			ENUMERATED {supported}	OPTIONAL,
	outOfOrderDelivery				ENUMERATED {supported}	OPTIONAL, 
	shortSN							ENUMERATED {supported} 	OPTIONAL
}

RLC-Parameters ::= SEQUENCE {
	am-WithShortSN					ENUMERATED {supported}	OPTIONAL,
		um-WithShortSN					ENUMERATED {supported}	OPTIONAL, 
		um-WIthLongSN					ENUMERATED {supported}	OPTIONAL
}

MAC-Parameters ::= SEQUENCE {
	mac-ParametersCommon			MAC-ParametersCommon	OPTIONAL,
	mac-ParametersXDD-Diff			MAC-ParametersXDD-Diff	OPTIONAL
}

MAC-ParametersCommon ::=	SEQUENCE {
	lcp-Restriction					ENUMERATED {supported}	OPTIONAL,
-- R1 4-24: PUCCH-spatialrelationinfo indication by a MAC CE per PUCCH resource
	pucch-SpatialRelInfoMAC-CE		ENUMERATED {supported}	OPTIONAL
}

MAC-ParametersXDD-Diff ::=	SEQUENCE {
	skipUplinkTxDynamic				ENUMERATED {supported}	OPTIONAL,
	logicalChannelSR-DelayTimer		ENUMERATED {supported}	OPTIONAL, 
	longDRX-Cycle					ENUMERATED {supported}	OPTIONAL, 
	shortDRX-Cycle					ENUMERATED {supported}	OPTIONAL, 
	multipleSR-Configurations		ENUMERATED {supported}	OPTIONAL, 
	-- If supported UE supports 8 SR configurations, otherwise 1 SR config is supported. 
	-- Confirmation is needed whether to align the number to what the configuration signalling can support.
	multipleConfiguredGrantConfigurations	ENUMERATED {supported}	OPTIONAL 
	-- If supported UE supports 16 configured grant configurations, otherwise 1 ConfiguredGrant config is supported.
	-- Confirmation is needed whether to align the number to what the configuration signalling can support, and to consider whether the 16 refers
	-- to the configurations or the active ones only (as they are within the BWP).
}

MeasParameters ::= SEQUENCE {
	measParametersXDD-Diff			MeasParametersXDD-Diff		OPTIONAL,
	measParametersFRX-Diff			MeasParametersFRX-Diff		OPTIONAL
}

MeasParametersXDD-Diff ::=	SEQUENCE {
	intraAndInterF-MeasAndReport	ENUMERATED {supported}	OPTIONAL,
	eventA-MeasAndReport			ENUMERATED {supported}	OPTIONAL 
	-- Confirmation is needed on the need of capability/IOT signaling in LTE for support of the additional measurement gap configurations.
}

MeasParametersFRX-Diff ::=	SEQUENCE {
-- R1 1-3: SSB based SINR measurement
	ss-SINR-Meas						ENUMERATED {supported}		OPTIONAL,
-- R1 1-5: CSI-RS based RRM measurement with associated SS-block
	csi-RSRP-AndRSRQ-MeasWithSSB		ENUMERATED {supported}		OPTIONAL,
-- R1 1-5a: CSI-RS based RRM measurement without associated SS-block
	csi-RSRP-AndRSRQ-MeasWithoutSSB		ENUMERATED {supported}		OPTIONAL,
-- R1 1-6: CSI-RS based SINR measurement
	csi-SINR-Meas						ENUMERATED {supported}		OPTIONAL,
-- R1 1-7: CSI-RS based RLM
	csi-RS-RLM							ENUMERATED {supported}		OPTIONAL
}

-- TAG-UE-NR-CAPABILITY-STOP
-- ASN1STOP

6.3.4	Other information elements
–	RRC-TransactionIdentifier
The IE RRC-TransactionIdentifier is used, together with the message type, for the identification of an RRC procedure (transaction).
RRC-TransactionIdentifier information element
-- ASN1START
-- TAG-RRC-TRANSACTIONIDENTIFIER-START

RRC-TransactionIdentifier ::=		INTEGER (0..3)

-- TAG-RRC-TRANSACTIONIDENTIFIER-STOP
-- ASN1STOP

6.4	RRC multiplicity and type constraint values
–	Multiplicity and type constraint definitions
-- ASN1START
-- TAG-MULTIPLICITY-AND-TYPE-CONSTRAINT-DEFINITIONS-START

maxBandComb								INTEGER ::=	65536	-- Maximum number of DL band combinations
maxBasebandProcComb						INTEGER ::=	65536	-- Maximum number of baseband processing combinations
maxNrofServingCells						INTEGER ::=	32		-- Max number of serving cells (SpCell + SCells) per cell group
maxNrofServingCells-1					INTEGER ::= 31		-- Max number of serving cells (SpCell + SCells) per cell group minus 1
maxNrofAggregatedCellsPerCellGroup		INTEGER ::= 16
maxNrofSCells							INTEGER ::=	31		-- Max number of secondary serving cells per cell group
maxNrofCellMeas							INTEGER ::=	32		-- Maximum number of entries in each of the cell lists in a measurement object
maxNrofSS-BlocksToAverage				INTEGER ::= 16		-- Max number for the (max) number of SS blocks to average to determine cell
															-- measurement
maxNrofCSI-RS-ResourcesToAverage			INTEGER ::= 16		-- Max number for the (max) number of CSI-RS to average to determine cell
															-- measurement
maxNrofDL-Allocations 					INTEGER ::= 16		-- Maximum number of PDSCH time domain resource allocations

maxNrofSR-ConfigPerCellGroup				INTEGER ::= 8		-- Maximum number of SR configurations per cell group

maxLCG-ID								INTEGER ::= 7		-- Maximum value of LCG ID
maxLC-ID								INTEGER ::= 32		-- Maximum value of Logical Channel ID
maxNrofTAGs								INTEGER ::=	4		-- Maximum number of Timing Advance Groups
maxNrofTAGs-1							INTEGER ::=	3		-- Maximum number of Timing Advance Groups minus 1

maxNrofBWPs								INTEGER ::= 4		-- Maximum number of BWPs per serving cell
maxNrofSymbols-1						INTEGER ::= 13		-- Maximum index identifying a symbol within a slot (14 symbols, indexed from 0..13)
maxNrofSlots							INTEGER ::= 320		-- Maximum number of slots in a 10 ms period
maxNrofSlots-1							INTEGER ::= 319		-- Maximum number of slots in a 10 ms period minus 1

maxNrofPhysicalResourceBlocks			INTEGER ::= 275		-- Maximum number of PRBs
maxNrofPhysicalResourceBlocks-1			INTEGER ::= 274		-- Maximum number of PRBs
maxNrofControlResourceSets 				INTEGER ::= 12 		-- Max number of CoReSets configurable on a serving cell
maxNrofControlResourceSets-1			INTEGER ::= 11  	-- Max number of CoReSets configurable on a serving cell minus 1
maxCoReSetDuration						INTEGER ::= 3		-- Max number of OFDM symbols in a control resource set
maxNrofSearchSpaces						INTEGER ::= 40		-- Max number of Search Spaces
maxNrofSearchSpaces-1					INTEGER ::= 39		-- Max number of Search Spaces minus 1
maxSFI-DCI-PayloadSize					INTEGER ::= 128		-- Max number payload of a DCI scrambled with SFI-RNTI
maxSFI-DCI-PayloadSize-1				INTEGER ::= 127		-- Max number payload of a DCI scrambled with SFI-RNTI minus 1
maxINT-DCI-PayloadSize					INTEGER ::= 126		-- Max number payload of a DCI scrambled with INT-RNTI
maxINT-DCI-PayloadSize-1				INTEGER ::= 125		-- Max number payload of a DCI scrambled with INT-RNTI minus 1
maxNrofRateMatchPatterns				INTEGER ::= 4		-- Max number of rate matching patterns that may be configured
maxNrofRateMatchPatterns-1				INTEGER ::= 3		-- Max number of rate matching patterns that may be configured minus 1

maxNrofCSI-ReportConfigurations			INTEGER ::= 48 		-- Maximum number of report configurations
maxNrofCSI-ReportConfigurations-1		INTEGER ::= 47		-- Maximum number of report configurations minus 1

maxNrofCSI-ResourceConfigurations		INTEGER ::= 112		-- Maximum number of resource configurations
maxNrofCSI-ResourceConfigurations-1		INTEGER ::= 111		-- Maximum number of resource configurations minus 1

maxNrofAP-CSI-RS-ResourcesPerSet		INTEGER ::= 16
maxNrOfCSI-AperiodicTriggers			INTEGER ::= 128		-- Maximum number of triggers for aperiodic CSI reporting
maxNrofReportConfigPerAperiodicTrigger	INTEGER ::= 16		-- Maximum number of report configurations per trigger state for aperiodic reporting

maxNrofNZP-CSI-RS-Resources				INTEGER ::= 192		-- Maximum number of Non-Zero-Power (NZP) CSI-RS resources
maxNrofNZP-CSI-RS-Resources-1			INTEGER ::= 191		-- Maximum number of Non-Zero-Power (NZP) CSI-RS resources minus 1
maxNrofNZP-CSI-RS-ResourcesPerSet		INTEGER ::= 64		-- Maximum number of NZP CSI-RS resources per resource set
maxNrofNZP-CSI-RS-ResourceSetsPerConfig	INTEGER ::= 16		-- Maximum number of resource sets per resource configuration

maxNrofZP-CSI-RS-Resources				INTEGER ::= 32		-- Maximum number of Zero-Power (NZP) CSI-RS resources
maxNrofZP-CSI-RS-Resources-1			INTEGER ::= 31		-- Maximum number of Zero-Power (NZP) CSI-RS resources minus 1
maxNrofZP-CSI-RS-ResourceSets-1			INTEGER ::= 16
maxNrofZP-CSI-RS-ResourcesPerSet		INTEGER ::= 16
maxNrofZP-CSI-RS-Sets					INTEGER ::= 16

maxNrofCSI-IM-Resources					INTEGER ::= 32		-- Maximum number of CSI-IM resources. See CSI-IM-ResourceMax in 38.214.
maxNrofCSI-IM-Resources-1				INTEGER ::= 31		-- Maximum number of CSI-IM resources minus 1. See CSI-IM-ResourceMax in 38.214.
maxNrofCSI-IM-ResourcesPerSet			INTEGER ::= 8		-- Maximum number of CSI-IM resources per set. See CSI-IM-ResourcePerSetMax in 38.214
maxNrofCSI-IM-ResourceSetsPerConfig 	INTEGER ::= 16		-- Maximum number of CSI IM resource sets per resource configuration

maxNrofSSB-Resources-1					INTEGER ::= 63		-- Maximum number of SSB resources in a resource set minus 1
maxNrofCSI-SSB-ResourcePerSet 			INTEGER ::= 64
maxNrofCSI-SSB-ResourceSetsPerConfig 	INTEGER ::= 1		-- Maximum number of CSI SSB resource sets per resource configuration

maxNrofFailureDetectionResources		INTEGER ::= 10		-- Maximum number of failure detection resources	

maxNrofObjectId							INTEGER ::= 64		-- Maximum number of measurement objects
maxNrofPCI-Ranges						INTEGER ::= 8		-- Maximum number of PCI ranges
maxNrofCSI-RS-ResourcesRRM				INTEGER ::= 96		-- Maximum number of CSI-RS resources for an RRM measurement object
maxNrofCSI-RS-ResourcesRRM-1			INTEGER ::= 95		-- Maximum number of CSI-RS resources for an RRM measurement object minus 1
maxNrofMeasId							INTEGER ::= 64		-- Maximum number of configured measurements
maxNrofQuantityConfig					INTEGER	::= 2		-- Maximum number of quantity configurations
maxNrofCSI-RS-CellsRRM 					INTEGER ::= 96 		-- Maximum number of FFS

maxNrofSRS-ResourceSets					INTEGER ::= 16		-- Maximum number of SRS resource sets in a BWP.
maxNrofSRS-ResourceSets-1				INTEGER ::= 15		-- Maximum number of SRS resource sets in a BWP minus 1.
maxNrofSRS-Resources					INTEGER ::= 64		-- Maximum number of SRS resources in an SRS resource set.
maxNrofSRS-Resources-1					INTEGER ::= 63		-- Maximum number of SRS resources in an SRS resource set minus 1.
maxNrofSRS-TriggerStates-1 				INTEGER ::= 3		-- Maximum number of SRS trigger states minus 1, i.e., the largest code point.
maxRAT-CapabilityContainers				INTEGER ::= 8		-- Maximum number of interworking RAT containers (incl NR and MRDC)
maxSimultaneousBands					INTEGER ::= 32		-- Maximum number of simultaneously aggregated bands


maxNrofSlotFormatCombinationsPerCell	INTEGER ::= 16		-- Maximum number of
maxNrofSlotFormatCombinationsPerSet		INTEGER ::= 4096	-- Maximum number of Slot Format Combinations in a SF-Set.
maxNrofSlotFormatCombinationsPerSet-1	INTEGER ::= 4095	-- Maximum number of Slot Format Combinations in a SF-Set minus 1.
maxNrofPUCCH-Resources					INTEGER ::= 128
maxNrofPUCCH-Resources-1				INTEGER ::= 127
maxNrofPUCCH-ResourceSets				INTEGER ::= 4		-- Maximum number of PUCCH Resource Sets
maxNrofPUCCH-ResourceSets-1				INTEGER ::= 3		-- Maximum number of PUCCH Resource Sets minus 1.
maxNrofPUCCH-ResourcesPerSet			INTEGER ::= 32		-- Maximum number of PUCCH Resources per PUCCH-ResourceSet
maxNrofPUCCH-ResourcesPerSet-1			INTEGER ::= 31		-- Maximum number of PUCCH Resources per PUCCH-ResourceSet minus 1.
maxNrofPUCCH-P0-PerSet					INTEGER ::= 8		-- Maximum number of P0-pucch present in a p0-pucch set
maxNrofPUCCH-PathlossReferenceRSs		INTEGER ::= 4		-- Maximum number of RSs used as pathloss reference for PUCCH power control. 
maxNrofPUCCH-PathlossReferenceRSs-1		INTEGER ::= 3		-- Maximum number of RSs used as pathloss reference for PUCCH power control minus 1.

maxNrofP0-PUSCH-AlphaSets				INTEGER ::= 30		-- Maximum number of P0-pusch-alpha-sets (see 38,213, section 7.1)
maxNrofP0-PUSCH-AlphaSets-1				INTEGER ::= 29		-- Maximum number of P0-pusch-alpha-sets minus 1 (see 38,213, section 7.1)
maxNrofPUSCH-PathlossReferenceRSs		INTEGER ::= 4		-- Maximum number of RSs used as pathloss reference for PUSCH power control. 
maxNrofPUSCH-PathlossReferenceRSs-1		INTEGER ::= 3		-- Maximum number of RSs used as pathloss reference for PUSCH power control minus 1.

maxBands 								INTEGER ::= 1024		-- Maximum number of supported bands in UE capability.
maxBandsMRDC							INTEGER	::= 1280
maxBandsEUTRA							INTEGER ::=	256
maxCellPrep		 						INTEGER ::= 32
maxCellReport		 					INTEGER ::= 8
maxDRB		 							INTEGER ::= 29			-- Maximum number of DRBs (that can be added in DRB-ToAddModLIst).
maxFreq		 							INTEGER ::= 8			-- Max number of non-serving frequencies in MeasResultSCG-Failure.
maxNrofCSI-RS	 						INTEGER ::= 64
maxNrofCandidateBeams 					INTEGER ::= 16			-- Max number of PRACH-ResourceDedicatedBFR that in BFR config.
maxNrofPCIsPerSMTC 						INTEGER ::= 64			-- Maximun number of PCIs per SMTC.
maxNrofQFIs 							INTEGER ::= 64
maxNrofSR-Resources		 				INTEGER ::= 8			-- Maximum number of SR resources per BWP in a cell.
maxNrofSlotFormatsPerCombination 		INTEGER ::= 256
maxNrofSpatialRelationInfos 			INTEGER ::= 8
maxNrofSRS-ResourcesPerSet 				INTEGER ::= 16
maxNrofIndexesToReport 					INTEGER ::= 32
maxNrofSSBs 							INTEGER ::= 64 			-- Maximum number of SSB resources in a resource set.
maxNrofSSBs-1							INTEGER ::= 63			-- Maximum number of SSB resources in a resource set minus 1.

maxNrofTCI-StatesPDCCH 					INTEGER ::= 64
maxNrofTCI-States						INTEGER ::= 64			-- Maximum number of TCI states.
maxNrofTCI-States-1						INTEGER ::= 63			-- Maximum number of TCI states minus 1.
maxNrofUL-Allocations 					INTEGER ::= 16			-- Maximum number of PUSCH time domain resource allocations.
maxQFI 									INTEGER ::= 63
maxRA-CSIRS-Resources 					INTEGER ::= 96
maxRA-OccasionsPerCSIRS					INTEGER ::= 64			-- Maximum number of RA occasions for one CSI-RS
maxRA-Occasions-1						INTEGER ::=	511			-- Maximum number of RA occasions in the system
maxRA-SSB-Resources 					INTEGER ::= 64
maxSCSs									INTEGER ::= 5
maxSecondaryCellGroups 					INTEGER ::= 3
maxNrofServingCellsEUTRA				INTEGER ::= 32
maxMBSFN-Allocations					INTEGER ::= 8
maxNrofMultiBands						INTEGER ::= 8
maxCellSFTD    	                    	INTEGER ::= 3  			-- Maximum number of cells for SFTD reporting
maxReportConfigId                 	 	INTEGER ::= 64

maxNrofSRI-PUSCH-Mappings				INTEGER ::= 16
maxNrofSRI-PUSCH-Mappings-1				INTEGER ::= 15

-- Editor’s Note: Targeted for completion in June 2018. Not used in EN-DC drop.
CellIdentity ::=						ENUMERATED {ffsTypeAndValue}
ShortMAC-I ::=							ENUMERATED {ffsTypeAndValue}

-- TAG-MULTIPLICITY-AND-TYPE-CONSTRAINT-DEFINITIONS-STOP
-- ASN1STOP

–	End of NR-RRC-Definitions
-- ASN1START

END

-- ASN1STOP



7	Variables and constants
7.1	Timers
7.1.1	Timers (Informative)
TimerStartStopAt expiryT304Reception of RRCReconfiguration message including reconfigurationWithSyncSuccessful completion of random access on the corresponding  SpCell
For T304 of SCG, upon SCG releaseFor T304 of SCG, inform network about the reconfiguration with sync failure by initiating the SCG failure information procedure as specified in 5.7.3.
T310
Upon detecting physical layer problems for the SpCell i.e. upon receiving N310 consecutive out-of-sync indications from lower layers.Upon receiving N311 consecutive in-sync indications from lower layers for the SpCell, upon receiving RRCReconfiguration with reconfigurationWithSync for that cell group, and upon initiating the connection re-establishment procedure.
Upon SCG release, if the T310 is kept in SCG.
If the T310 is kept in MCG: If security is not activated: go to RRC_IDLE else: initiate the connection re-establishment procedure. 
If the T310 is kept in SCG, Inform E-UTRAN/NR about the SCG radio link failure by initiating the SCG failure information procedure as specified in 5.7.3.T311
Upon initiating the RRC connection re-establishment procedureSelection of a suitable NR cell or a cell using another RAT.Enter RRC_IDLE
7.1.2	Timer handling
When the UE applies zero value for a timer, the timer shall be started and immediately expire unless explicitly stated otherwise.
7.2	Counters
CounterResetIncrementedWhen reaching max value
7.3	Constants
ConstantUsageN310Maximum number of consecutive "out-of-sync" indications for the PCell received from lower layersN311Maximum number of consecutive "in-sync" indications for the PCell received from lower layers
7.4	UE variables
NOTE: 	To facilitate the specification of the UE behavioural requirements, UE variables are represented using ASN.1. Unless explicitly specified otherwise, it is however up to UE implementation how to store the variables. The optionality of the IEs in ASN.1 is used only to indicate that the values may not always be available.
–	NR-UE-Variables
This ASN.1 segment is the start of the NR UE variable definitions.
-- ASN1START

NR-UE-Variables DEFINITIONS AUTOMATIC TAGS ::=

BEGIN

IMPORTS
	MeasId,
	MeasIdToAddModList,
	MeasObjectToAddModList,
	PhysCellId,
	ReportConfigToAddModList,
	RSRP-Range,
	QuantityConfig,
	maxNrofCellMeas,
	maxNrofMeasId
FROM NR-RRC-Definitions;

-- ASN1STOP

–	VarMeasConfig
The UE variable VarMeasConfig includes the accumulated configuration of the measurements to be performed by the UE, covering intra-frequency, inter-frequency and inter-RAT mobility related measurements.
VarMeasConfig UE variable
-- ASN1START
-- TAG-VAR-MEAS-CONFIG-START

VarMeasConfig ::=					SEQUENCE {
	-- Measurement identities
	measIdList							MeasIdToAddModList					OPTIONAL,
	-- Measurement objects
	measObjectList						MeasObjectToAddModList				OPTIONAL,
	-- Reporting configurations
	reportConfigList					ReportConfigToAddModList			OPTIONAL,
	-- Other parameters
	quantityConfig						QuantityConfig						OPTIONAL,
	
	s-MeasureConfig							CHOICE {
		ssb-RSRP								RSRP-Range,						
		csi-RSRP								RSRP-Range						
	} 																		OPTIONAL

}

-- TAG-VAR-MEAS-CONFIG-STOP
-- ASN1STOP
Editor’s Note: FFS Revisit whether we really need VarMeasConfig.

–	VarMeasReportList
The UE variable VarMeasReportList includes information about the measurements for which the triggering conditions have been met.
VarMeasReportList UE variable
-- ASN1START
-- TAG-VAR-MEAS-REPORT-START

VarMeasReportList ::=				SEQUENCE (SIZE (1..maxNrofMeasId)) OF VarMeasReport

VarMeasReport ::=					SEQUENCE {
	-- List of measurement that have been triggered
	measId								MeasId,
	cellsTriggeredList					CellsTriggeredList				OPTIONAL,
	numberOfReportsSent					INTEGER
}

CellsTriggeredList ::=				SEQUENCE (SIZE (1..maxNrofCellMeas)) OF CHOICE {
	physCellId							PhysCellId,
--	Not needed for EN-DC.
	physCellIdEUTRA						ENUMERATED {ffsTypeAndValue}
	}


-- TAG-VAR-MEAS-REPORT-STOP
-- ASN1STOP

–	End of NR-UE-Variables
-- ASN1START

END

-- ASN1STOP


8	Protocol data unit abstract syntax
8.1	General
The RRC PDU contents in clause 6 and clause 10 are described using abstract syntax notation one (ASN.1) as specified in ITU-T Rec. X.680 [6] and X.681 [7]. Transfer syntax for RRC PDUs is derived from their ASN.1 definitions by use of Packed Encoding Rules, unaligned as specified in ITU-T Rec. X.691 [8].
The following encoding rules apply in addition to what has been specified in X.691:
-	When a bit string value is placed in a bit-field as specified in 15.6 to 15.11 in X.691, the leading bit of the bit string value shall be placed in the leading bit of the bit-field, and the trailing bit of the bit string value shall be placed in the trailing bit of the bit-field;
NOTE:	The terms 'leading bit' and 'trailing bit' are defined in ITU-T Rec. X.680. When using the 'bstring' notation, the leading bit of the bit string value is on the left, and the trailing bit of the bit string value is on the right.
-	When decoding types constrained with the ASN.1 Contents Constraint ("CONTAINING"), automatic decoding of the contained type should not be performed because errors in the decoding of the contained type should not cause the decoding of the entire RRC message PDU to fail. It is recommended that the decoder first decodes the outer PDU type that contains the OCTET STRING or BIT STRING with the Contents Constraint, and then decodes the contained type that is nested within the OCTET STRING or BIT STRING as a separate step;
-	When decoding a) RRC message PDUs, b) BIT STRING constrained with a Contents Constraint, or c) OCTET STRING constrained with a Contents Constraint, PER decoders are required to never report an error if there are extraneous zero or non-zero bits at the end of the encoded RRC message PDU, BIT STRING or OCTET STRING.

8.2	Structure of encoded RRC messages
An RRC PDU, which is the bit string that is exchanged between peer entities/across the radio interface contains the basic production as defined in X.691.
RRC PDUs shall be mapped to and from PDCP SDUs (in case of DCCH) or RLC SDUs (in case of PCCH, BCCH or CCCH) upon transmission and reception as follows:
-	when delivering an RRC PDU as an PDCP SDU to the PDCP layer for transmission, the first bit of the RRC PDU shall be represented as the first bit in the PDCP SDU and onwards; and
-	when delivering an RRC PDU as an RLC SDU to the RLC layer for transmission, the first bit of the RRC PDU shall be represented as the first bit in the RLC SDU and onwards; and
-	upon reception of an PDCP SDU from the PDCP layer, the first bit of the PDCP SDU shall represent the first bit of the RRC PDU and onwards; and
-	upon reception of an RLC SDU from the RLC layer, the first bit of the RLC SDU shall represent the first bit of the RRC PDU and onwards.
8.3	Basic production
The 'basic production' is obtained by applying UNALIGNED PER to the abstract syntax value (the ASN.1 description) as specified in X.691. It always contains a multiple of 8 bits.
8.4	Extension
The following rules apply with respect to the use of protocol extensions:
-	A transmitter compliant with this version of the specification shall, unless explicitly indicated otherwise on a PDU type basis, set the extension part empty. Transmitters compliant with a later version may send non-empty extensions;
-	A transmitter compliant with this version of the specification shall set spare bits to zero.
8.5	Padding
If the encoded RRC message does not fill a transport block, the RRC layer shall add padding bits. This applies to PCCH and BCCH.
Padding bits shall be set to 0 and the number of padding bits is a multiple of 8.

Figure 8.5-1: RRC level padding
9	Specified and default radio configurations
Specified and default configurations are configurations of which the details are specified in the standard. Specified configurations are fixed while default configurations can be modified using dedicated signalling.
Editor’s Note: FFS / FIXME: Default configurations
9.1	Specified configurations
Editor’s Note: FFS
9.1.1	Logical channel configurations
9.1.2	SRB configurations
9.1.2.1	SRB1/SRB1S
Parameters
NameValueSemantics descriptionVerRLC configurationlogicalChannelIdentity1
9.1.2.2	SRB2/SRB2S
Parameters
NameValueSemantics descriptionVerRLC configurationlogicalChannelIdentity2
9.1.2.3	SRB3
Parameters
NameValueSemantics descriptionVerRLC configurationlogicalChannelIdentity3
9.2	Default radio configurations
9.2.1	SRB configurations
9.2.1.1	SRB1/SRB1S
Parameters (FFS)
NameValueSemantics descriptionVerPDCP-Config
>t-Reordering
infinityRLC-Config CHOICEamul-RLC-Config
>sn-FieldLength 
>t-PollRetransmit
>pollPDU
>pollByte
>maxRetxThreshold
size12
ms45
infinity
infinity
t4dl-RLC-Config
>sn-FieldLength 
>t-Reassembly
>t-StatusProhibit
size12
ms35
ms0LogicalChannelConfig>priority1Highest priority>prioritisedBitRateinfinity>bucketSizeDurationN/A>allowedSubCarrierSpacingFFS>allowedTimingFFS	>logicalChannelGroup0>logicalChannelSR-DelayTimerAppliedfalse
9.2.1.2	SRB2/SRB2S
Parameters (FFS)
NameValueSemantics descriptionVerPDCP-Config
>t-Reordering
infinityRLC-Config CHOICEamul-RLC-Config
>sn-FieldLength 
>t-PollRetransmit
>pollPDU
>pollByte
>maxRetxThreshold
size12
ms45
infinity
infinity
t4dl-RLC-Config
>sn-FieldLength 
>t-Reassembly
>t-StatusProhibit
size12
ms35
ms0LogicalChannelConfig>priority3>prioritisedBitRateinfinity>bucketSizeDurationN/A>allowedSubCarrierSpacingFFS>allowedTimingFFS>logicalChannelGroup0>logicalChannelSR-DelayTimerAppliedfalse
9.2.1.3	SRB3
Parameters (FFS)
NameValueSemantics descriptionVerPDCP-Config
>t-Reordering
infinityRLC-Config CHOICEamul-RLC-Config
>sn-FieldLength
>t-PollRetransmit
>pollPDU
>pollByte
>maxRetxThreshold
size12
ms45
infinity
infinity
t4dl-RLC-Config
>sn-FieldLength 
>t-Reassembly
>t-StatusProhibit
size12
ms35
ms0LogicalChannelConfig>priority1Highest priority>prioritisedBitRateinfinity>bucketSizeDurationN/A>allowedSubCarrierSpacingFFS>allowedTimingFFS>logicalChannelGroup0>logicalChannelSR-DelayTimerAppliedfalse
10	Generic error handling
10.1	General
The generic error handling defined in the subsequent sub-clauses applies unless explicitly specified otherwise e.g. within the procedure specific error handling.
The UE shall consider a value as not comprehended when it is set:
-	to an extended value that is not defined in the version of the transfer syntax supported by the UE;
-	to a spare or reserved value unless the specification defines specific behaviour that the UE shall apply upon receiving the concerned spare/reserved value.
The UE shall consider a field as not comprehended when it is defined:
-	as spare or reserved unless the specification defines specific behaviour that the UE shall apply upon receiving the concerned spare/reserved field.
10.2	ASN.1 violation or encoding error
The UE shall:
1>	when receiving an RRC message on the [BCCH] for which the abstract syntax is invalid [6]:
2>	ignore the message.
NOTE:	This section applies in case one or more fields is set to a value, other than a spare, reserved or extended value, not defined in this version of the transfer syntax. E.g. in the case the UE receives value 12 for a field defined as INTEGER (1..11). In cases like this, it may not be possible to reliably detect which field is in the error hence the error handling is at the message level.
10.3	Field set to a not comprehended value
The UE shall, when receiving an RRC message on any logical channel:
1>	if the message includes a field that has a value that the UE does not comprehend:
2>	if a default value is defined for this field:
3>	treat the message while using the default value defined for this field;
2>	else if the concerned field is optional:
3>	treat the message as if the field were absent and in accordance with the need code for absence of the concerned field;
2>	else:
3>	treat the message as if the field were absent and in accordance with sub-clause 10.4.
10.4	Mandatory field missing
The UE shall:
1>	if the message includes a field that is mandatory to include in the message (e.g. because conditions for mandatory presence are fulfilled) and that field is absent or treated as absent:
2>	if the RRC message was received on DCCH or CCCH:
3>	ignore the message;
2>	else:
3>	if the field concerns a (sub-field of) an entry of a list (i.e. a SEQUENCE OF):
4>	treat the list as if the entry including the missing or not comprehended field was not present;
3>	else if the field concerns a sub-field of another field, referred to as the 'parent' field i.e. the field that is one nesting level up compared to the erroneous field:
4>	consider the 'parent' field to be set to a not comprehended value;
4>	apply the generic error handling to the subsequent 'parent' field(s), until reaching the top nesting level i.e. the message level;
3>	else (field at message level):
4>	ignore the message.
NOTE 1:	The error handling defined in these sub-clauses implies that the UE ignores a message with the message type or version set to a not comprehended value.
NOTE 2:	The nested error handling for messages received on logical channels other than DCCH and CCCH applies for errors in extensions also, even for errors that can be regarded as invalid network operation e.g. the network not observing conditional presence.
The following ASN.1 further clarifies the levels applicable in case of nested error handling for errors in extension fields.
-- /example/ ASN1START

-- Example with extension addition group

ItemInfoList ::=					SEQUENCE (SIZE (1..max)) OF ItemInfo

ItemInfo ::=						SEQUENCE {
	itemIdentity						INTEGER (1..max),
	field1								Field1,
	field2								Field2					OPTIONAL,			-- Need N
	...
	[[	field3-r9						Field3-r9				OPTIONAL,			-- Cond Cond1
		field4-r9						Field4-r9				OPTIONAL			-- Need N
	]]
}

-- Example with traditional non-critical extension (empty sequence)

BroadcastInfoBlock1 ::=				SEQUENCE {
	itemIdentity						INTEGER (1..max),
	field1								Field1,
	field2								Field2					OPTIONAL,			-- Need N
	nonCriticalExtension				BroadcastInfoBlock1-v940-IEs	OPTIONAL
}

BroadcastInfoBlock1-v940-IEs::=	SEQUENCE {
	field3-r9							Field3-r9				OPTIONAL,			-- Cond Cond1
	field4-r9							Field4-r9				OPTIONAL,			-- Need N
	nonCriticalExtension				SEQUENCE {}				OPTIONAL			-- Need S
}

-- ASN1STOP

The UE shall, apply the following principles regarding the levels applicable in case of nested error handling:
-	an extension additon group is not regarded as a level on its own. E.g. in the ASN.1 extract in the previous, a error regarding the conditionality of field3 would result in the entire itemInfo entry to be ignored (rather than just the extension addition group containing field3 and field4);
-	a traditional nonCriticalExtension is not regarded as a level on its own. E.g. in the ASN.1 extract in the previous, a error regarding the conditionality of field3 would result in the entire BroadcastInfoBlock1 to be ignored (rather than just the non critical extension containing field3 and field4).
10.5	Not comprehended field
The UE shall, when receiving an RRC message on any logical channel:
1>	if the message includes a field that the UE does not comprehend:
2>	treat the rest of the message as if the field was absent.
NOTE:	This section does not apply to the case of an extension to the value range of a field. Such cases are addressed instead by the requirements in section 10.3.

11	Radio information related interactions between network nodes
11.1	General
This section specifies RRC messages that are transferred between network nodes. These RRC messages may be transferred to or from the UE via another Radio Access Technology. Consequently, these messages have similar characteristics as the RRC messages that are transferred across the NR radio interface, i.e. the same transfer syntax and protocol extension mechanisms apply.
11.2	Inter-node RRC messages
11.2.1	General
This section specifies RRC messages that are sent either across the X2-, Xn- or the NG-interface, either to or from the gNB, i.e. a single 'logical channel' is used for all RRC messages transferred across network nodes. The information could originate from or be destined for another RAT.
-- ASN1START
-- TAG_NR-INTER-NODE-DEFINITIONS-START

NR-InterNodeDefinitions DEFINITIONS AUTOMATIC TAGS ::=

BEGIN

IMPORTS
	ARFCN-ValueNR,
	CellIdentity,
	CSI-RS-Index,
	GapConfig,
	maxBandComb,
	maxBasebandProcComb,
	maxNrofSCells,
	maxNrofIndexesToReport,
	MeasQuantityResults,
	MeasResultSCG-Failure,
	MeasResultCellListSFTD,
	P-Max,
	PhysCellId,
	RadioBearerConfig,
	RRCReconfiguration,
	ServCellIndex,
	SSB-Index,
	ShortMAC-I,
	UE-CapabilityRAT-ContainerList
FROM NR-RRC-Definitions;

-- TAG_NR-INTER-NODE-DEFINITIONS-STOP
-- ASN1STOP

11.2.2	Message definitions
–	HandoverCommand
Editor’s Note: Targeted for completion in June 2018. 
This message is used to transfer the handover command as generated by the target gNB.
Direction: target gNB to source gNB/source RAN.
HandoverCommand message
-- ASN1START
-- TAG-HANDOVER-COMMAND-START

HandoverCommand ::=					SEQUENCE {
	criticalExtensions					CHOICE {
		c1									CHOICE{
			handoverCommand					HandoverCommand-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

HandoverCommand-IEs ::=				SEQUENCE {
	handoverCommandMessage				OCTET STRING (CONTAINING RRCReconfiguration),
	nonCriticalExtension				SEQUENCE {}							OPTIONAL
}

-- TAG-HANDOVER-COMMAND-STOP
-- ASN1STOP

HandoverCommand field descriptionshandoverCommandMessage
Contains the RRCReconfiguration message used to perform handover within NR or handover to NR, as generated (entirely) by the target gNB.
–	HandoverPreparationInformation
Editor’s Note: Targeted for completion in June 2018. 
This message is used to transfer the NR RRC information used by the target gNB during handover preparation, including UE capability information.
Direction: source gNB/source RAN to target gNB.
HandoverPreparationInformation message
-- ASN1START
-- TAG-HANDOVER-PREPARATION-INFORMATION-START

HandoverPreparationInformation ::=	SEQUENCE {
	criticalExtensions					CHOICE {
		c1									CHOICE{
			handoverPreparationInformation		HandoverPreparationInformation-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

HandoverPreparationInformation-IEs ::= SEQUENCE {
	ue-CapabilityRAT-List				UE-CapabilityRAT-ContainerList,
	sourceConfig						OCTET STRING (CONTAINING RRCReconfiguration),
	rrm-Config							RRM-Config				OPTIONAL,
	as-Context							AS-Context				OPTIONAL,
	nonCriticalExtension				SEQUENCE {}				OPTIONAL
}

AS-Context ::=							SEQUENCE {
	reestablishmentInfo						SEQUENCE {
		sourcePhysCellId					PhysCellId,
		targetCellShortMAC-I				ShortMAC-I,
		additionalReestabInfoList			ReestabNCellInfoList					OPTIONAL
	}																				OPTIONAL,
	-- FFS Whether to change e.g. move all re-establishment info to Xx
	configRestrictInfo					ConfigRestrictInfoSCG						OPTIONAL,
	...
}

ReestabNCellInfoList ::=		SEQUENCE ( SIZE (1..maxCellPrep) ) OF ReestabNCellInfo

ReestabNCellInfo::=	SEQUENCE{
	cellIdentity							CellIdentity,
	key-gNodeB-Star							BIT STRING (SIZE (256)),
	shortMAC-I								ShortMAC-I
}

RRM-Config ::=				SEQUENCE {
	ue-InactiveTime				ENUMERATED {
									s1, s2, s3, s5, s7, s10, s15, s20,
									s25, s30, s40, s50, min1, min1s20c, min1s40,
									min2, min2s30, min3, min3s30, min4, min5, min6,
									min7, min8, min9, min10, min12, min14, min17, min20,
									min24, min28, min33, min38, min44, min50, hr1,
									hr1min30, hr2, hr2min30, hr3, hr3min30, hr4, hr5, hr6,
									hr8, hr10, hr13, hr16, hr20, day1, day1hr12, day2,
									day2hr12, day3, day4, day5, day7, day10, day14, day19,
									day24, day30, dayMoreThan30}		OPTIONAL ,
	candidateCellInfoList		CandidateCellInfoList		OPTIONAL,
	...
}

-- TAG-HANDOVER-PREPARATION-INFORMATION-STOP
-- ASN1STOP

HandoverPreparationInformation field descriptionsas-Context
Local RAN context required by the target gNB.sourceConfig
The radio resource configuration as used in the source cell.rrm-Config
Local RAN context used mainly for RRM purposes.ue-CapabilityRAT-List 
The UE radio access related capabilities concerning RATs supported by the UE. FFS whether certain capabilities are mandatory to provide by source e.g. of target and/or source RAT.
–	CG-Config
This message is used to transfer the SCG radio configuration as generated by the SgNB.
Direction: Secondary gNB to master gNB or eNB.
CG-Config message
-- ASN1START
-- TAG-CG-CONFIG-START

CG-Config ::=					SEQUENCE {
	criticalExtensions					CHOICE {
		c1									CHOICE{
			cg-Config					CG-Config-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

CG-Config-IEs ::=			SEQUENCE {
	scg-CellGroupConfig					OCTET STRING (CONTAINING RRCReconfiguration)	OPTIONAL,
	scg-RB-Config						OCTET STRING (CONTAINING RadioBearerConfig)		OPTIONAL,
	configRestrictModReq				ConfigRestrictModReqSCG							OPTIONAL,
	drx-InfoSCG							DRX-Info										OPTIONAL,
	candidateCellInfoListSN				OCTET STRING (CONTAINING CandidateCellInfoList)	OPTIONAL,
	measConfigSN						MeasConfigSN									OPTIONAL,
	selectedBandCombinationNR			BandCombinationIndex							OPTIONAL,
	nonCriticalExtension				SEQUENCE {}										OPTIONAL
}

MeasConfigSN ::= SEQUENCE {
	measuredFrequenciesFR1				SEQUENCE (SIZE (1..maxMeasFreqsMN))	OF NR-FreqInfo	OPTIONAL,
	...
}

NR-FreqInfo ::= SEQUENCE {
	measuredFrequency 					ARFCN-ValueNR									OPTIONAL,
	...
}

ConfigRestrictModReqSCG ::=			SEQUENCE {
	requestedBC-MRDC					BandCombinationIndex							OPTIONAL,
	requestedBPC-ListMRDC				BPC-IndexList									OPTIONAL,
	requestedP-MaxFR1				P-Max												OPTIONAL,
	...
}

BandCombinationIndex ::= INTEGER (1..maxBandComb)

-- TAG-CG-CONFIG-STOP
-- ASN1STOP

CG-Config field descriptionscandidateCellInfoListSN
Contains information regarding cells that the source secondary node suggests the target secondary gNB to consider configuring.requestedP-MaxFR1
IRequested value for the maximum power for FR1 (see TS 38.104 [12]) the UE can use in NR SCG.requestedBC-MRDC
Used to request configuring an NR band combination which is forbidden to use by MN. Each entry refers to a band combination numbered according to supportedBandCombination in the UE-MRDC-Capability.requestedBPC-ListMRDC
Used to request configuring a list of NR baseband processing combinations which is forbidden to use by MN. Each entry refers a NR baseband processing combination numbered according to supportedBasebandProcessingCombination in the UE-NR-Capability.scg-CellGroupConfig
Contains the RRCReconfiguration message, used to (re-)configure the SCG configuration upon SCG establishment or modification, as generated (entirely) by the (target) SgNBscg-RB-Config
Contains the IE RadioBearerConfig, used to establish or reconfigure the SCG configuration, used to (re-)configure the SCG RB configuration upon SCG establishment or modification, as generated (entirely) by the (target) SgNBselectedBandCombinationNR
Indicates the band combination selected by SN for the EN-DC.configRestrictModReq
Used by SN to request changes to SCG configuration restrictions previously set by MN to ensure UE capabilities are respected. E.g. can used to request configuring an NR band combination whose use MN has previously forbidden.
–	CG-ConfigInfo
This message is used by master eNB or gNB to request the SgNB to perform certain actions e.g. to establish, modify or release an SCG. The message may include additional information e.g. to assist the SgNB to set the SCG configuration.It can also be used by a CU to request a DU to perform certain actions, e.g. to establish, modify or release an MCG or SCG.
Direction: Master eNB or gNB to secondary gNB, alternatively CU to DU.
CG-ConfigInfo message
-- ASN1START
-- TAG-CG-CONFIG-INFO-START

CG-ConfigInfo ::=				SEQUENCE {
	criticalExtensions				CHOICE {
		c1								CHOICE{
			cg-ConfigInfo				CG-ConfigInfo-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture		SEQUENCE {}
	}
}

CG-ConfigInfo-IEs ::=		SEQUENCE {
	ue-CapabilityInfo			OCTET STRING (CONTAINING UE-CapabilityRAT-ContainerList)		OPTIONAL,-- Cond SN-Addition
	candidateCellInfoListMN			CandidateCellInfoList									OPTIONAL,
	candidateCellInfoListSN			OCTET STRING (CONTAINING CandidateCellInfoList)			OPTIONAL,
	measResultCellListSFTD			MeasResultCellListSFTD									OPTIONAL,
	scgFailureInfo					SEQUENCE {
		failureType						ENUMERATED { t310-Expiry, randomAccessProblem,
														rlc-MaxNumRetx, scg-ChangeFailure, 
														scg-reconfigFailure,
														srb3-IntegrityFailure},
		measResultSCG					OCTET STRING (CONTAINING MeasResultSCG-Failure)
	}																						OPTIONAL,
	configRestrictInfo			ConfigRestrictInfoSCG										OPTIONAL,
	drx-InfoMCG					DRX-Info													OPTIONAL,
	measConfigMN				MeasConfigMN												OPTIONAL,
	sourceConfigSCG				OCTET STRING (CONTAINING RRCReconfiguration)				OPTIONAL,
	scg-RB-Config             	OCTET STRING (CONTAINING RadioBearerConfig)        			OPTIONAL,
	mcg-RB-Config				OCTET STRING (CONTAINING RadioBearerConfig)					OPTIONAL,
	nonCriticalExtension		SEQUENCE {}													OPTIONAL
}

ConfigRestrictInfoSCG ::=		SEQUENCE {
	allowedBC-ListMRDC				BandCombinationIndexList								OPTIONAL,
	allowedBPC-ListMRDC				BPC-IndexList											OPTIONAL,
	powerCoordination-FR1				SEQUENCE {
		p-maxNR							P-Max												OPTIONAL,
		p-maxEUTRA						P-Max												OPTIONAL
	}																						OPTIONAL,
	servCellIndexRangeSCG			SEQUENCE {
		lowBound						ServCellIndex,
		upBound							ServCellIndex
	}																						OPTIONAL,   -- Cond SN-Addition
	maxMeasFreqsSCG-NR					INTEGER(1..maxMeasFreqsMN)								OPTIONAL,
	...
}

BandCombinationIndexList ::= SEQUENCE (SIZE (1..maxBandComb)) OF BandCombinationIndex

BPC-IndexList ::= SEQUENCE (SIZE (1..maxBasebandProcComb)) OF BPC-Index
BPC-Index ::= INTEGER (1..maxBasebandProcComb)

DRX-Info ::=					SEQUENCE {
	drx-LongCycleStartOffset		CHOICE {
		ms10							INTEGER(0..9),
		ms20							INTEGER(0..19),
		ms32							INTEGER(0..31),
		ms40							INTEGER(0..39),
		ms60							INTEGER(0..59),
		ms64							INTEGER(0..63),
		ms70							INTEGER(0..69),
		ms80							INTEGER(0..79),
		ms128							INTEGER(0..127),
		ms160							INTEGER(0..159),
		ms256							INTEGER(0..255),
		ms320							INTEGER(0..319),
		ms512							INTEGER(0..511),
		ms640							INTEGER(0..639),
		ms1024							INTEGER(0..1023),
		ms1280							INTEGER(0..1279),
		ms2048							INTEGER(0..2047),
		ms2560							INTEGER(0..2559),
		ms5120							INTEGER(0..5119),
		ms10240							INTEGER(0..10239)
	},
	shortDRX							SEQUENCE {
		drx-ShortCycle						ENUMERATED	{
												ms2, ms3, ms4, ms5, ms6, ms7, ms8, ms10, ms14, ms16, ms20, ms30, ms32,
												ms35, ms40, ms64, ms80, ms128, ms160, ms256, ms320, ms512, ms640, spare9,
												spare8, spare7, spare6, spare5, spare4, spare3, spare2, spare1 },
		drx-ShortCycleTimer					INTEGER (1..16)
	}																					OPTIONAL
}

MeasConfigMN ::= SEQUENCE {
	measuredFrequenciesMN				SEQUENCE (SIZE (1..maxMeasFreqsMN))	OF NR-FreqInfo	OPTIONAL,
	measGapConfigFR1					GapConfig											OPTIONAL,
	gapPurpose							ENUMERATED {perUE, perFR1}							OPTIONAL,
	...
}


-- TAG-CG-CONFIG-INFO-STOP
-- ASN1STOP

CG-ConfigInfo field descriptionsallowedBandCombinationListMRDC
A list of indices referring to band combinations in MR-DC capabilities from which SN is allowed to select an NR band combination. Each entry refers to a band combination numbered according to supportedBandCombination in the UE-MRDC-Capability. All MR-DC band combinations indicated by this field comprise the same LTE band combination.allowedBasebandProcessingCombinationListMRDC
Indicates a list of NR BPCs the SN is allowed to configure. Each entry refers to a NR baseband processing combination numbered according to supportedBasebandProcessingCombination in the UE-NR-Capability.candidateCellInfoListMN, candidateCellInfoListSN
Contains information regarding cells that the master node or the source node suggests the target gNB to consider configuring.
Including CSI-RS measurement results in candidateCellInfoListMN is not supported in this version of the specification.maxMeasFreqsSCG-NR
Indicates the maximum number of allowed NR frequencies SCG should configure for measurements.mcg-RB-Config
Contains the IE RadioBearerConfig of the MN, used to support delta configuration for bearer type change between MN terminated to SN terminated bearer and SN change.p-maxEUTRA
Indicates the maximum power for EUTRA (see TS 36.104 [XX]) the UE can use in LTE MCG.p-maxNR
Indicates the maximum power for NR (see TS 38.104 [12]) the UE can use in NR SCG.powerCoordination-FR1
Indicates the maximum power that the UE can use in FR1.scg-RB-Config
Contains the IE RadioBearerConfig of the SN, used to support delta configuration e.g. during SN change. This field is absent when master eNB uses full configuration option.sourceConfigSCG
Includes the current dedicated SCG configuration in the same format as the RRCReconfiguration message, i.e. not only CellGroupConfig but also e.g. measConfig. This field is absent when master eNB uses full configuration option.ConfigRestrictInfo
Includes fields for which SgNB is explictly indicated to observe a configuration restriction.servCellIndexRangeSCG
Range of serving cell indices that SN is allowed to configure for SCG serving cells.
Conditional PresenceExplanationSN-AdditionThe field is mandatory present upon SN addition.
–	MeasurementTimingConfiguration
Editor’s Note: Targeted for completion in June 2018. 
The MeasurementTimingConfiguration message is used to convey assistance information for measurement timing betwen by master eNB and secondary gNB.
Direction: Master eNB to secondary gNB.
MeasurementTimingConfiguration message
-- ASN1START
-- TAG-MEASUREMENT-TIMING-CONFIGURATION-START

MeasurementTimingConfiguration ::=				SEQUENCE {
	criticalExtensions				CHOICE {
		c1								CHOICE{
			measTimingConf					MeasurementTimingConfiguration-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture		SEQUENCE {}
	}
}

MeasurementTimingConfiguration-IEs ::=	SEQUENCE {
	measTiming								MeasTimingList							OPTIONAL,
	nonCriticalExtension					SEQUENCE {}								OPTIONAL
}

MeasTimingList ::= SEQUENCE (SIZE (1..maxMeasFreqsMN)) OF MeasTiming  

MeasTiming ::= SEQUENCE {
	carrierFreq								ARFCN-ValueNR							OPTIONAL,         
	ssb-MeasurementTimingConfiguration		ENUMERATED {ffsTypeAndValue}		OPTIONAL,
	...
}

-- TAG-MEASUREMENT-TIMING-CONFIGURATION-STOP
-- ASN1STOP

11.3	Inter-node RRC information element definitions
–	CandidateCellInfoList
The CandidateCellInfoList IE contains information regarding cells that the source suggests the target gNB to consider configuring.
CandidateCellInfoList information element
-- ASN1START
-- TAG-CANDIDATE-CELL-INFO-LIST-START

CandidateCellInfoList ::=	SEQUENCE (SIZE (1.. maxNrofSCells)) OF CandidateCellInfo

CandidateCellInfo ::=			SEQUENCE {
	cellIdentification				SEQUENCE {
		physCellId						PhysCellId,
		dl-CarrierFreq					ARFCN-ValueNR
	},
	measResultCell					MeasQuantityResults											OPTIONAL,
	candidateRS-IndexListSSB		CandidateRS-IndexInfoListSSB								OPTIONAL,
	candidateRS-IndexListCSI-RS		CandidateRS-IndexInfoListCSI-RS								OPTIONAL,
	...
}

CandidateRS-IndexInfoListSSB ::=	SEQUENCE (SIZE (1..maxNrofIndexesToReport)) OF CandidateRS-IndexInfoSSB

CandidateRS-IndexInfoSSB ::=	SEQUENCE {
	ssb-Index						SSB-Index,
	measResultSSB					MeasQuantityResults											OPTIONAL,
	...
}

CandidateRS-IndexInfoListCSI-RS ::=	SEQUENCE (SIZE (1..maxNrofIndexesToReport)) OF CandidateRS-IndexInfoCSI-RS

CandidateRS-IndexInfoCSI-RS ::=		SEQUENCE {
	csi-RS-Index							CSI-RS-Index,
	measResultCSI-RS						MeasQuantityResults									OPTIONAL,
	...
}

-- TAG-CANDIDATE-CELL-INFO-LIST-STOP
-- ASN1STOP

11.4	Inter-node RRC multiplicity and type constraint values
–	Multiplicity and type constraints definitions
-- ASN1START
-- TAG_NR-MULTIPLICITY-AND-CONSTRAINTS-START

maxMeasFreqsMN				INTEGER ::= 32	-- Maximum number of MN-configured measurement frequencies
maxCellPrep					INTEGER ::= 32	-- Maximum number of cells prepared for handover

-- TAG_NR-MULTIPLICITY-AND-CONSTRAINTS-STOP
-- ASN1STOP

–	End of NR-InterNodeDefinitions
-- ASN1START
-- TAG_NR-INTER-NODE-DEFINITIONS-END-START

END

-- TAG_NR-INTER-NODE-DEFINITIONS-END-STOP
-- ASN1STOP


12	Processing delay requirements for RRC procedures
The UE performance requirements for RRC procedures are specified in the following tables. The performance requirement is expressed as the time in [ms] from the end of reception of the network -> UE message on the UE physical layer up to when the UE shall be ready for the reception of uplink grant for the UE -> network response message with no access delay other than the TTI-alignment (e.g. excluding delays caused by scheduling, the random access procedure or physical layer synchronisation).

Figure 11.2-1: Illustration of RRC procedure delay
Table 11.2-1: UE performance requirements for RRC procedures for UEs 
Procedure title:Network -> UEUE -> NetworkValue [ms]NotesRRC Connection Control ProceduresRRC reconfiguration
RRCReconfigurationRRCReconfigurationCompleteX
Annex A (informative):	Guidelines, mainly on use of ASN.1
A.1	Introduction
The following clauses contain guidelines for the specification of RRC protocol data units (PDUs) with ASN.1.
A.2	Procedural specification
A.2.1	General principles
The procedural specification provides an overall high level description regarding the UE behaviour in a particular scenario.
It should be noted that most of the UE behaviour associated with the reception of a particular field is covered by the applicable parts of the PDU specification. The procedural specification may also include specific details of the UE behaviour upon reception of a field, but typically this should be done only for cases that are not easy to capture in the PDU section e.g. general actions, more complicated actions depending on the value of multiple fields.
Likewise, the procedural specification need not specify the UE requirements regarding the setting of fields within the messages that are sent to the network i.e. this may also be covered by the PDU specification.
A.2.2	More detailed aspects
The following more detailed conventions should be used:
-	Bullets:
-	Capitals should be used in the same manner as in other parts of the procedural text i.e. in most cases no capital applies since the bullets are part of the sentence starting with 'The UE shall:'
-	All bullets, including the last one in a sub-clause, should end with a semi-colon i.e. an ';.
-	Conditions:
-	Whenever multiple conditions apply, a semi-colon should be used at the end of each conditions with the exception of the last one, i.e. as in 'if cond1, or cond2.
A.3	PDU specification
A.3.1	General principles
A.3.1.1	ASN.1 sections
The RRC PDU contents are formally and completely described using abstract syntax notation (ASN.1), see X.680 [13], X.681 (02/2002) [14].
The complete ASN.1 code is divided into a number of ASN.1 sections in the specifications. In order to facilitate the extraction of the complete ASN.1 code from the specification, each ASN.1 section begins with the following:
- 	a first text paragraph consisting entirely of an ASN.1 start tag, which consists of a double hyphen followed by a single space and the text string "ASN1START" (in all upper case letters);
-	a second text paragraph consisting entirely of a block start tag is included, which consists of a double hyphen followed by a single space and the text string "TAG-NAME-START" (in all upper case letters), where the "NAME" refers to the main name of the paragraph (in all upper-case letters).
Similarly, each ASN.1 section ends with the following:
-	a first text paragraph consisting entirely of a block stop tag, which consists of a double hyphen followed by a single space and the text string "TAG-NAME-STOP" (in all upper-case letters), where the "NAME" refers to the main name of the paragraph (in all upper-case letters);
-	a second text paragraph consisting entirely of an ASN.1 stop tag, which consists of a double hyphen followed by a singlespace and the text "ASN1STOP" (in all upper case letters).
This results in the following tags:
-- ASN1START
-- TAG-NAME-START

-- TAG-NAME-STOP
-- ASN1STOP

The text paragraphs containing either of thestart and stop tags should not contain any ASN.1 code significant for the complete description of the RRC PDU contents. The complete ASN.1 code may be extracted by copying all the text paragraphs between an ASN.1 start tag and the following ASN.1 stop tag in the order they appear, throughout the specification.
NOTE:	A typical procedure for extraction of the complete ASN.1 code consists of a first step where the entire RRC PDU contents description (ultimately the entire specification) is saved into a plain text (ASCII) file format, followed by a second step where the actual extraction takes place, based on the occurrence of the ASN.1 start and stop tags.
A.3.1.2	ASN.1 identifier naming conventions
The naming of identifiers (i.e., the ASN.1 field and type identifiers) should be based on the following guidelines:
-	Message (PDU) identifiers should be ordinary mixed case without hyphenation. These identifiers, e.g., the RRCConnectionModificationCommand, should be used for reference in the procedure text. Abbreviations should be avoided in these identifiers and abbreviated forms of these identifiers should not be used.
-	Type identifiers other than PDU identifiers should be ordinary mixed case, with hyphenation used to set off acronyms only where an adjacent letter is a capital, e.g., EstablishmentCause, SelectedPLMN (not Selected-PLMN, since the "d" in "Selected" is lowercase), InitialUE-Identity and MeasSFN-SFN-TimeDifference.
-	Field identifiers shall start with a lowercase letter and use mixed case thereafter, e.g., establishmentCause. If a field identifier begins with an acronym (which would normally be in upper case), the entire acronym is lowercase (plmn-Identity, not pLMN-Identity). The acronym is set off with a hyphen (ue-Identity, not ueIdentity), in order to facilitate a consistent search pattern with corresponding type identifiers.
-	Identifiers should convey the meaning of the identifier and should avoid adding unnecessary postfixes (e.g. abstractions like 'Info') for the name.
-	Identifiers that are likely to be keywords of some language, especially widely used languages, such as C++ or Java, should be avoided to the extent possible.
-	Identifiers, other than PDU identifiers, longer than 25 characters should be avoided where possible. It is recommended to use abbreviations, which should be done in a consistent manner i.e. use 'Meas' instead of 'Measurement' for all occurrences. Examples of typical abbreviations are given in table A.3.1.2.1-1 below.
-	For future extension: When an extension is introduced a suffix is added to the identifier of the concerned ASN.1 field and/or type. A suffix of the form "rX" is used, with X indicating the release, for ASN.1 fields or types introduced in a later release (i.e. a release later than the original/first release of the protocol) as well as for ASN.1 fields or types for which a revision is introduced in a later release replacing a previous version, e.g., Foo-r9 for the Rel-9 version of the ASN.1 type Foo. A suffix of the form "rXb" is used for the first revision of a field that it appears in the same release (X) as the original version of the field, "rXc" for a second intra-release revision and so on. A suffix of the form "vXYZ" is used for ASN.1 fields or types that only are an extension of a corresponding earlier field or type (see sub-clause A.4), e.g., AnElement-v10b0 for the extension of the ASN.1 type AnElement introduced in version 10.11.0 of the specification. A number 0...9, 10, 11, etc. is used to represent the first part of the version number, indicating the release of the protocol. Lower case letters a, b, c, etc. are used to represent the second (and third) part of the version number if they are greater than 9. In the procedural specification, in field descriptions as well as in headings suffices are not used, unless there is a clear need to distinguish the extension from the original field.
-	More generally, in case there is a need to distinguish different variants of an ASN.1 field or IE, a suffix should be added at the end of the identifiers e.g. MeasObjectUTRA, ConfigCommon. When there is no particular need to distinguish the fields (e.g. because the field is included in different IEs), a common field identifier name may be used. This may be attractive e.g. in case the procedural specification is the same for the different variants.
-	It should be avoided to use field identifiers with the same name within the elements of a CHOICE, including using a CHOICE inside a SEQUENCE (to avoid certain compiler errors).
Table A.3.1.2-1: Examples of typical abbreviations used in ASN.1 identifiers
AbbreviationAbbreviated wordConfigConfigurationDLDownlinkExtExtensionFreqFrequencyIdIdentityIndIndicationMeasMeasurementMIBMasterInformationBlockNeighNeighbour(ing)Param(s)Parameter(s)PhysPhysicalPCIPhysical Cell IdProcProcessReconfigReconfigurationReestRe-establishmentReqRequestRxReceptionSchedSchedulingSIBSystemInformationBlockSyncSynchronisationThrThresholdTxTransmissionULUplink
NOTE:	The table A.3.1.2.1-1 is not exhaustive. Additional abbreviations may be used in ASN.1 identifiers when needed.
A.3.1.3	Text references using ASN.1 identifiers
A text reference into the RRC PDU contents description from other parts of the specification is made using the ASN.1 field identifier of the referenced type. The ASN.1 field and type identifiers used in text references should be in the italic font style. The "do not check spelling and grammar" attribute in Word should be set. Quotation marks (i.e., " ") should not be used around the ASN.1 field or type identifier.
A reference to an RRC PDU should be made using the corresponding ASN.1 field identifier followed by the word "message", e.g., a reference to the RRCRelease message.
A reference to a specific part of an RRC PDU, or to a specific part of any other ASN.1 type, should be made using the corresponding ASN.1 field identifier followed by the word "field", e.g., a reference to the prioritisedBitRate field in the example below.
-- /example/ ASN1START

LogicalChannelConfig ::=			SEQUENCE {
	ul-SpecificParameters				SEQUENCE {
		priority							Priority,
		prioritisedBitRate					PrioritisedBitRate,
		bucketSizeDuration					BucketSizeDuration,
		logicalChannelGroup					INTEGER (0..3)
	}		OPTIONAL
}

-- ASN1STOP

NOTE:	All the ASN.1 start tags in the ASN.1 sections, used as examples in this annex to the specification, are deliberately distorted, in order not to include them when the ASN.1 description of the RRC PDU contents is extracted from the specification.
A reference to a specific type of information element should be made using the corresponding ASN.1 type identifier preceded by the acronym "IE", e.g., a reference to the IE LogicalChannelConfig in the example above.
References to a specific type of information element should only be used when those are generic, i.e., without regard to the particular context wherein the specific type of information element is used. If the reference is related to a particular context, e.g., an RRC PDU type (message) wherein the information element is used, the corresponding field identifier in that context should be used in the text reference.
A reference to a specific value of an ASN.1 field should be made using the corresponding ASN.1 value without using quotation marks around the ASN.1 value, e.g., 'if the status field is set to value true'.
A.3.2	High-level message structure
Within each logical channel type, the associated RRC PDU (message) types are alternatives within a CHOICE, as shown in the example below.
-- /example/ ASN1START

DL-DCCH-Message ::= SEQUENCE {
	message					DL-DCCH-MessageType
}

DL-DCCH-MessageType ::= CHOICE {
	c1						CHOICE {
		dlInformationTransfer					DLInformationTransfer,
		handoverFromEUTRAPreparationRequest		HandoverFromEUTRAPreparationRequest,
		mobilityFromEUTRACommand				MobilityFromEUTRACommand,
		rrcConnectionReconfiguration			RRCConnectionReconfiguration,
		rrcConnectionRelease					RRCConnectionRelease,
		securityModeCommand						SecurityModeCommand,
		ueCapabilityEnquiry						UECapabilityEnquiry,
		spare1 NULL
	},
	messageClassExtension	SEQUENCE {}
}

-- ASN1STOP

A nested two-level CHOICE structure is used, where the alternative PDU types are alternatives within the inner level c1 CHOICE.
Spare alternatives (i.e., spare1 in this case) may be included within the c1 CHOICE to facilitate future extension. The number of such spare alternatives should not extend the total number of alternatives beyond an integer-power-of-two number of alternatives (i.e., eight in this case).
Further extension of the number of alternative PDU types is facilitated using the messageClassExtension alternative in the outer level CHOICE.
A.3.3	Message definition
Each PDU (message) type is specified in an ASN.1 section similar to the one shown in the example below.
-- /example/ ASN1START

RRCConnectionReconfiguration ::=	SEQUENCE {
	rrc-TransactionIdentifier			RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		c1									CHOICE{
			rrcConnectionReconfiguration-r8		RRCConnectionReconfiguration-r8-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

RRCConnectionReconfiguration-r8-IEs ::= SEQUENCE {
	-- Enter the IEs here.
	...
}

-- ASN1STOP

Hooks for critical and non-critical extension should normally be included in the PDU type specification. How these hooks are used is further described in sub-clause A.4.
Critical extensions are characterised by a redefinition of the PDU contents and need to be governed by a mechanism for protocol version agreement between the encoder and the decoder of the PDU, such that the encoder is prevented from sending a critically extended version of the PDU type, which is not comprehended by the decoder.
Critical extension of a PDU type is facilitated by a two-level CHOICE structure, where the alternative PDU contents are alternatives within the inner level c1 CHOICE. Spare alternatives (i.e., spare3 down to spare1 in this case) may be included within the c1 CHOICE. The number of spare alternatives to be included in the original PDU specification should be decided case by case, based on the expected rate of critical extension in the future releases of the protocol.
Further critical extension, when the spare alternatives from the original specifications are used up, is facilitated using the criticalExtensionsFuture in the outer level CHOICE.
In PDU types where critical extension is not expected in the future releases of the protocol, the inner level c1 CHOICE and the spare alternatives may be excluded, as shown in the example below.
-- /example/ ASN1START

RRCConnectionReconfigurationComplete ::= SEQUENCE {
	rrc-TransactionIdentifier			RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		rrcConnectionReconfigurationComplete-r8
											RRCConnectionReconfigurationComplete-r8-IEs,
		criticalExtensionsFuture			SEQUENCE {}
	}
}

RRCConnectionReconfigurationComplete-r8-IEs ::= SEQUENCE {
	-- Enter the fields here.
	...
}

-- ASN1STOP

Non-critical extensions are characterised by the addition of new information to the original specification of the PDU type. If not comprehended, a non-critical extension may be skipped by the decoder, whilst the decoder is still able to complete the decoding of the comprehended parts of the PDU contents.
Non-critical extensions at locations other than the end of the message or other than at the end of a field contained in a BIT or OCTET STRING are facilitated by use of the ASN.1 extension marker "...". The original specification of a PDU type should normally include the extension marker at the end of the sequence of information elements contained.
Non-critical extensions at the end of the message or at the end of a field that is contained in a BIT or OCTET STRING may be facilitated by use of an empty sequence that is marked OPTIONAL e.g. as shown in the following example:
-- /example/ ASN1START

RRCMessage-r8-IEs ::= 					SEQUENCE {
	field1									InformationElement1,
	field2									InformationElement2,

	nonCriticalExtension					SEQUENCE {}						OPTIONAL
}

-- ASN1STOP

The ASN.1 section specifying the contents of a PDU type may be followed by a field description table where a further description of, e.g., the semantic properties of the fields may be included. The general format of this table is shown in the example below. The field description table is absent in case there are no fields for which further description needs to be provided e.g. because the PDU does not include any fields, or because an IE is defined for each field while there is nothing specific regarding the use of this IE that needs to be specified.
%PDU-TypeIdentifier% field descriptions%field identifier%
Field description.%field identifier%
Field description.
The field description table has one column. The header row shall contain the ASN.1 type identifier of the PDU type.
The following rows are used to provide field descriptions. Each row shall include a first paragraph with a field identifier (in bold and italic font style) referring to the part of the PDU to which it applies. The following paragraphs at the same row may include (in regular font style), e.g., semantic description, references to other specifications and/or specification of value units, which are relevant for the particular part of the PDU.
The parts of the PDU contents that do not require a field description shall be omitted from the field description table.
A.3.4	Information elements
Each IE (information element) type is specified in an ASN.1 section similar to the one shown in the example below.
-- /example/ ASN1START

PRACH-ConfigSIB ::=					SEQUENCE {
	rootSequenceIndex					INTEGER (0..1023),
	prach-ConfigInfo					PRACH-ConfigInfo
}

PRACH-Config ::=					SEQUENCE {
	rootSequenceIndex					INTEGER (0..1023),
	prach-ConfigInfo					PRACH-ConfigInfo					OPTIONAL	-- Need N
}

PRACH-ConfigInfo ::=				SEQUENCE {
	prach-ConfigIndex					ENUMERATED {ffs},
	highSpeedFlag						ENUMERATED {ffs},
	zeroCorrelationZoneConfig			ENUMERATED {ffs}
}

-- ASN1STOP

IEs should be introduced whenever there are multiple fields for which the same set of values apply. IEs may also be defined for other reasons e.g. to break down a ASN.1 definition in to smaller pieces.
A group of closely related IE type definitions, like the IEs PRACH-ConfigSIB and PRACH-Config in this example, are preferably placed together in a common ASN.1 section. The IE type identifiers should in this case have a common base, defined as the generic type identifier. It may be complemented by a suffix to distinguish the different variants. The "PRACH-Config" is the generic type identifier in this example, and the "SIB" suffix is added to distinguish the variant. The sub-clause heading and generic references to a group of closely related IEs defined in this way should use the generic type identifier.
The same principle should apply if a new version, or an extension version, of an existing IE is created for critical or non-critical extension of the protocol (see sub-clause A.4). The new version, or the extension version, of the IE is included in the same ASN.1 section defining the original. A suffix is added to the type identifier, using the naming conventions defined in sub-clause A.3.1.2, indicating the release or version of the where the new version, or extension version, was introduced.
Local IE type definitions, like the IE PRACH-ConfigInfo in the example above, may be included in the ASN.1 section and be referenced in the other IE types defined in the same ASN.1 section. The use of locally defined IE types should be encouraged, as a tool to break up large and complex IE type definitions. It can improve the readability of the code. There may also be a benefit for the software implementation of the protocol end-points, as these IE types are typically provided by the ASN.1 compiler as independent data elements, to be used in the software implementation.
An IE type defined in a local context, like the IE PRACH-ConfigInfo, should not be referenced directly from other ASN.1 sections in the RRC specification. An IE type which is referenced in more than one ASN.1 section should be defined in a separate sub-clause, with a separate heading and a separate ASN.1 section (possibly as one in a set of closely related IE types, like the IEs PRACH-ConfigSIB and PRACH-Config in the example above). Such IE types are also referred to as 'global IEs'.
NOTE:	Referring to an IE type, that is defined as a local IE type in the context of another ASN.1 section, does not generate an ASN.1 compilation error. Nevertheless, using a locally defined IE type in that way makes the IE type definition difficult to find, as it would not be visible at an outline level of the specification. It should be avoided.
The ASN.1 section specifying the contents of one or more IE types, like in the example above, may be followed by a field description table, where a further description of, e.g., the semantic properties of the fields of the information elements may be included. This table may be absent, similar as indicated in sub-clause A.3.3 for the specification of the PDU type. The general format of the field description table is the same as shown in sub-clause A.3.3 for the specification of the PDU type.
A.3.5	Fields with optional presence
A field with optional presence may be declared with the keyword DEFAULT. It identifies a default value to be assumed, if the sender does not include a value for that field in the encoding:
-- /example/ ASN1START

PreambleInfo ::=					SEQUENCE {
	numberOfRA-Preambles				INTEGER (1..64)						DEFAULT 1,
	...
}

-- ASN1STOP

Alternatively, a field with optional presence may be declared with the keyword OPTIONAL. It identifies a field for which a value can be omitted. The omission carries semantics, which is different from any normal value of the field:
-- /example/ ASN1START

PRACH-Config ::=				SEQUENCE {
	rootSequenceIndex					INTEGER (0..1023),
	prach-ConfigInfo					PRACH-ConfigInfo					OPTIONAL	-- Need N
}

-- ASN1STOP

The semantics of an optionally present field, in the case it is omitted, should be indicated at the end of the paragraph including the keyword OPTIONAL, using a short comment text with a need code. The need code includes the keyword "Need", followed by one of the predefined semantics tags (S, M, N or R) defined in sub-clause 6.1. If the semantics tag S is used, the semantics of the absent field are further specified either in the field description table following the ASN.1 section, or in procedure text.
The addition of OPTIONAL keywords for capability groups is based on the following guideline. If there is more than one field in the lower level IE, then OPTIONAL keyword is added at the group level. If there is only one field in the lower level IE, OPTIONAL keyword is not added at the group level.
A.3.6	Fields with conditional presence
A field with conditional presence is declared with the keyword OPTIONAL. In addition, a short comment text shall be included at the end of the paragraph including the keyword OPTIONAL. The comment text includes the keyword "Cond", followed by a condition tag associated with the field ("UL" in this example):
-- /example/ ASN1START

LogicalChannelConfig ::=			SEQUENCE {
	ul-SpecificParameters				SEQUENCE {
		priority							INTEGER (0),
		...
	}		OPTIONAL																	-- Cond UL
}

-- ASN1STOP

When conditionally present fields are included in an ASN.1 section, the field description table after the ASN.1 section shall be followed by a conditional presence table. The conditional presence table specifies the conditions for including the fields with conditional presence in the particular ASN.1 section.
Conditional presenceExplanationULSpecification of the conditions for including the field associated with the condition tag = "UL". Semantics in case of optional presence under certain conditions may also be specified.
The conditional presence table has two columns. The first column (heading: "Conditional presence") contains the condition tag (in italic font style), which links the fields with a condition tag in the ASN.1 section to an entry in the table. The second column (heading: "Explanation") contains a text specification of the conditions and requirements for the presence of the field. The second column may also include semantics, in case of an optional presence of the field, under certain conditions i.e. using the same predefined tags as defined for optional fields in A.3.5.
Conditional presence should primarily be used when presence of a field depends on the presence and/or value of other fields within the same message. If the presence of a field depends on whether another feature/function has been configured, while this function can be configured independently e.g. by another message and/or at another point in time, the relation is best reflected by means of a statement in the field description table.
If the ASN.1 section does not include any fields with conditional presence, the conditional presence table shall not be included.
Whenever a field is only applicable in specific cases e.g. TDD, use of conditional presence should be considered.
A.3.7	Guidelines on use of lists with elements of SEQUENCE type
Where an information element has the form of a list (the SEQUENCE OF construct in ASN.1) with the type of the list elements being a SEQUENCE data type, an information element shall be defined for the list elements even if it would not otherwise be needed.
For example, a list of PLMN identities with reservation flags is defined as in the following example:
-- /example/ ASN1START

PLMN-IdentityInfoList ::=				SEQUENCE (SIZE (1..6)) OF PLMN-IdentityInfo

PLMN-IdentityInfo ::=				SEQUENCE {
	plmn-Identity						PLMN-Identity,
	cellReservedForOperatorUse			ENUMERATED {reserved, notReserved}
}

-- ASN1STOP

rather than as in the following (bad) example, which may cause generated code to contain types with unpredictable names:
-- /bad example/ ASN1START

PLMN-IdentityList ::=					SEQUENCE (SIZE (1..6)) OF SEQUENCE {
	plmn-Identity							PLMN-Identity,
	cellReservedForOperatorUse				ENUMERATED {reserved, notReserved}
}

-- ASN1STOP

A.3.8	Guidelines on use of parameterised SetupRelease type
The usage of the parameterised SetupRelease type is like a function call in programming languages where the element type parameter is passed as a parameter. The parameterised type only implies a textual change in abstract syntax where all references to the parameterised type are replaced by the compiler with the release/setup choice. Two examples of the usage are shown below:
-- /example/ ASN1START

RRCMessage-r15-IEs ::= SEQUENCE {
	field-r15				SetupRelease { IE-r15 }					OPTIONAL,	--	Need M
	...
}


RRCMessage-r15-IEs ::= SEQUENCE {
	field-r15		SetupRelease { Element-r15 }
}																	OPTIONAL,	-- Need M

Element-r15 ::= SEQUENCE { 
	field1-r15					IE1-r15, 
	field2-r15					IE2-r15								OPTIONAL	-- Need N
}																	OPTIONAL,	-- Need M

-- /example/ ASN1STOP

The SetupRelease is always be used with only named IEs, i.e. the example below is not allowed:
-- /example/ ASN1START

RRCMessage-r15-IEs ::= SEQUENCE {
	field-r15		SetupRelease { SEQUENCE { 	-- Unnamed SEQUENCEs are not allowed!
			field1-r15					IE1-r15, 
			field2-r15					IE2-r15							OPTIONAL	-- Need N
		}
	}																	OPTIONAL,	-- Need M
}

-- /example/ ASN1STOP

If a field defined using the parameterized SetupRelease type requires procedural text, the field is referred to using the values defined for the type itself, namely, "setup" and "release". For example, procedural text for field-r15 above could be as follows:
1> if field-r15 is set to "setup":
2> do something;
1> else (field-r15 is set to "release"):
2> release field-r15 (if appropriate).
A.3.9	Guidelines on use of ToAddModList and ToReleaseList
In order to benefit from delta signalling when modifying lists with many and/or large elements, so-called add/mod- and release- lists should be used. Instead of a single list containing all elements of the list, the ASN.1 provides two lists. One list is used to convey the actual elements that are to be added to the list or modified in the list. The second list conveys only the identities (IDs) of the list elements that are to be released from the list. In other words, the ASN.1 defines only means to signal modifications to a list maintained in the receiver (typically the UE). An example is provided below:
-- /example/ ASN1START

AnExampleIE ::= 		SEQUENCE {
	elementsToAddModList	SEQUENCE (SIZE (1..maxNrofElements)) OF Element										OPTIONAL,	--	Need N
	elementsToReleaseList	SEQUENCE (SIZE (1..maxNrofElements)) OF ElementId									OPTIONAL,	--	Need N
	...
}

Element ::=			SEQUENCE {
	elementId				ElementId,
	aField					INTEGER (0..16777215),
	anotherField			OCTET STRING,
	...
}

ElementId ::=			INTEGER (0..maxNrofElements-1)

maxNrofElements 		INTEGER ::= 50
maxNrofElements-1 		INTEGER ::= 49

-- /example/ ASN1STOP

As can be seen, the elements of the list must contain an identity (INTEGER) that identifies the elements unambiguously upon addition, modification and removal. It is recommended to define an IE for that identifier (here ElementId) so that it can be used both for a field inside the element as well as in the elementsToReleaseList.
Both lists should be made OPTIONAL and flagged as ”Need N”. The need code reflects that the UE does not maintain the received lists as such but rather updates its configuration using the information therein. In other words, it is not possible to provide via delta signalling an update to a previously signalled elementsToAddModList or elementsToReleaseList (which Need M would imply). The update is always in relation to the UE's internal configuration.
If no procedural text is provided for a set of ToAddModList and ToReleaseList, the following generic procedure applies:
The UE shall:
1>	for each ElementId in the elementsToReleaseList,:
2>	if the current UE configuration includes an Element with the given ElementId:
3>	release the Element from the current UE configuration;
1>	for each Element in the elementsToAddModList:
2>	if the current UE configuration includes an Element with the given ElementId:
3>	modify the configured Element in accordance with the received Element;
2>	else:
3>	add received Element to the UE configuration.
A.4	Extension of the PDU specifications
A.4.1	General principles to ensure compatibility
It is essential that extension of the protocol does not affect interoperability i.e. it is essential that implementations based on different versions of the RRC protocol are able to interoperate. In particular, this requirement applies for the following kind of protocol extensions:
-	Introduction of new PDU types (i.e. these should not cause unexpected behaviour or damage).
-	Introduction of additional fields in an extensible PDUs (i.e. it should be possible to ignore uncomprehended extensions without affecting the handling of the other parts of the message).
-	Introduction of additional values of an extensible field of PDUs. If used, the behaviour upon reception of an uncomprehended value should be defined.
It should be noted that the PDU extension mechanism may depend on the logical channel used to transfer the message e.g. for some PDUs an implementation may be aware of the protocol version of the peer in which case selective ignoring of extensions may not be required.
The non-critical extension mechanism is the primary mechanism for introducing protocol extensions i.e. the critical extension mechanism is used merely when there is a need to introduce a 'clean' message version. Such a need appears when the last message version includes a large number of non-critical extensions, which results in issues like readability, overhead associated with the extension markers. The critical extension mechanism may also be considered when it is complicated to accommodate the extensions by means of non-critical extension mechanisms.
A.4.2	Critical extension of messages and fields
The mechanisms to critically extend a message are defined in A.3.3. There are both "outer branch" and "inner branch" mechanisms available. The "outer branch" consists of a CHOICE having the name criticalExtensions, with two values, c1 and criticalExtensionsFuture. The criticalExtensionsFuture branch consists of an empty SEQUENCE, while the c1 branch contains the "inner branch" mechanism.
The "inner branch" structure is a CHOICE with values of the form "MessageName-rX-IEs" (e.g., "RRCConnectionReconfiguration-r8-IEs") or "spareX", with the spare values having type NULL. The "-rX-IEs" structures contain the complete structure of the message IEs for the appropriate release; i.e., the critical extension branch for the Rel-10 version of a message includes all Rel-8 and Rel-9 fields (that are not obviated in the later version), rather than containing only the additional Rel-10 fields.
The following guidelines may be used when deciding which mechanism to introduce for a particular message, i.e. only an 'outer branch', or an 'outer branch' in combination with an 'inner branch' including a certain number of spares:
-	For certain messages, e.g. initial uplink messages, messages transmitted on a broadcast channel, critical extension may not be applicable.
-	An outer branch may be sufficient for messages not including any fields.
-	The number of spares within inner branch should reflect the likelihood that the message will be critically extended in future releases (since each release with a critical extension for the message consumes one of the spare values). The estimation of the critical extension likelyhood may be based on the number, size and changeability of the fields included in the message.
-	In messages where an inner branch extension mechanism is available, all spare values of the inner branch should be used before any critical extensions are added using the outer branch.
The following example illustrates the use of the critical extension mechanism by showing the ASN.1 of the original and of a later release
-- /example/ ASN1START					-- Original release

RRCMessage ::=							SEQUENCE {
	rrc-TransactionIdentifier				RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		c1									CHOICE{
			rrcMessage-r8						RRCMessage-r8-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

-- ASN1STOP

-- /example/ ASN1START					-- Later release

RRCMessage ::=							SEQUENCE {
	rrc-TransactionIdentifier				RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		c1									CHOICE{
			rrcMessage-r8						RRCMessage-r8-IEs,
			rrcMessage-r10						RRCMessage-r10-IEs,
			rrcMessage-r11						RRCMessage-r11-IEs,
			rrcMessage-r14						RRCMessage-r14-IEs
		},
		later							CHOICE {
			c2									CHOICE{
				rrcMessage-r16						RRCMessage-r16-IEs,
				spare7 NULL, spare6 NULL, spare5 NULL, spare4 NULL,
				spare3 NULL, spare2 NULL, spare1 NULL
			},
			criticalExtensionsFuture				SEQUENCE {}
		}
	}
}

-- ASN1STOP

It is important to note that critical extensions may also be used at the level of individual fields i.e. a field may be replaced by a critically extended version. When sending the extended version, the original version may also be included (e.g. original field is mandatory, EUTRAN is unaware if UE supports the extended version). In such cases, a UE supporting both versions may be required to ignore the original field. The following example illustrates the use of the critical extension mechanism by showing the ASN.1 of the original and of a later release.
-- /example/ ASN1START					-- Original release

RRCMessage ::=							SEQUENCE {
	rrc-TransactionIdentifier				RRC-TransactionIdentifier,
	criticalExtensions					CHOICE {
		c1									CHOICE{
			rrcMessage-r8						RRCMessage-r8-IEs,
			spare3 NULL, spare2 NULL, spare1 NULL
		},
		criticalExtensionsFuture			SEQUENCE {}
	}
}

RRCMessage-rN-IEs ::= SEQUENCE {
	field1-rN							ENUMERATED {
											value1, value2, value3, value4}	OPTIONAL,	-- Need N
	field2-rN							InformationElement2-rN				OPTIONAL,	-- Need N
	nonCriticalExtension				RRCConnectionReconfiguration-vMxy-IEs	OPTIONAL
}

RRCConnectionReconfiguration-vMxy-IEs ::= SEQUENCE {
	field2-rM							InformationElement2-rM			OPTIONAL, -- Cond NoField2rN
	nonCriticalExtension				SEQUENCE {}						OPTIONAL
}

-- ASN1STOP

Conditional presenceExplanationNoField2rNThe field is optionally present, need N, if field2-rN is absent. Otherwise the field is not present
Finally, it is noted that a critical extension may be introduced in the same release as the one in which the original field was introduced e.g. to correct an essential ASN.1 error. In such cases a UE capability may be introduced, to assist the network in deciding whether or not to use the critically extension.
A.4.3	Non-critical extension of messages
A.4.3.1	General principles
The mechanisms to extend a message in a non-critical manner are defined in A.3.3. W.r.t. the use of extension markers, the following additional guidelines apply:
-	When further non-critical extensions are added to a message that has been critically extended, the inclusion of these non-critical extensions in earlier critical branches of the message should be avoided when possible.
-	The extension marker ("...") is the primary non-critical extension mechanism that is used but empty sequences may be used if length determinant is not required. Examples of cases where a length determinant is not required:
-	at the end of a message;
-	at the end of a structure contained in a BIT STRING or OCTET STRING.
-	When an extension marker is available, non-critical extensions are preferably placed at the location (e.g. the IE) where the concerned parameter belongs from a logical/ functional perspective (referred to as the 'default extension location').
-	It is desirable to aggregate extensions of the same release or version of the specification into a group, which should be placed at the lowest possible level.
-	In specific cases it may be preferrable to place extensions elsewhere (referred to as the 'actual extension location') e.g. when it is possible to aggregate several extensions in a group. In such a case, the group should be placed at the lowest suitable level in the message. <TBD: ref to seperate example>
-	In case placement at the default extension location affects earlier critical branches of the message, locating the extension at a following higher level in the message should be considered.
-	In case an extension is not placed at the default extension location, an IE should be defined. The IE's ASN.1 definition should be placed in the same ASN.1 section as the default extension location. In case there are intermediate levels in-between the actual and the default extension location, an IE may be defined for each level. Intermediate levels are primarily introduced for readability and overview. Hence intermediate levels need not allways be introduced e.g. they may not be needed when the default and the actual extension location are within the same ASN.1 section. <TBD: ref to seperate example>
A.4.3.2	Further guidelines
Further to the general principles defined in the previous section, the following additional guidelines apply regarding the use of extension markers:
-	Extension markers within SEQUENCE:
-	Extension markers are primarily, but not exclusively, introduced at the higher nesting levels.
-	Extension markers are introduced for a SEQUENCE comprising several fields as well as for information elements whose extension would result in complex structures without it (e.g. re-introducing another list).
-	Extension markers are introduced to make it possible to maintain important information structures e.g. parameters relevant for one particular RAT.
-	Extension markers are also used for size critical messages (i.e. messages on BCCH, BR-BCCH, PCCH and CCCH), although introduced somewhat more carefully.
-	The extension fields introduced (or frozen) in a specific version of the specification are grouped together using double brackets.
-	Extension markers within ENUMERATED:
-	Spare values may be used until the number of values reaches the next power of 2, while the extension marker caters for extension beyond that limit, given that the use of spare values in a later Release is possible without any error cases.
-	A suffix of the form "vXYZ" is used for the identifier of each new value, e.g. "value-vXYZ".
-	Extension markers within CHOICE:
-	Extension markers are introduced when extension is foreseen and when comprehension is not required by the receiver i.e. behaviour is defined for the case where the receiver cannot comprehend the extended value (e.g. ignoring an optional CHOICE field). It should be noted that defining the behaviour of a receiver upon receiving a not comprehended choice value is not required if the sender is aware whether or not the receiver supports the extended value.
-	A suffix of the form "vXYZ" is used for the identifier of each new choice value, e.g. "choice-vXYZ".
Non-critical extensions at the end of a message/ of a field contained in an OCTET or BIT STRING:
-	When a nonCriticalExtension is actually used, a "Need" code should not be provided for the field, which always is a group including at least one extension and a field facilitating further possible extensions. For simplicity, it is recommended not to provide a "Need" code when the field is not actually used either.
Further, more general, guidelines:
-	In case a need code is not provided for a group, a "Need" code is provided for all individual extension fields within the group i.e. including for fields that are not marked as OPTIONAL. The latter is to clarify the action upon absence of the whole group.
A.4.3.3	Typical example of evolution of IE with local extensions
The following example illustrates the use of the extension marker for a number of elementary cases (sequence, enumerated, choice). The example also illustrates how the IE may be revised in case the critical extension mechanism is used.
NOTE	In case there is a need to support further extensions of release n while the ASN.1 of release (n+1) has been frozen, without requiring the release n receiver to support decoding of release (n+1) extensions, more advanced mechanisms are needed e.g. including multiple extension markers.
-- /example/ ASN1START

InformationElement1 ::= 			SEQUENCE {
	field1								ENUMERATED {
											value1, value2, value3, value4-v880,
											..., value5-v960 },
	field2								CHOICE {
		field2a								BOOLEAN,
		field2b								InformationElement2b,
		...,
		field2c-v960						InformationElement2c-r9
	},
	...,
	[[	field3-r9							InformationElement3-r9		OPTIONAL		-- Need R
	]],
	[[	field3-v9a0							InformationElement3-v9a0	OPTIONAL,		-- Need R
		field4-r9							InformationElement4			OPTIONAL		-- Need R
	]]
}

InformationElement1-r10 ::=			SEQUENCE {
	field1								ENUMERATED {
											value1, value2, value3, value4-v880,
											value5-v960, value6-v1170, spare2, spare1, ... },
	field2								CHOICE {
		field2a								BOOLEAN,
		field2b								InformationElement2b,
		field2c-v960						InformationElement2c-r9,
		...,
		field2d-v12b0						INTEGER (0..63)
	},
	field3-r9							InformationElement3-r10			OPTIONAL,	-- Need R
	field4-r9							InformationElement4				OPTIONAL,	-- Need R
	field5-r10							BOOLEAN,
	field6-r10							InformationElement6-r10			OPTIONAL,	-- Need R
	...,
	[[	field3-v1170					InformationElement3-v1170		OPTIONAL	-- Need R
	]]
}

-- ASN1STOP

Some remarks regarding the extensions of InformationElement1 as shown in the above example:
–	The InformationElement1 is initially extended with a number of non-critical extensions. In release 10 however, a critical extension is introduced for the message using this IE. Consequently, a new version of the IE InformationElement1 (i.e. InformationElement1-r10) is defined in which the earlier non-critical extensions are incorporated by means of a revision of the original field.
–	The value4-v880 is replacing a spare value defined in the original protocol version for field1. Likewise value6-v1170 replaces spare3 that was originally defined in the r10 version of field1.
–	Within the critically extended release 10 version of InformationElement1, the names of the original fields/IEs are not changed, unless there is a real need to distinguish them from other fields/IEs. E.g. the field1 and InformationElement4 were defined in the original protocol version (release 8) and hence not tagged. Moreover, the field3-r9 is introduced in release 9 and not re-tagged; although, the InformationElement3 is also critically extended and therefore tagged InformationElement3-r10 in the release 10 version of InformationElement1.
A.4.3.4	Typical examples of non critical extension at the end of a message
The following example illustrates the use of non-critical extensions at the end of the message or at the end of a field that is contained in a BIT or OCTET STRING i.e. when an empty sequence is used.
-- /example/ ASN1START

RRCMessage-r8-IEs ::=			SEQUENCE {
	field1							InformationElement1,
	field2							InformationElement2,
	field3							InformationElement3					OPTIONAL,	-- Need N
	nonCriticalExtension			RRCMessage-v860-IEs					OPTIONAL
}

RRCMessage-v860-IEs ::=			SEQUENCE {
	field4-v860						InformationElement4					OPTIONAL,	-- Need S
	field5-v860						BOOLEAN								OPTIONAL,	-- Cond C54
	nonCriticalExtension			RRCMessage-v940-IEs					OPTIONAL
}

RRCMessage-v940-IEs ::=			SEQUENCE {
	field6-v940						InformationElement6-r9				OPTIONAL,	-- Need R
	nonCriticalExtensions			SEQUENCE {}							OPTIONAL
}

-- ASN1STOP

Some remarks regarding the extensions shown in the above example:
–	The InformationElement4 is introduced in the original version of the protocol (release 8) and hence no suffix is used.
A.4.3.5	Examples of non-critical extensions not placed at the default extension location
The following example illustrates the use of non-critical extensions in case an extension is not placed at the default extension location.
–	ParentIE-WithEM
The IE ParentIE-WithEM is an example of a high level IE including the extension marker (EM). The root encoding of this IE includes two lower level IEs ChildIE1-WithoutEM and ChildIE2-WithoutEM which not include the extension marker. Consequently, non-critical extensions of the Child-IEs have to be included at the level of the Parent-IE.
The example illustrates how the two extension IEs ChildIE1-WithoutEM-vNx0 and ChildIE2-WithoutEM-vNx0 (both in release N) are used to connect non-critical extensions with a default extension location in the lower level IEs to the actual extension location in this IE.
ParentIE-WithEM information element
-- /example/ ASN1START

ParentIE-WithEM ::=					SEQUENCE {
	-- Root encoding, including:
	childIE1-WithoutEM					ChildIE1-WithoutEM				OPTIONAL,		-- Need N
	childIE2-WithoutEM					ChildIE2-WithoutEM				OPTIONAL,		-- Need N
	...,
	[[	childIE1-WithoutEM-vNx0				ChildIE1-WithoutEM-vNx0		OPTIONAL,		-- Need N
		childIE2-WithoutEM-vNx0				ChildIE2-WithoutEM-vNx0		OPTIONAL		-- Need N
	]]
}

-- ASN1STOP

Some remarks regarding the extensions shown in the above example:
–	The fields childIEx-WithoutEM-vNx0 may not really need to be optional (depends on what is defined at the next lower level).
–	In general, especially when there are several nesting levels, fields should be marked as optional only when there is a clear reason.
–	ChildIE1-WithoutEM
The IE ChildIE1-WithoutEM is an example of a lower level IE, used to control certain radio configurations including a configurable feature which can be setup or released using the local IE ChIE1-ConfigurableFeature. The example illustrates how the new field chIE1-NewField is added in release N to the configuration of the configurable feature. The example is based on the following assumptions:
–	When initially configuring as well as when modifying the new field, the original fields of the configurable feature have to be provided also i.e. as if the extended ones were present within the setup branch of this feature.
–	When the configurable feature is released, the new field should be released also.
–	When omitting the original fields of the configurable feature the UE continues using the existing values (which is used to optimise the signalling for features that typically continue unchanged upon handover).
–	When omitting the new field of the configurable feature the UE releases the existing values and discontinues the associated functionality (which may be used to support release of unsupported functionality upon handover to an eNB supporting an earlier protocol version).
The above assumptions, which affect the use of conditions and need codes, may not always apply. Hence, the example should not be re-used blindly.
ChildIE1-WithoutEM information elements
-- /example/ ASN1START

ChildIE1-WithoutEM ::=				SEQUENCE {
	-- Root encoding, including:
	chIE1-ConfigurableFeature			ChIE1-ConfigurableFeature		OPTIONAL		 -- Need N
}

ChildIE1-WithoutEM-vNx0 ::=		SEQUENCE {
	chIE1-ConfigurableFeature-vNx0		ChIE1-ConfigurableFeature-vNx0	OPTIONAL	-- Cond ConfigF
}

ChIE1-ConfigurableFeature ::=		CHOICE {
	release								NULL,
	setup								SEQUENCE {
		-- Root encoding
	}
}

ChIE1-ConfigurableFeature-vNx0 ::=	SEQUENCE {
	chIE1-NewField-rN					INTEGER (0..31)
}

-- ASN1STOP

Conditional presenceExplanationConfigFThe field is optional present, need R, in case of chIE1-ConfigurableFeature is included and set to "setup"; otherwise the field is not present and the UE shall delete any existing value for this field.
–	ChildIE2-WithoutEM
The IE ChildIE2-WithoutEM is an example of a lower level IE, typically used to control certain radio configurations. The example illustrates how the new field chIE1-NewField is added in release N to the configuration of the configurable feature.
ChildIE2-WithoutEM information element
-- /example/ ASN1START

ChildIE2-WithoutEM ::=				CHOICE {
	release								NULL,
	setup								SEQUENCE {
		-- Root encoding
	}
}

ChildIE2-WithoutEM-vNx0 ::=			SEQUENCE {
	chIE2-NewField-rN					INTEGER (0..31)					OPTIONAL	-- Cond ConfigF
}

-- ASN1STOP

Conditional presenceExplanationConfigFThe field is optional present, need R, in case of chIE2-ConfigurableFeature is included and set to "setup"; otherwise the field is not present and the UE shall delete any existing value for this field.
A.5	Guidelines regarding inclusion of transaction identifiers in RRC messages
The following rules provide guidance on which messages should include a Transaction identifier
1:	DL messages on CCCH that move UE to RRC-Idle should not include the RRC transaction identifier.
2:	All network initiated DL messages by default should include the RRC transaction identifier.
3:	All UL messages that are direct response to a DL message with an RRC Transaction identifier should include the RRC Transaction identifier.
4:	All UL messages that require a direct DL response message should include an RRC transaction identifier.
5:	All UL messages that are not in response to a DL message nor require a corresponding response from the network should not include the RRC Transaction identifier.
A.6	Guidelines regarding use of need codes
The following rule provides guidance for determining need codes for optional downlink fields:
- if the field needs to be stored by the UE (i.e. maintained) when absent:
- use Need M (=Maintain);
- else, if the field needs to be released by the UE when absent:
- use Need R (=Release);
- else, if UE shall take no action when the field is absent (i.e. UE does not even need to maintain any existing value of the field):
- use Need N (=None);
- else (UE behaviour upon absence doesn’t fit any of the above conditions):
- use Need S (=Specified);
- specify the UE behaviour upon absence of the field in the procedural text or in the field description table.
A.7	Guidelines regarding use of conditions
Conditions are primarily used to specify network restrictions, for which the following types can be distinguished:
-	CondM: Message Contents related constraints e.g. that a field B is mandatory present if the same message includes field A and when it is set value X.
-	CondC: Configuration Constraints e.g. that a field D can only be signalled if field C is configured and set to value Y. (i.e. regardless of whether field C is present in the same message or previously configured).
The use of these conditions is illustrated by an example.
-- /example/ ASN1START

RRCMessage-IEs ::= SEQUENCE {
	fieldA							FieldA					OPTIONAL,	-- Need M
	fieldB							FieldB					OPTIONAL,	-- CondM-FieldAsetToX
	fieldC							FieldC					OPTIONAL,	-- Need M
	fieldD							FieldD					OPTIONAL,	-- CondC-FieldCsetToY
	nonCriticalExtension			SEQUENCE {}				OPTIONAL
}

-- /example/ ASN1STOP

Conditional presenceExplanationMessage (content) constraintsCondM-FieldAsetToXThe field is mandatory present if fieldA is included and set to valueX. Otherwise the field is optional present, need R.Configuration constraintsCondC- FieldCsetToYThe field is optional present, need M, if fieldC is configured and set to valueY. Otherwise the field is not present and the UE does not maintain the value

Annex B (informative):
Change history

Change historyDateMeetingTDocCRRevCatSubject/CommentNew version04/2017RAN2#97bisR2-17033950.0.104/2017RAN2#97bisR2-17039220.0.205/2017RAN2#98R2-17058150.0.306/2017RAN2#NR2R2-17071870.0.408/2017RAN2#99R2-17084680.0.509/2017RAN2#99bisR2-17105570.1.011/2017RAN2#100R2-17136290.2.011/2017RAN2#100R2-17141260.3.012/2017RAN2#100R2-17142590.4.012/2017RAN#78RP-172570Submitted for Approval in RAN#781.0.012/2017RAN#78Upgraded to Rel-15 (MCC)15.0.003/2018RAN#79RP-18047900081FCorrections for EN-DC (Note: the clause numbering between 15.0.0 and 15.1.0 has changed in some cases).15.1.0
Page 1


3GPP TS 38.331 V15.1.0 (2018-03)
39
Release 15



3GPP

3GPP TS 38.331 V15.1.0 (2018-03)
268
Release 15



3GPP

